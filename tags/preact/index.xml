<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Preact on 週刊Deno</title><link>https://uki00a.github.io/deno-weekly/tags/preact.html</link><description>Recent content in Preact on 週刊Deno</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Sun, 26 Jan 2025 00:00:00 +0000</lastBuildDate><atom:link href="https://uki00a.github.io/deno-weekly/tags/preact/index.xml" rel="self" type="application/rss+xml"/><item><title>2025/01/20〜2025/01/26の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2025/01/26.html</link><pubDate>Sun, 26 Jan 2025 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2025/01/26.html</guid><description>Deno v2.1.7 (v2.1.6で発生していたWorkerに関する問題の修正など), deno_stdのリリース (@std/async@1.0.10 - `waitFor`の追加, @std/fs@1.0.10 - Node.js向けサポートの改善), wasmbuild v0.19.0 (古いバージョンのDenoやブラウザーなど向けに --inline オプションが追加), @preact/preset-vite v2.10.0 (Denoのサポート)</description></item><item><title>fresh v1.6</title><link>https://uki00a.github.io/deno-weekly/articles/fresh/v1.6.html</link><pubDate>Sun, 03 Dec 2023 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/fresh/v1.6.html</guid><description>fresh v1.6がリリース。Tailwind CSSの公式サポート, FreshContext型の導入, Partialsでの&amp;lt;form&amp;gt;やリダイレクトのサポート, プラグインからのIslandコンポーネントや静的アセットの提供などがサポートされています。</description></item><item><title>Deno v1.38</title><link>https://uki00a.github.io/deno-weekly/articles/deno/v1.38.html</link><pubDate>Sun, 05 Nov 2023 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/deno/v1.38.html</guid><description>Deno v1.38がリリースされました。deno docでリント(--lint)やHTMLページの生成(--html)がサポート / Deno本体でHMRがサポート。(--unstable-hmr) / --unstable-*がサポート / deno.jsonでunstableフィールドがサポート / `compilerOptions.jsx`で`&amp;#34;precompile&amp;#34;`がサポート / .envのサポート (--envオプション) / Deno.cronが実装 / npmなどで作成されたnode_modulesのサポート (BYONM) など...</description></item><item><title>fresh v1.5</title><link>https://uki00a.github.io/deno-weekly/articles/fresh/v1.5.html</link><pubDate>Sun, 15 Oct 2023 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/fresh/v1.5.html</guid><description>fresh v1.5がリリース。SPAライクなクライアントサイドナビゲーションを実現するために、Partialsという機能が導入されました。</description></item><item><title>fresh v1.4</title><link>https://uki00a.github.io/deno-weekly/articles/fresh/v1.4.html</link><pubDate>Sun, 20 Aug 2023 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/fresh/v1.4.html</guid><description>fresh v1.4がリリース。オプトイン方式での事前ビルドのサポート、Route Groupsやレイアウト機能の実装などが実施されています。</description></item><item><title>fresh v1.3</title><link>https://uki00a.github.io/deno-weekly/articles/fresh/v1.3.html</link><pubDate>Sun, 23 Jul 2023 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/fresh/v1.3.html</guid><description>fresh v1.3がリリースされました。
この記事では主な変更点などについて解説します。
非同期Routeコンポーネント 非同期Routeコンポーネントがサポートされました。
例えばデータベースや外部のAPIなどから非同期に取得したデータをRouteコンポーネントに渡すためには、今までは以下のようにhandlerを定義する必要がありました。
// routes/users/[id].tsx import type { Handlers, PageProps } from &amp;#34;$fresh/server.ts&amp;#34;; export const handler: Handlers&amp;lt;Data&amp;gt; = { async GET(req, ctx) { const user = await findUserByID(ctx.params.id); if (user == null) { return ctx.renderNotFound(); } const resp = await ctx.render(user); return resp; }, }; export default async function User(props: PageProps&amp;lt;User&amp;gt;) { return &amp;lt;UserDetail user={props.data} /&amp;gt;; } 非同期Routeコンポーネントを利用することで、handlerを記述せずに非同期でのデータの取得とコンポーネントのレンダリングが行えるようになります。</description></item><item><title>fresh v1.2</title><link>https://uki00a.github.io/deno-weekly/articles/fresh/v1.2.html</link><pubDate>Sun, 18 Jun 2023 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/fresh/v1.2.html</guid><description>fresh v1.2がリリースされました。
この記事では主な変更点などについて解説します。
このリリースに合わせて、PreactのメンテナーであるMarvin Hagemeister氏がDeno社に入社されたことが発表されています。これからMarvin Hagemeister氏を中心に、フルタイムでFreshの開発が進められていくことが計画されているようです。
アップデートについて freshはアップデート用のスクリプト(update.ts)を提供しています。
以下のコマンドを実行すると、v1.2へアップデートすることができます。
$ deno run -A -r https://fresh.deno.dev/update . また、このバージョン以降からinit.ts (freshのプロジェクト初期化用のスクリプト)で作成したプロジェクトでは、deno task updateでもfreshをアップデートすることができます。
Islandコンポーネントに関する改善 props.childrenのサポート Islandコンポーネントでprops.childrenがサポートされました。
import type { PageProps } from &amp;#34;$fresh/server.ts&amp;#34;; import Collapse from &amp;#34;../islands/Collapse.tsx&amp;#34;; function Content() { return &amp;lt;div&amp;gt;foobar&amp;lt;/div&amp;gt;; } export default function Index(props: PageProps) { return ( &amp;lt;Collapse&amp;gt; &amp;lt;Content /&amp;gt; &amp;lt;/Collapse&amp;gt; ); } またIslandコンポーネントをネストすることもできます。
export default function Index(props: PageProps) { return ( &amp;lt;Collapse&amp;gt; &amp;lt;Collapse&amp;gt; &amp;lt;Content /&amp;gt; &amp;lt;/Collapse&amp;gt; &amp;lt;/Collapse&amp;gt; ); } 制限として、children以外のpropsにコンポーネントを渡すことはまだサポートされていません。</description></item><item><title>Fresh v1.1</title><link>https://uki00a.github.io/deno-weekly/articles/fresh/v1.1.html</link><pubDate>Sun, 11 Sep 2022 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/fresh/v1.1.html</guid><description>Fresh v1.1がリリースされました。
この記事では主な変更点などについて解説します。
アップデート用スクリプトの追加 Freshのアップデート用スクリプトが追加されています。
$ deno run -A https://fresh.deno.dev/update . このスクリプトを実行すると、各種依存関係や後述するcompilerOptionsやTwindプラグインなどに関する変更が適用されます。
compilerOptions.jsxとcompilerOptions.jsxImportSourceのサポート Freshのプロジェクトの初期化時に、compilerOptions.jsxとcompilerOptions.jsxImportSourceが自動で設定されるようになりました。
これにより、.jsx/.tsxファイルで以下2行の指定が不要になります。
/** @jsx h */ import { h } from &amp;#34;preact&amp;#34;; 前述のアップデートスクリプトを実行すると、既存のプロジェクトにもこの設定が適用されます。
プラグインシステム ユーザがFreshの挙動を拡張できるようにするために、プラグインシステムが実装されました。
現時点では、生成されたHTMLに対するスクリプトやスタイルの注入などがサポートされています。将来的には、プラグイン経由でRouteやMiddlewareなどを追加できるようにすることが予定されているようです。
例として、公式でTwindプラグインが提供されており、start()のpluginsオプションで有効化できます。
// main.ts import { start } from &amp;#34;$fresh/server.ts&amp;#34;; import twindPlugin from &amp;#34;$fresh/plugins/twind.ts&amp;#34;; import manifest from &amp;#34;./fresh.gen.ts&amp;#34;; import twindConfig from &amp;#34;./twind.config.ts&amp;#34;; await start(manifest, { plugins: [twindPlugin(twindConfig)] }); このTwindプラグインを有効化すると、twを使わずにclassを指定できるようになります (PreactのOption Hooksを使用して twが自動で適用されます)
&amp;lt;div class=&amp;#34;font-bold&amp;#34;&amp;gt;foobar&amp;lt;/div&amp;gt; 前述のアップデートスクリプトを実行することで、twを使わずにclassを記述する形式へ自動で変換されます。
Preact Devtoolsのサポート Preact Devtoolsのサポートが追加されています。
devモード(deno task start)時は自動で有効化されるため、特に設定などは不要です。</description></item><item><title>2021/05/30〜2022/06/05の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2022/06/05.html</link><pubDate>Sun, 05 Jun 2022 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2022/06/05.html</guid><description>Deno v1.22.2 Deno v1.22.2がリリースされました。
主な変更点:
Deno.getGid()が実装されました。(unstable) POSIX系プラットフォームではプロセスのグループIDが、Windowsではnullが返されます。 利用するには--allow-envの指定が必要です。 Error.captureStackTrace()の型定義が追加されました。 Crypto.getRandomValues()の型定義が改善されました。(BigInt64ArrayやBigUint64Arrayが受け取れず、Float32ArrayやFloat64Arrayが引数として受け取れてしまう問題が解消されています) https://github.com/denoland/deno/releases/tag/v1.22.2
deno_std v0.142.0 deno_std v0.142.0がリリースされました。
FNVのサポート (crypto) cryptoモジュールでFNVが実装されました。
import { crypto } from &amp;#34;https://deno.land/std@0.142.0/crypto/mod.ts&amp;#34;; // ... const digest = await crypto.subtle.digest(&amp;#34;FNV32&amp;#34;, input); media_typesモジュールの追加 deno_stdにmedia_typesモジュールが追加されました。
import { contentType } from &amp;#34;https://deno.land/std@0.142.0/media_types/mod.ts&amp;#34;; contentType(&amp;#34;.js&amp;#34;); // =&amp;gt; &amp;#34;application/javascript; charset=UTF-8&amp;#34; contentType(&amp;#34;application/json&amp;#34;); // =&amp;gt; &amp;#34;application/json; charset=UTF-8&amp;#34; このモジュールは、以前にもdeno_stdに存在するモジュールの一部でしたが、一度削除されています。
その後、メンテナンスはoakserver/media_typesのリポジトリに引き継がれていました。
このリリースで改めてmedia_typesモジュールが復帰したため、oakserver/media_typesのリポジトリはアーカイブされています。
TextLineStreamにallowCRオプションが追加 (streams/delimiter) このオプションにtrueを指定したときのみCRが取り扱われるように変更されています。
前回のリリースで、デフォルトでCRが取り扱われるように修正されましたが、デフォルトの挙動を変えてしまうのはまずいということで、このオプションが追加されました。
https://github.com/denoland/deno_std/releases/tag/0.142.0
oak_commonsパッケージの機能のdeno_stdへの移行 現在、oak_commonsパッケージで提供されていた機能の一部をdeno_stdへ移植するPRが作成されています。
例)</description></item></channel></rss>