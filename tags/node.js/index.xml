<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Node.js on 週刊Deno</title><link>https://uki00a.github.io/deno-weekly/tags/node.js.html</link><description>Recent content in Node.js on 週刊Deno</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Sun, 17 Apr 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://uki00a.github.io/deno-weekly/tags/node.js/index.xml" rel="self" type="application/rss+xml"/><item><title>2021/04/11〜2022/04/17の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2022/04/17.html</link><pubDate>Sun, 17 Apr 2022 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2022/04/17.html</guid><description>Deno v1.20.6 Deno v1.20.6がリリースされました。
deno fmtコマンドの内部実装で使用されているdprint関連のプラグインがアップデートされています。
その影響により、deno fmtコマンドのパフォーマンス向上やバグの修正が行われています。 (オブジェクトリテラルと3項演算子を併用した際に、フォーマット結果に一貫性がなくなる問題が修正されているようです)
https://github.com/denoland/deno/releases/tag/v1.20.6
deno_std v0.135.0 deno_std v0.135.0がリリースされました。
このリリースでは破壊的変更が実施されています。
io/readers: MultiReaderのシグネチャの変更 (破壊的変更) MultiReaderのコンストラクタの引数が可変長引数ではなくDeno.Readerの配列を受け取るように変更されています。
変更前:
const readers: Array&amp;lt;Deno.Reader&amp;gt; = [...]; new MultiReader(...readers); 変更後:
const readers: Array&amp;lt;Deno.Reader&amp;gt; = [...]; new MultiReader(readers); MultiReaderはstd/archive/tar.tsモジュールの内部で使われており、大量のファイルを持つtarファイルを作ろうとすると、maximum call stack exceededエラーが発生してしまう問題があったようです。
mime/multipartの非推奨化 (破壊的変更) mime/multipartモジュールが非推奨化されました。
今後はFormDataの使用が推奨されます。
testing/benchの非推奨化 (破壊的変更) testing/benchモジュールが非推奨化されました。
今後はDeno.benchの使用が推奨されます。
testing/bddの追加 testing/bddモジュールが追加されました。
JestやMochaライクなAPIを使用してテストコードを記述することができます。
import { assertEquals } from &amp;#34;https://deno.land/std@0.135.0/testing/asserts.ts&amp;#34;; import { describe, it } from &amp;#34;https://deno.land/std@0.135.0/testing/bdd.ts&amp;#34;; describe(&amp;#34;sum&amp;#34;, () =&amp;gt; { it(&amp;#34;should return sum of numbers&amp;#34;, () =&amp;gt; { assertEquals(sum(1, 2, 5), 8) }); it(&amp;#34;should return 0 when no arguments are given&amp;#34;, () =&amp;gt; { assertEquals(sum(), 0); }); }); 定義したテストコードはdeno testコマンドで実行することが出来ます。</description></item><item><title>2021/10/11〜2021/10/17の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2021/10/17.html</link><pubDate>Sun, 17 Oct 2021 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2021/10/17.html</guid><description>Deno v1.15.0 Deno v1.15.0がリリースされました。
Node.jsの互換モードやサブテストの実験的な実装や、URLPatternやDeno.killの安定化、deno uninstallコマンドの実装などが行われています。
新機能:
CLI Node.js互換モードの実装 (--compat を付与してDenoを実行すると、Node.jsの組み込みモジュールの読み込みが有効化されます) deno uninstallコマンドが実装されました (deno installでインストールされたスクリプトをアンインストールできます) deno lintコマンドで--watchオプションがサポートされました テスト Deno.testでテストケースの入れ子が実験的にサポートされました Deno.testで定義したテストケースがリソースリークによって失敗した際に、より詳細なエラーメッセージが表示されるようになりました (unstableをつけたときのみ) Deno API 下記のAPIが安定化されました Deno.kill Deno.Process.kill Deno.resolveDns URLPattern Deno.startTLS/Deno.connectTLS/Deno.createHttpClientでcaCertsオプションがサポートされ、複数のルート証明書を指定できるようになりました 合わせてDeno.startTLSとDeno.connectTLSのcertFileオプションが非推奨化されています また、Deno.createHttpClientのcertFileオプションが削除されています Deno.resolveDnsの内部でエラーが発生した際に返却されるエラーが改善されました Web Crypto API SubtleCrypto.deriveKeyが実装されました SubtleCrypto.wrapKeyが実装されました SubtleCrypto.exportKeyでRSAキーをspkiフォーマットでエクスポートできるようになりました SubtleCryptoのencryptとdecryptメソッドでAES-CBCによる暗号化と復号がサポートされました SubtleCrypto.deriveBitsでECDH (p256)がサポートされました SubtleCrypto.importKeyでraw形式のECDSAキーをインポートできるようになりました SubtleCryptoでAESキーのインポートとエクスポートがサポートされました FFI関連 (Deno.dlopen) バッファ引数(ArrayBuffer)のサポート 非同期呼び出しのサポート WASM スタックトレースにおけるWebAssembly.compileStreaming経由でコンパイルされたWASMモジュールのURLの表示が改善されました WebAssembly.ModuleをWorker間で受け渡せるようになりました その他 ファイルシステム関連のAPIでエラーが発生した際に、対象のファイル名がスタックトレースに表示されるよう改善されました DOMException.stackプロパティが実装されました https://github.com/denoland/deno/releases/tag/v1.15.0 https://deno.com/blog/v1.15 deno_std v0.111.0 deno_std v0.111.0がリリースされました。
std/fs, std/hash, 及びstd/ioで既存APIの非推奨化や破壊的変更が実施されています。
変更点:
fs: existsとexistsSyncが非推奨化されました hash: 非推奨化されました (cryptoモジュールが追加されたため) io: ディレクトリ構造が大幅に変更されました std/io/bufio.</description></item><item><title>2021/10/04〜2021/10/10の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2021/10/10.html</link><pubDate>Sun, 10 Oct 2021 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2021/10/10.html</guid><description>Deno v1.14.3 Deno v1.14.3がリリースされました。
このリリースでは、バグ修正やパフォーマンスチューニングを中心に実施されています。
変更点:
fetchで不正な形式のヘッダを指定するとプロセスがパニックする問題が修正されました Deno.listenで抽象ソケットアドレスを指定するとプロセスがパニックする問題が修正されました REPLでglobalThisに代入するとプロセスがパニックする問題が修正されました Workerのmessageハンドラで投げられたエラーが報告されない問題が修正されました Workerのdeno.permissions.envオプションに配列を渡せるようになりました Deno.testでAggregateErrorが投げられた際の出力が改善されました Opの実行、RequestやResponseの作成、Headers.prototype.appendなどが最適化されました https://github.com/denoland/deno/releases/tag/v1.14.3
deno_std v0.110.0 deno_std v0.110.0がリリースされました。
std/nodeへの機能追加が実施されています。
変更点:
node/buffer: BufferでreadUIntLE及びreadUIntBEが実装されました node/crypto: scrypt, scryptSync, timingSafeEqual, 及びrandomUUIDが実装されました。 node/stream/web: 下記クラスが追加されました。 ReadableByteStreamController TransformStreamDefaultController ByteLengthQueuingStrategy CountQueuingStrategy TextEncoderStream TextDecoderStream node/os: tmpdirが実装されました https://github.com/denoland/deno_std/releases/tag/0.110.0
Freshのアップデート DenoのWebフレームワークであるFreshがアップデートされました。
&amp;lt;Head&amp;gt;コンポーネントがサポートされ、&amp;lt;head&amp;gt;配下に要素を追加できるようになっています。
/** @jsx h */ import { h, Head } from &amp;#34;../deps.ts&amp;#34;; export default function Home() { return ( &amp;lt;div&amp;gt; &amp;lt;Head&amp;gt; &amp;lt;title&amp;gt;Hello&amp;lt;/title&amp;gt; &amp;lt;/Head&amp;gt; &amp;lt;h2&amp;gt;Home&amp;lt;/h2&amp;gt; &amp;lt;/div&amp;gt; ); } https://github.com/lucacasonato/fresh/pull/67
deno-postgres v0.13.0 deno-postgres v0.</description></item></channel></rss>