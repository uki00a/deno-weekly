<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Remix on 週刊Deno</title><link>https://uki00a.github.io/deno-weekly/tags/remix.html</link><description>Recent content in Remix on 週刊Deno</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Sun, 22 May 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://uki00a.github.io/deno-weekly/tags/remix/index.xml" rel="self" type="application/rss+xml"/><item><title>2021/05/16〜2022/05/22の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2022/05/22.html</link><pubDate>Sun, 22 May 2022 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2022/05/22.html</guid><description>Deno v1.22 Deno v1.22がリリースされました。
変更点については以下の記事にまとめたため、詳しくはこちらを参照いただければと思います。
Deno v1.22 deno_std v0.140.0 deno_std v0.140.0がリリースされました。
http serve関数などにonListenオプションが追加されています。
このオプションに関数を設定しておくと、サーバ起動時にそれが呼ばれます。
import { serve } from &amp;#34;https://deno.land/std@0.140.0/http/server.ts&amp;#34;; serve(() =&amp;gt; Response.json({ message: &amp;#34;hello&amp;#34; }), { onListen({ port }) { console.log(`Listening on port ${port}`); }, }); collections/deep_merge deepMerge関数で、循環参照のあるオブジェクトなどで無限ループが発生する問題が修正されています。
testing/asserts assertRejects()に渡した関数が同期的に例外を投げた場合に成功と扱われてしまう問題が修正されました。
await assertRejects(() =&amp;gt; { throw new Error(&amp;#34;foo&amp;#34;); }); // =&amp;gt; rejectされたPromiseが返されていないため、エラー https://github.com/denoland/deno_std/releases/tag/0.140.0
SQLバイディング Deno本体でSQLバインディングを公開するPRが作成されています。
experiment(runtime): expose SQLite bindings (#14627)
まだ実際にリリースされるかどうかは不明ですが、今のところ、下記のようにしてクエリを発行できる想定のようです。
const { Connection } = Deno.</description></item><item><title>2021/02/21〜2022/02/27の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2022/02/27.html</link><pubDate>Sun, 27 Feb 2022 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2022/02/27.html</guid><description>Deno v1.19.1 Deno v1.19.1がリリースされました。
新機能としてDeno.dlopenでstatic変数の参照がサポートされています。
Deno.ForeignStatic その他にも、deno compileで--import-mapオプションがうまく動かなくなっていた問題が修正されています。
https://github.com/denoland/deno/releases/tag/v1.19.1
deno_std v0.127.0 deno_std v0.127.0がリリースされました。
dotenvの追加 deno-dotenvモジュールがdeno_stdにマージされました。
マイグレーション手順も公開されているので、もしdeno-dotenvを利用されていた場合は参考にするとよさそうです。
async/abortableの追加 Promiseをキャンセルできるようにするためのユーティリティが追加されています。
import { abortable } from &amp;#34;https://deno.land/std@0.127.0/async/abortable.ts&amp;#34;; import { delay } from &amp;#34;https://deno.land/std@0.127.0/async/delay.ts&amp;#34;; const controller = new AbortController(); const promise = delay(5000); setTimeout(() =&amp;gt; controller.abort(), 2000); await abortable(promise, controller.signal); // =&amp;gt; AbortError node fs: fs.realpath.nativeが追加されました。 tls: tls.createServerの基本的なサポートが追加されました。 その他 http/file_server: serveDir関数が追加されました。 testing/aserts: assertAlmostEqualsが追加されました。 https://github.com/denoland/deno_std/releases/tag/0.127.0
deno.json(c)でのImport Mapサポートについて deno.</description></item><item><title>2021/12/06〜2021/12/12の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2021/12/12.html</link><pubDate>Sun, 12 Dec 2021 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2021/12/12.html</guid><description>Deno.spawnDenoを追加する提案 以下のissueでDeno.spawnDenoというAPIの追加が提案されています
https://github.com/denoland/deno/issues/13041 背景として、まずdenoland/deno#11016でDeno.runとは異なる新しいサブプロセスAPIが提案されました。
このissueをベースに以下のようなAPIを追加するPRが作成されていますが、まだマージはされていないようです。
// 高レベルAPI const cmd = Deno.Command(executable, { args }); const status = await cmd.status(); // 低レベルAPI const cmd = Deno.Command(executable, { args }); const child = cmd.spawn({ stdin: &amp;#34;piped&amp;#34; }); const writer = child.writer.getWriter(); await writer.write(buffer); この変更は今のところv1.17のマイルストーンに入っているため、次のリリースに含まれる可能性がありそうです。
そして、今回提案されているDeno.spawnDenoは、Node.jsにおけるchild_process.forkに相当する機能のようで、上記のAPIをベースにサンドボックス化されたDenoのサブプロセスを起動する機能のようです。
起動する際にWorkerのdeno.permissionsと同様にパーミッションなどの指定をサポートすることが想定されています。
またこの提案に合わせて --no-permission-requestオプションの追加も提案されています。
このオプションが指定された際はDeno.permissions.requestを無効化し、Deno.spawnDeno経由で起動されたプロセスがパーミッションのエスカレーションをできないようにすることを目的としているようです。
https://github.com/denoland/deno/issues/13041
サブステップAPIの安定化について Deno v1.15で導入されたサブステップAPIの安定化が提案されています。
Deno v1.18での安定化が検討されているようです。
Deno.test(&amp;#34;nested test case&amp;#34;, async (t) =&amp;gt; { const success = await t.step(&amp;#34;step 1&amp;#34;, async (t) =&amp;gt; { const success = await t.</description></item></channel></rss>