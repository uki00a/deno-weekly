<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>Astro on 週刊Deno</title><link>https://uki00a.github.io/deno-weekly/tags/astro.html</link><description>Recent content in Astro on 週刊Deno</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Sun, 20 Nov 2022 00:00:00 +0000</lastBuildDate><atom:link href="https://uki00a.github.io/deno-weekly/tags/astro/index.xml" rel="self" type="application/rss+xml"/><item><title>2022/11/14〜2022/11/20の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2022/11/20.html</link><pubDate>Sun, 20 Nov 2022 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2022/11/20.html</guid><description>Deno v1.28.0 Deno v1.28がリリースされました。
以下に変更内容をまとめたため、よろしければ参照ください。
Deno v1.28 Deno v1.28.1 Deno v1.28.1がリリースされました。
deno installコマンドでnpm:がサポートされています。
その他には、npmパッケージサポートに関する細かなバグ修正などが実施されています:
Conditional exportsで指定されたエントリポイントが型定義を持っていない場合にエラーが発生する問題が修正 npmパッケージにfoo.server.jsのようにベースネーム部分に.を含むファイルが存在する場合に、うまく読み込みができない問題が修正 あるnpmパッケージの依存関係のバージョンにdist tagが指定されていた際に、うまく取り扱われない問題が修正 scopedパッケージに対して@types/*パッケージの型定義が適切に適用されない問題が修正 --lock-writeを指定すると、deno.lockからnpmパッケージが消えてしまう問題が解消 https://github.com/denoland/deno/releases/tag/v1.28.1
deno_std v0.164.0 deno_std v0.164.0がリリースされました。
std/fmt: durationモジュールが追加 ミリ秒単位で指定された時間のフォーマットされた文字列を取得することができます。
import { prettyDuration } from &amp;#34;https://deno.land/std@0.165.0/fmt/duration.ts&amp;#34;; prettyDuration(130000, { ignoreZero: true, formatType: &amp;#34;full&amp;#34; }); // =&amp;gt; &amp;#34;2 minutes, 10 seconds&amp;#34; 補足) prettyDurationは以下のPRでformatにリネームされています。この変更は、おそらくv0.166.0あたりでリリースされると思われるため、今後利用する際はprettyDurationではなくformatを使用するとよさそうです。
https://github.com/denoland/deno_std/pull/2896 std/node: 互換性の向上 node/fs: - read()でコールバックが非同期に呼ばれるように修正 node/http: ServerResponse.finishedが実装 node/http: --unstableが指定されていると、Buffer形式のレスポンスが適切に取り扱われない問題が修正 node/string_decoder: StringDecoder.decodeのパフォーマンスが小さなUint8Arrayに対しては51倍、大きなUint8Arrayに対しては4倍程まで高速化 https://github.com/denoland/deno_std/releases/tag/0.164.0
Support Astro Denoのnpmパッケージサポートを活用して、Astroのサポートに向けた対応が進められているようです。
進捗については、下記のissueで確認できます。
https://github.com/denoland/deno/issues/16659 npmパッケージサポートに関するチュートリアル Denoのv1.28にリリースに合わせ、npmパッケージサポートに関するチュートリアルが公式で公開されています。</description></item><item><title>2021/03/28〜2022/04/03の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2022/04/03.html</link><pubDate>Sun, 03 Apr 2022 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2022/04/03.html</guid><description>Supabase Functions SupabaseでSupabase FunctionsというFaaSが利用できるようになりました。
Supabase FunctionsはDeno Deployをベースにしており、TypeScriptなどを利用してコードを記述できるようです。
Supabase Functions on Deno Deploy Edge Functions are now available in Supabase Deno v1.20.4 Deno v1.20.4がリリースされました。
変更点:
外部モジュールのimport時にリダイレクトが発生すると、deno compileで生成したバイナリがうまく動作しなくなる問題が修正されました。
Deno v1.20.3で非推奨化されたfetch()のシグネチャが修正されました。
変更前:
function fetch( input: URL, init?: RequestInit, ): Promise&amp;lt;Response&amp;gt;; 変更後:
function fetch( input: URL | Request | string, init?: RequestInit, ): Promise&amp;lt;Response&amp;gt;; deno lspでdeno.jsoncなどの拡張子が.jsoncのファイルがウォッチされない問題が修正されました。
deno taskコマンドでのPATHEXT環境変数の取り扱いが改善されました。
https://github.com/denoland/deno/releases/tag/v1.20.4
deno_std v0.133.0 deno_std v0.133.0がリリースされました。
testing/mockモジュールが追加 testingモジュールにテストスパイやテストスタブなどを提供するモジュールが追加されました。
spy
spy()で関数をラップすることで、assertSpyCall()やassertSpyCalls()などで検証ができます。
import { assertSpyCall, assertSpyCalls, spy } from &amp;#34;https://deno.</description></item></channel></rss>