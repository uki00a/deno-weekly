<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom" xmlns:content="http://purl.org/rss/1.0/modules/content/"><channel><title>GraphQL on 週刊Deno</title><link>https://uki00a.github.io/deno-weekly/tags/graphql.html</link><description>Recent content in GraphQL on 週刊Deno</description><generator>Hugo -- gohugo.io</generator><language>ja</language><lastBuildDate>Sun, 14 May 2023 00:00:00 +0000</lastBuildDate><atom:link href="https://uki00a.github.io/deno-weekly/tags/graphql/index.xml" rel="self" type="application/rss+xml"/><item><title>2023/05/08〜2023/05/14の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2023/05/14.html</link><pubDate>Sun, 14 May 2023 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2023/05/14.html</guid><description>Deno v1.33.3 Deno v1.33.3がリリースされました。
deno compileでnpmパッケージがサポート deno compileでnpm:やnode:URLに依存したアプリケーションの実行可能ファイルの生成がサポートされました。
利用する際は、現時点では--unstableの指定が必要です。
import chalk from &amp;#34;npm:chalk@5.2.0&amp;#34;; console.log(chalk.green.bold(&amp;#34;Hello&amp;#34;)); $ deno compile --unstable --output=example main.js $ ./example また、deno compileによるコンパイル対象として、直接npmパッケージを指定することもできるようです。
$ deno compile --unstable --output=cowsay npm:cowsay@1.5.0 $ ./cowsay hello Deno.serve() レスポンスの自動的な圧縮が実装されました。
現時点ではgzipのみがサポートされています。(Content-Encoding: gzip)
それ以外には、--watchオプションと併用した際の安定性の改善が実施されています。
Deno.Command Deno.ChildProcess#killが、システムの全実行可能ファイルに対する--allow-run権限を要求する問題が修正されました。
v1.33.2までは、例えば--allow-run=redis-cliのように特定のバイナリのみを許可している場合、Deno.ChildProcess#killで権限エラーが発生する問題があったため、このリリースで修正されています。
deno lsp documentPreloadLimitオプションが追加されました。
これにより、deno lspがプリロードするドキュメント数をカスタマイズできます。
vscode_denoでは、v3.18.0でdocumentPreloadLimitオプションのサポートが入っているようです。
その他 Deno.seekSyncとDeno.seekの型定義が統一されていなかった問題が修正されました。(#19060) node:module: Module.runMain()が実装されました。(ts-nodeで使用されているようです) リダイレクトするリモートモジュールへの依存があった場合、deno vendorの実行時にパニックする問題が修正されました。 Deno.UnsafeCallbackが使用されていると、deno testがハングすることのある問題が修正されました。 deno_std v0.187.0 deno_std v0.187.0がリリースされました。
std/regexpが追加 新しいモジュールとしてstd/regexpが追加されました。
現状では、正規表現のメタ文字をエスケープするための機能が提供されています。
import { escape } from &amp;#34;https://deno.</description></item><item><title>2023/01/09〜2023/01/15の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2023/01/15.html</link><pubDate>Sun, 15 Jan 2023 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2023/01/15.html</guid><description>Deno v1.29.3 Deno v1.29.3がリリースされました。
FFI 構造体の値渡しがサポートされています。
const Point = [&amp;#34;i32&amp;#34;, &amp;#34;i32&amp;#34;]; const dylib = Deno.dlopen(libpath, { make_point: { parameters: [&amp;#34;i32&amp;#34;, &amp;#34;i32&amp;#34;], result: { struct: Point }, }, print_point: { parameters: [{ struct: Point }], result: &amp;#34;void&amp;#34;, }, }); const point = dylib.symbols.make_point(1, 2); assert(point instanceof Uint8Array); dylib.symbols.print_point(point); https://github.com/denoland/deno/pull/15060
Node-API 以下のNode-APIがサポートされました。
napi_ref_threadsafe_function napi_unref_threadsafe_function napi_add_env_cleanup_hook napi_remove_env_cleanup_hook また、Node-API経由で定義したclassの静的プロパティが適切にハンドリングされるように修正されています。
CLI --reloadと--watchを併用した際に、ファイル変更のたびに--reloadによるモジュールの再ダウンロードが行われてしまう問題が修正されています deno installによって作成されるshimにデフォルトで--no-configが指定されるように修正されています その他 ReadableStreamのasyncIteratorの挙動に関する互換性が向上されています BroadcastChannel.</description></item><item><title>2021/04/11〜2022/04/17の最新情報</title><link>https://uki00a.github.io/deno-weekly/articles/2022/04/17.html</link><pubDate>Sun, 17 Apr 2022 00:00:00 +0000</pubDate><guid>https://uki00a.github.io/deno-weekly/articles/2022/04/17.html</guid><description>Deno v1.20.6 Deno v1.20.6がリリースされました。
deno fmtコマンドの内部実装で使用されているdprint関連のプラグインがアップデートされています。
その影響により、deno fmtコマンドのパフォーマンス向上やバグの修正が行われています。 (オブジェクトリテラルと3項演算子を併用した際に、フォーマット結果に一貫性がなくなる問題が修正されているようです)
https://github.com/denoland/deno/releases/tag/v1.20.6
deno_std v0.135.0 deno_std v0.135.0がリリースされました。
このリリースでは破壊的変更が実施されています。
io/readers: MultiReaderのシグネチャの変更 (破壊的変更) MultiReaderのコンストラクタの引数が可変長引数ではなくDeno.Readerの配列を受け取るように変更されています。
変更前:
const readers: Array&amp;lt;Deno.Reader&amp;gt; = [...]; new MultiReader(...readers); 変更後:
const readers: Array&amp;lt;Deno.Reader&amp;gt; = [...]; new MultiReader(readers); MultiReaderはstd/archive/tar.tsモジュールの内部で使われており、大量のファイルを持つtarファイルを作ろうとすると、maximum call stack exceededエラーが発生してしまう問題があったようです。
mime/multipartの非推奨化 (破壊的変更) mime/multipartモジュールが非推奨化されました。
今後はFormDataの使用が推奨されます。
testing/benchの非推奨化 (破壊的変更) testing/benchモジュールが非推奨化されました。
今後はDeno.benchの使用が推奨されます。
testing/bddの追加 testing/bddモジュールが追加されました。
JestやMochaライクなAPIを使用してテストコードを記述することができます。
import { assertEquals } from &amp;#34;https://deno.land/std@0.135.0/testing/asserts.ts&amp;#34;; import { describe, it } from &amp;#34;https://deno.land/std@0.135.0/testing/bdd.ts&amp;#34;; describe(&amp;#34;sum&amp;#34;, () =&amp;gt; { it(&amp;#34;should return sum of numbers&amp;#34;, () =&amp;gt; { assertEquals(sum(1, 2, 5), 8) }); it(&amp;#34;should return 0 when no arguments are given&amp;#34;, () =&amp;gt; { assertEquals(sum(), 0); }); }); 定義したテストコードはdeno testコマンドで実行することが出来ます。</description></item></channel></rss>