---
title: 2025/11/17〜2025/11/23の最新情報
tags:
  - Deno
  - deno_std
  - fresh
  - dax
categories:
  - news
date: 2025-11-23
description: >
  Denoの直近のアップデート (`--ignore-env`オプションが追加, `deno audit --socket` - `socket.dev`との統合, など), deno_stdのリリース (`@std/math`パッケージが追加, `@std/cache@0.2.1` - `LruCache`および`TtlCache`に`onEject`オプションが追加, など), @fresh/core@2.2.0 (レスポンスの生成を簡素化するためにHonoライクなヘルパーメソッドが追加), dax v0.44.0 (globによるファイルパスの展開がサポート, など)
---

## Denoの直近のアップデート

まだリリースは行われていませんが、直近でいくつか新機能がマージされているため紹介いたします。

### `--ignore-env`オプションが追加

Deno`--ignore-env`オプションが実装されています。

- [feat: add `--ignore-env=...` #31187](https://github.com/denoland/deno/pull/31187)

例えば以下のようなスクリプトがあったとします:

```javascript
// main.js
console.info(Deno.env.get("HOME"));
console.info(Deno.env.get("DENO_DIR"));
```

このスクリプトを`--ignore-env=HOME`を指定して実行すると、以下のように出力されます:

```shell
$ deno run --allow-env --ignore-env=HOME main.js
undefined
/home/uki00a/.cache/deno
```

`Deno.env.toObject()`を実行した場合、`--ignore-env`で指定された環境変数が返却結果から除外されます。

この機能は`deno.json`における[パーミッションセット (`--permission-set`)]({{< ref "articles/deno/v2.5.md" >}})においてもサポートされています。

```json
{
  "permissions": {
    "default": {
      "env": {
        "allow": true,
        "ignore": ["HOME"]
      }
    }
  }
}
```

### `deno audit --socket`

[`deno audit`]({{< ref "articles/2025/11/02.md" >}})コマンドに`--socket`オプションを追加するPRがマージされています:

- [feat(unstable): add socket.dev integration for `deno audit` #31106](https://github.com/denoland/deno/pull/31106)

このオプションを指定すると、`@socketsecurity/bun-security-scanner`でも使用されている[`firewall-api.socket.dev`](https://github.com/SocketDev/bun-security-scanner/blob/037562d18ed7460a95f91f7a4806ad627756437f/src/modes/unauthenticated.ts#L10)エンドポイントを使用してパッケージの検査が行われます。

```shell
$ deno audit --socket
No known vulnerabilities found

Socket.dev firewall report

╭ pkg:npm/ansi-escapes@4.3.2
│ Supply Chain Risk: 100
│ Maintenance: 86
│ Quality: 100
│ Vulnerabilities: 100
│ License: 100
╰

  ...
```

### `deno compile`でスクリプト引数の指定に`--`が必須化 (**破壊的変更**)

`deno compile`においてスクリプト引数 (`Deno.args`) の指定に`--`が必須化されました ([#31296](https://github.com/denoland/deno/pull/31296))

これは破壊的変更であり、[先週]({{< ref "articles/2025/11/16.md" >}})に紹介したグローバルのタイマーAPIに関するものと同様にDeno v3向けの変更であると思われます。

```shell
# 今までは以下のような指定が可能でした
$ deno compile main.ts arg1 arg2 -q


# 今後は以下のように指定する必要あり
$ deno compile main.ts -- arg1 arg2 -q
```

また、`deno install -g`コマンドにおいても同様の変更が実施されています ([#31292](https://github.com/denoland/deno/pull/31292))

## `deno_std`のリリース

`deno_std`のリリースが実施されています ([release-2025.11.17](https://github.com/denoland/std/releases/tag/release-2025.11.17))

### `@std/math`パッケージが追加

新規パッケージとして[@std/math](https://jsr.io/@std/math)が追加されました ([#6823](https://github.com/denoland/std/pull/6823))

現時点では[`Math.clamp`](https://github.com/tc39/proposal-math-clamp)をベースに実装された`clamp()`などのAPIが提供されています。

### `@std/cache@0.2.1`

[@std/cache@0.2.1](https://jsr.io/@std/cache@0.2.1)がリリースされています。

#### `@std/cache/{lru,ttl}-cache`

`LruCache`および`TtlCache`に`onEject`オプションが追加されています。キーが削除されたタイミングでこのオプションに指定した関数が呼ばれます ([#6857](https://github.com/denoland/std/pull/6857))

### `@std/cli@1.0.24`

[@std/cli@1.0.24](https://jsr.io/@std/cli@1.0.24)がリリースされています。

#### `@std/cli/unstable-progress-bar`

`ProgressBar`に`refreshMilliseconds`オプションが追加されています ([#6862](https://github.com/denoland/std/pull/6862))。プログレスバーの描画頻度をカスタマイズできます (デフォルト値は`1000`)

### `@std/fs@1.0.20`

[@std/fs@1.0.20](https://jsr.io/@std/fs@1.0.20)がリリースされています。

#### `@std/fs/expand-glob`

`expandGlob()`で`\[a\].txt`のようにエスケープされているケースが適切に取り扱われるように修正されています ([#6788](https://github.com/denoland/std/pull/6788))

また、`expandGlob()`で単一の要素のみを持つ`@(pattern-list)`の構文が適切に取り扱われない問題が修正されています ([#6850](https://github.com/denoland/std/pull/6850))

### `@std/path@1.1.3`

[@std/path@1.1.3](https://jsr.io/@std/path@1.1.3)がリリースされています。

#### `@std/path/is-glob`

`@std/fs/expand-glob`における改善と同様に、`isGlob()`で単一の要素のみを持つ`@(pattern-list)`の構文が適切に取り扱われない問題が修正されています ([#6850](https://github.com/denoland/std/pull/6850))

### `@std/http@1.0.22`

[@std/http@1.0.22](https://jsr.io/@std/http@1.0.22)がリリースされています。

#### `@std/http/unstable-file-server`

`serveFile()`に`headers`オプションが追加されています ([#6842](https://github.com/denoland/std/pull/6842))。レスポンスに設定されるヘッダーをカスタマイズできます。

## `@fresh/core@2.2.0`

[@fresh/core@2.2.0](https://github.com/denoland/fresh/releases/tag/2.2.0)がリリースされています。

`Context`オブジェクトにレスポンスの生成を容易にするために下記ヘルパーメソッドが追加されました。Hono に影響を受けているようです ([#3613](https://github.com/denoland/fresh/pull/3613))

- `html()`
- `json()`
- `text()`
- `stream()`

## dax v0.44.0

[dax v0.44.0](https://github.com/dsherret/dax/releases/tag/0.44.0)がリリースされています。

破壊的変更として、`KillSignalController`が`KillController`にリネームされています。

また、glob によるファイルパスの展開がサポートされています ([#338](https://github.com/dsherret/dax/pull/338))

```javascript
const exitCode = await $`deno fmt *.ts`.code();
```

それ以外にも、`!`演算子のサポート ([#341](https://github.com/dsherret/dax/pull/341)) や `&>`のサポート ([#340](https://github.com/dsherret/dax/pull/340)) も実施されています。
