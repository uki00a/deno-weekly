---
title: 2025/05/12〜2025/05/18の最新情報
tags:
  - Deno
categories:
  - news
date: 2025-05-18
description: >
  Deno v2.3.2 & v2.3.3
---

## Deno v2.3.2 & v2.3.3

[Deno v2.3.2](https://github.com/denoland/deno/releases/tag/v2.3.2)と[Deno v2.3.3](https://github.com/denoland/deno/releases/tag/v2.3.3)がリリースされています。

- https://github.com/denoland/deno/blob/395878c5fb72d87a44f7c88ce9f391acc31feab3/Releases.md#233--20250516

### `deno lint`

`deno lint`プラグインでコメントの取得がサポートされています ([#29189](https://github.com/denoland/deno/pull/29189))

`SourceCode`クラス (`RuleContext.sourceCode`からアクセス可能) に`getAllComments()`/`getCommentsBefore()`/`getCommentsAfter()`/`getCommentsInside()`メソッドが追加されています。

また、`Program`にも`comments`プロパティーが追加されています。

### `deno coverage`

`deno coverage --html`で生成されるHTMLレポートで、OS設定に基づいて`light`と`dark`テーマが切り替わるように改善されています ([#29267](https://github.com/denoland/deno/pull/29267))

### `deno jupyter`

`deno jupyter`コマンドで複数のカーネルをインストール・管理するための昨日が導入されています ([#29249](https://github.com/denoland/deno/pull/29249))

#### `--name`オプション

`deno jupyter`コマンドに`--name`オプションが追加されています。

`--install`オプションとともに`--name`オプションが指定されると、カーネルがインストールされる際のディレクトリ名を変更できます (デフォルトはLinuxだと`~/.local/share/jupyter/kernels/deno`で、`--name deno-canary`を指定すると`~/.local/share/jupyter/kernels/deno-canary`にインストールされます)

`--install`が省略された場合、`--name`オプションによって指定された名前で`kernel.json`がインストールされているか確認できます。

#### `deno jupyter --install --display <name>`

`deno jupyter --install`に`--display`オプションが追加されています。

このオプションを指定することで、`kernel.json`の`display_name`をカスタマイズできます (デフォルトは`Deno`)

#### `deno jupyter --install --force`

`deno jupyter --install`に`--force`オプションが追加されています。

このオプションを指定すると、カーネルがすでにインストール済みである際も強制的にカーネルを再インストールしてくれます。

### `deno check`

#### Ambient moduleに関する挙動の改善

Ambient moduleによって型が定義されたパスに対して発生する型エラーが無視されるよう挙動が変更されています ([#29135](https://github.com/denoland/deno/pull/29135))

例えば、Ambient moduleによって`*.svg`に対する型定義が定義されていたら、`*.svg`に対する`import`によって型エラーが起きぬように改善されています。

#### `deno.lock`

`deno.lock`を更新タイミングが型チェックの実行前から実行後へ変更されています ([#29265](https://github.com/denoland/deno/pull/29265))
型チェックの実行時にはじめて`@types/node`が必要となるケースがあるため挙動が変更されたようです。

また、`deno.lock`にすでに`@types/node`が書き込まれている場合、`@types/node@*`が書き込まれないよう改善されています ([#29270](https://github.com/denoland/deno/pull/29270))

### `deno fmt`

#### Tagged template内のHTML/CSS/SQLで構文エラーがあった際の挙動の改善

[Tagged template内のHTML/CSS/SQL]({{< ref "articles/deno/v2.3.md" >}})に構文エラーが存在した場合、エラーが発生するよう改善されています ([#29259](https://github.com/denoland/deno/pull/29259))

#### `fmt.useTabs`

`fmt.useTabs: true`が設定されている場合、`fmt.indentWidth`が無視されるよう修正されています ([#29205](https://github.com/denoland/deno/pull/29205))

### `deno lsp`

#### `deno/taskDefinitions`

`deno/taskDefinitions`で各タスクの`description`が返却されるよう改善されています ([#29244](https://github.com/denoland/deno/pull/29244))

#### 巨大なファイルの取り扱いの改善

巨大なファイルのフォーマットで時間がかかることがある問題への改善が実施されています ([#29162](https://github.com/denoland/deno/pull/29162))

また、巨大なJSONファイルが`import`されている際のメモリ使用量の改善が実施されています ([#29192](https://github.com/denoland/deno/pull/29192))
10MB以上のJSONファイルは`{}`型として取り扱うよう修正されているようです。

#### 診断の改善

`deno jupyter`におけるトップレベルの`for await`への警告が無効化されています ([#29114](https://github.com/denoland/deno/pull/29114))

また、型定義が見つからないnpmパッケージに対して`no-export-npm`が返されないよう修正されています ([#29180](https://github.com/denoland/deno/pull/29180))

#### Quickfix

`$node_modules`に対するQuickfixが表示されないよう改善されています ([#29194](https://github.com/denoland/deno/pull/29194))

### OpenTelemetry

#### `boot_failure`及び`uncaught_exception`イベントが追加

以下のイベントが新しく実装されています ([#29287](https://github.com/denoland/deno/pull/29287))

|イベント|送信タイミング|
|:---:|:---:|
|`boot_failure`|Denoの起動に失敗したとき|
|`uncaught_exception`|未捕捉の例外が検出されたとき|

#### `--env-file`のサポート

`OTEL_DENO`や`OTEL_EXPORTER_OTLP_PROTOCOL`などの各種OpenTelemetry関連の環境変数を`--env-file`オプション経由で指定できるよう改善されています ([#29240](https://github.com/denoland/deno/pull/29240))

#### `Worker`との併用

OpenTelemetryが有効化された状態で`Worker`を作成するとプロセスがパニックする問題が修正されています ([#29248](https://github.com/denoland/deno/pull/29248))

### `Deno.createHttpClient()` - UNIXソケットによるプロキシーのサポート

`Deno.createHttpClient`で`proxy.transport: "unix"`がサポートされています ([#29154](https://github.com/denoland/deno/pull/29154))

### `Deno.Command`のバグ修正

`Deno.Command`に`signal`オプションが指定され かつ サブプロセスがすぐに終了した場合、該当の`AbortSignal`が`abort`された際にエラーが発生することがある問題が修正されています ([#29193](https://github.com/denoland/deno/pull/29193))

### `createImageBitmap()`のバグ修正

`createImageBitmap()`に`Blob`が与えられた際に、`type`プロパティーの値を考慮しないよう修正されています ([#28741](https://github.com/denoland/deno/pull/28741))

### _precompiled JSX transform_ のバグ修正

_precompiled JSX transform_ (`compilerOptions.jsx: "precompile"`)が有効化された際に、`props.children`に与えられた文字列がエスケープされるよう改善されています ([#29200](https://github.com/denoland/deno/pull/29200))

```jsx
const thisStringShouldBeEscaped = "...";
<p>{thisStringShouldBeEscaped}</p>
```

---

- [fix(precompile): jsx child expression string literal not escaped (denoland/deno_ast#304)](https://github.com/denoland/deno_ast/pull/304)

### Node.js互換性の改善

#### `@types/node`

Denoにおいてデフォルトで使用される`@types/node`のバージョンが`22.11.0`から`22.15.14`へ更新されています ([#28407](https://github.com/denoland/deno/pull/28407))

#### `node:dns`

`lookup()`に`util.promisify()`を適用した状態で`all: true`オプションを設定して呼んだ際に、`TypeError`が発生する問題が修正されています ([#29167](https://github.com/denoland/deno/pull/29167))

#### `node:process`

`process.stdout.getColorDepth`が実装されています ([#29176](https://github.com/denoland/deno/pull/29176))
この改善により、[create-vue](https://github.com/vuejs/create-vue)が動作するようです。

また、`loadEnvFile()`が`named import`で読み込めるように改善されています ([#29237)](https://github.com/denoland/deno/pull/29237)

#### `node:http`

`ServerResponse.req`が実装されています ([#29211](https://github.com/denoland/deno/pull/29211))

また、`request()`で`socketPath`オプションがサポートされています ([#29182](https://github.com/denoland/deno/pull/29182))

#### `node:https`

`request()`及び`Agent`で`key`/`cert`/`ca`オプションがサポートされています ([#28937](https://github.com/denoland/deno/pull/28937))

#### `node:tls`

`Server#unref`がサポートされています ([#29279](https://github.com/denoland/deno/pull/29279))

`connect()`で`rejectUnauthorized`オプションがサポートされています ([#29245](https://github.com/denoland/deno/pull/29245))

また、`connect()`で`host`オプションのデフォルト値として`localhost`が使われるよう修正されています ([#29231](https://github.com/denoland/deno/pull/29231))

#### `node:test`

`TestContext`の`skip()`及び`todo()`メソッドが実装されています ([#29222](https://github.com/denoland/deno/pull/29222))

#### `node:assert`

`CallTracker`が実装されました ([#29226](https://github.com/denoland/deno/pull/29226))

#### `node:sqlite`

Windowsで`DatabaseSync#close`を読んでも適切にファイルが閉じられない事がある問題が修正されています ([#29210](https://github.com/denoland/deno/pull/29210))

#### `node:dgram`

以下のAPIが実装されています:

- `Socket#addMembership`/`dropMembership` ([#29207](https://github.com/denoland/deno/pull/29207))
- `Socket#setBroadcast` (#29195)
- `Socket#setMulticastLoopback` ([#29241](https://github.com/denoland/deno/pull/29241))
- `Socket#setMulticastTTL` ([#29232](https://github.com/denoland/deno/pull/29232))

今回の改善により、[multicast-dns](https://github.com/mafintosh/multicast-dns)が動作するようです。

#### `node:buffer`

`Buffer.compare()`に不正な入力が与えられた際に`TypeError`ではなく`ERR_INVALID_ARG_TYPE`が発生するよう改善されています ([#29275](https://github.com/denoland/deno/pull/29275))
