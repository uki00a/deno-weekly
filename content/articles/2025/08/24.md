---
title: 2025/08/18〜2025/08/24の最新情報
tags:
  - Deno
  - Deno Deploy
  - Deno KV
categories:
  - news
date: 2025-08-24
description: >
  Deno v2.4.5 (`deno lsp` - Pull Diagnostics が実装, `DENO_INSTALL_ARCH`環境変数が追加, `deno install`の出力が改善, `deno publish` - precompiled JSX transform のサポート, `Deno.chmod`のWindowsサポート, TCPソケットの`backlog`パラメーターの調整, など), Deno Deploy EA に関するアップデート (Deno KV のサポート, Exposing an environment variable as a file)
---

## Deno v2.4.5

[Deno v2.4.5](https://github.com/denoland/deno/releases/tag/v2.4.5)がリリースされています。

### `deno lsp`

#### Pull Diagnostics

`deno lsp`で[_Pull Diagnostics_](https://github.com/microsoft/language-server-protocol/blob/761db1819a068c0a3390c7f97ad38dc2455f8f43/_specifications/lsp/3.17/language/pullDiagnostics.md)が実装されています ([#30325](https://github.com/denoland/deno/pull/30325))

#### `workspace/willRenameFiles`の改善

`.js`から`.ts`へのリネームが適切に動作するよう改善されています ([#30458](https://github.com/denoland/deno/pull/30458))

### `deno install`

#### `DENO_INSTALL_ARCH`環境変数

`DENO_INSTALL_ARCH`環境変数がサポートされています ([#30473](https://github.com/denoland/deno/pull/30473))

`DENO_INSTALL_ARCH=aarch64`のように指定することで、`deno install`によってインストールされる際に取得されるnpmパッケージを変更できます。

#### 出力の改善

インストールされたパッケージ名が表示されるよう出力が改善されています ([#30387](https://github.com/denoland/deno/pull/30387))

```shell
❯ deno install
Packages: 9
+++++++++
Resolved: 9, reused: 0, downloaded: 9, added: 9

Dependencies:
+ jsr:@david/dax 0.41.0
+ jsr:@david/which 0.4.1
+ jsr:@std/assert 0.221.0
+ jsr:@std/bytes 0.221.0
+ jsr:@std/fmt 0.221.0
+ jsr:@std/fs 0.221.0
+ jsr:@std/io 0.221.0
+ jsr:@std/path 0.221.0
+ jsr:@std/streams 0.221.0
```

#### `--entrypoint`の改善

`deno.json`の`exclude`で除外されているモジュールが[`--entrypoint`]({{< ref "articles/2024/09/08.md" >}}) (`-e`) でエントリーポイントに指定された際に、ダウンロードが実行されない問題が修正されています ([#30442](https://github.com/denoland/deno/pull/30442))

### `deno bundle` - `.json`の取り扱いの改善

`deno bundle`においては`.json`ファイルを[Import Attributes](https://github.com/tc39/proposal-import-attributes)なしでも読み込めるようにする改善が実施されています ([#30413](https://github.com/denoland/deno/pull/30413))

### `deno outdated`/`deno update` - `latest`タグの取り扱いの改善

アプリケーションで指定されたバージョン要求を満たす場合は、`latest`タグが付与されたバージョンのnpmパッケージが使用されるように挙動が変更されています ([#30412](https://github.com/denoland/deno/pull/30412))

### `deno publish` - precompiled JSX transform のサポート

`deno publish`で`compilerOptions.jsx: precompile`がサポートされています ([#30466](https://github.com/denoland/deno/pull/30466))

[Deno v2.2.1]({{< ref "articles/2025/02/23.md" >}})で`deno publish`にJSXのサポートが追加されましたが、意図せず`@jsxRuntime classic`にフォールバックされてしまっており、うまく動作しなかったようです。

### `deno run`/`deno eval` - `--ext`でCommonJSがサポート

`--ext`オプションで`mts`, `mjs`, `cts`, `cjs`がサポートされています ([#30398](https://github.com/denoland/deno/pull/30398))

```shell
$ echo 'console.info(require("events").on)' | deno run --ext=cjs -R -
[Function: on]
```

### `node:tls`

`connect()`で`cert`と`key`オプションがサポートされています ([#30426](https://github.com/denoland/deno/pull/30426))

また、`connect()`に渡した`socket`においても`close`イベントが適切に発火されるよう修正されています ([#30451](https://github.com/denoland/deno/pull/30451))

### `node:os`

`getPriority()`及び`setPriority()`の互換性が改善されています。Windowsにおいて`setPriority()`が適切に動作するよう改善されています ([#30383](https://github.com/denoland/deno/pull/30383))

### `node:stream`

`promises`がすでに実装されていたものの、`export`されていなかった問題が修正されています ([#30427](https://github.com/denoland/deno/pull/30427))

### `node:fs`

`cp()`においてコピー元及びコピー先がともにディレクトリである際に、コピー先にコピー元と同名ディレクトリが作成される問題が修正されています ([#30408](https://github.com/denoland/deno/pull/30408))

### Deno API

#### `Deno.chmod`のWindowsサポート

`Deno.chmod`と`node:fs`の`chmod()`に対するWindowsのサポートが追加されました ([#30436](https://github.com/denoland/deno/pull/30436))

## パフォーマンス改善

### TCPソケットの`backlog`パラメーターの調整

`listen(2)`に渡す`backlog`パラメーターの値が`128`から`511`に変更されています ([#30471](https://github.com/denoland/deno/pull/30471))

## Deno Deploy EA に関するアップデート

### Deno KV のサポート

Deno Deploy EA においても Deno KV がサポートされたようです。Deno KV に関するドキュメントが追加されています ([deploy/early-access/reference/deno-kv.md](https://github.com/denoland/docs/blob/67af217cd3f40cbeda483aee339592b57e9c8d27/deploy/early-access/reference/deno-kv.md))

- [Feat: Deno KV #2468](https://github.com/denoland/docs/pull/2468)

### Exposing an environment variable as a file

環境変数の値を一時ファイルに格納する機能が追加されています ([_Exposing an environment variable as a file_](https://github.com/denoland/docs/blob/86de771ada6e82dcd8b2f3f30421bf32ac3c01d0/deploy/early-access/reference/env-vars-and-contexts.md#exposing-an-environment-variable-as-a-file))
 
- [EA: env vars as files #2395](https://github.com/denoland/docs/pull/2395)

この機能を有効化すると、各種環境変数には設定値を格納した一時ファイルへのパスが設定されるようです:

```javascript
const path = Deno.env.get("DB_URL");
const value = await Deno.readTextFile(path);
```
