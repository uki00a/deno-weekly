---
title: 2025/08/04〜2025/08/10の最新情報
tags:
  - Deno
  - fresh
categories:
  - news
date: 2025-08-10
description: >
  `deno.json`でのパーミッションセットの定義について
---

## `deno.json`でのパーミッションセットの定義について

まだDraft状態ですが、`deno.json`でのパーミッションセットの定義をサポートするPRが作成されています。

- [feat: permissions in the config file #30330](https://github.com/denoland/deno/pull/30330)

[以前に導入が検討されていた頃の仕様]({{< ref "articles/2024/12/29.md" >}})と比較して、以下のような変更点がありそうです (まだマージはされていないため、今後、仕様が変わる可能性があります):

1. `deno.json`においてパーミッションセットの一覧を定義するためのフィールド名が`permissionSets`から`permissions`に変わっています。
2. [`bench`/`compile`/`test`という名前のパーミッションセットは特別扱いされ、パーミッションセットが省略された状態で`-P`(`--permission-set`)オプションが指定された際に、それぞれ`deno bench`/`deno compile`/`deno test`の実行時に自動で適用されるようです ([cli/args/mod.rs#L1172-L1188](https://github.com/denoland/deno/blob/b6edc8bcbe447e59d7f33566d29827c7acdcc3bb/cli/args/mod.rs#L1172-L1188))。

```json
{
  "permissions": {
    "default": {
      "read": ["data"],
      "net": true
    },
    "tool": {
      "read": ["src"],
      "write": ["generated"]
    }
  }
}
```

`-P`または`--permission-set`によって定義されたパーミッションセットを適用できます:

```shell
# `default`パーミッションセットを適用
$ deno run -P main.ts

# `tool`パーミッションセットを適用
$ deno run --permission-set=tool tools/codegen.ts
```
