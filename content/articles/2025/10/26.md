---
title: 2025/10/20〜2025/10/26の最新情報
tags:
  - Deno
  - Deno Deploy
  - TypeScript
  - fresh
categories:
  - news
date: 2025-10-26
description: >
  Denoの直近のアップデート (typescript-goサポートがマージ, `deno.json`での`minimumDependencyAge`の指定と特定のパッケージの除外がサポート, `deno audit`コマンドがマージ, など), Deno Deployのアップデート (Databases - データベースマイグレーションのサポート), `dependencies`/`devDependencies`のサポートについて, freshのリリース (@fresh/init@2.2.1 - `@/`形式のパスエイリアスが設定されるよう改善, @fresh/core@2.1.3 - HEADの取り扱いの改善, など)
---

## Denoの直近のアップデート

### `typescript-go`のサポートがマージ (`--unstable-tsgo`)

[以前に紹介した]({{< ref "articles/2025/10/05.md" >}})、`deno check`コマンドで[typescript-go](https://github.com/microsoft/typescript-go)をサポートするPRがマージされています ([#30920](https://github.com/denoland/deno/pull/30920))。まだリリースはされていませんが、_canary_ バージョンで動作を試すことが可能です。

`deno check`を実行する際に`--unstable-tsgo`オプションを指定することで、まず[denoland/typescript-go](https://github.com/denoland/typescript-go)が`${DENO_DIR}/dl`へダウンロードされます。

その後、[`--api`](https://github.com/denoland/deno/blob/5cee3a317d1c9e64a7d6c09763921fe854ad086c/cli/tsc/go.rs#L108)オプションを指定して起動された`tsgo`とプロセス間で通信することによって型チェックが実行されているようです ([microsoft/typescript-go/cmd/tsgo/main.go#L19-L20](https://github.com/microsoft/typescript-go/blob/d461fade87bc8fe4386d69c8f9a145b850f08cc0/cmd/tsgo/main.go#L19-L20))

```shell
$ deno check --unstable-tsgo mod.ts
```

詳細は[denoland/deno/docs/tsgo.md](https://github.com/denoland/deno/blob/5cee3a317d1c9e64a7d6c09763921fe854ad086c/docs/tsgo.md)にて解説されています。

### `deno.json`での`minimumDependencyAge`のサポート

[先週に紹介した]({{< ref "articles/2025/10/19.md" >}})、`deno.json`での`minimumDependencyAge`のサポートがマージされています ([#31007](https://github.com/denoland/deno/pull/31007))

さらに、特定のパッケージを対象から除外できるよう、`minimumDependencyAge`においてオブジェクト形式での設定がサポートされています:

- [feat(unstable): ability to exclude packages from minimum dependency age constraint #31031](https://github.com/denoland/deno/pull/31031)

`minimumDependencyAge.age`フィールドに猶予期間、`minimumDependencyAge.exclude`フィールドに適用対象から除外したいパッケージを指定できます。

```json
{
  "minimumDependencyAge": {
    "age": "PT5H",
    "exclude": ["npm:preact"]
  }
}
```

### `deno audit`コマンド

[以前に紹介した]({{< ref "articles/2025/10/12.md" >}})、`deno audit`コマンドの実装がマージされています。

- [feat(unstable): add `deno audit` subcommand #30966](https://github.com/denoland/deno/pull/30966)

npmレジストリの [Full Audit エンドポイント](https://github.com/npm/npm-audit-report/blob/fbdb240694bd9a8d95e9386a157d471494a1426c/README.md#break-from-version-1) (`/-/npm/v1/security/audits`) を利用したパッケージの検査がサポートされています。

内部的には [`firewall-api.socket.dev`](https://github.com/denoland/deno/blob/5cee3a317d1c9e64a7d6c09763921fe854ad086c/cli/tools/pm/audit.rs#L560) を使用した検証の実装も含まれているようですが、現時点ではまだユーザーから利用するための手段は提供されていなさそうです。

### ecosystem_compat_test

内部的な変更ではありますが、日次で`npm`/ `yarn`/`pnpm`をDenoで実行し、互換性を検証する仕組みが導入されています:

- [ci: add workflow to run package managers under deno #31070](https://github.com/denoland/deno/pull/31070)
- [ci: adjustments to the ecosystem compat tests #31076](https://github.com/denoland/deno/pull/31076)

テスト用のリポジトリとしては[lucacasonato/nextjs-demo](https://github.com/lucacasonato/nextjs-demo)のリポジトリが使用されており、Next.jsやTailwind CSSのインストールが検証されています。

## Deno Deployのアップデート

### データベースマイグレーションのサポート

[Databases]({{< ref "articles/2025/07/27.md" >}})において、各ビルドの成功後に実行するマイグレーションコマンドの指定がサポートされています:

- [feat: database migrations #2672](https://github.com/denoland/docs/pull/2672)

上記PRでは[node-pg-migrate](https://github.com/salsita/node-pg-migrate)や`prisma migrate deploy`との連携例が追加されています。

## `dependencies`/`devDependencies`のサポートについて

**まだDraft状態でありマージされるかどうかはわかりませんが**、Denoへの`dependencies`/`devDependencies`サポートに関するPRが作成されています:

- [feat: prototype - dependencies and dev dependencies #31065](https://github.com/denoland/deno/pull/31065)

[1d2e6e7b524da176eca452496b59a817b48f9eab](https://github.com/denoland/deno/tree/1d2e6e7b524da176eca452496b59a817b48f9eab)時点においては、`deno.json`に`dependencies`/`devDependencies`フィールドが追加される想定のようです。`imports`フィールドとの違いとして、以下のようにバージョンレンジにおけるパッケージ名を省略できる想定のようです:

```json
{
  "dependencies": {
    "preact": "npm:^10",
    "@fresh/core": "jsr:^2"
  }
}
```

この機能が検討されている背景としては、以下のような点などが挙げられています:

- `deno audit`の導入に伴い、本番向けと開発向けのパッケージを区別できるようにしたい
- `deno compile`で実行可能ファイルを生成する際は、開発向けのパッケージは除外したい

まだ正式にこの機能が導入されるかどうかはわかりませんが、このPR内においては、Denoに`dependencies`/`devDependencies`のサポートを追加する代わりに、[Import maps 標準へ機能を追加すること (`conditions`フィールドの追加)](https://github.com/denoland/deno/pull/31065#issuecomment-3439804634)も提案されています。

## freshのリリース

freshのリリースが行われています ([2.1.3](https://github.com/denoland/fresh/releases/tag/2.1.3))

## `@fresh/init@2.2.1`

[@fresh/init@2.2.1](https://jsr.io/@fresh/init@2.2.1)がリリースされています。

プロジェクトのセットアップ時に`@/`のパスエイリアスが設定されるよう改善されています ([#3562](https://github.com/denoland/fresh/pull/3562))。今後、新しく生成されたプロジェクトでは以下のようなパスで各モジュールを参照できます。

```typescript
import { Button } from "@/components/Button.tsx";
import { define } from "@/utils.ts";
```

### `@fresh/core@2.1.3`

[@fresh/core@2.1.3](https://jsr.io/@fresh/core@2.1.3)がリリースされています。以下のバグ修正が実施されています。

- `App#fsRoutes()`の`pattern`引数が機能していなかった問題が修正されています ([#3571](https://github.com/denoland/fresh/pull/3571))
- 開発時に意図せぬファイルが返却されることを防止するため、開発環境では`staticFiles()`における`ETag`が無効化されています ([#3561](https://github.com/denoland/fresh/pull/3561))
- `HEAD`メソッドの取り扱いに関して、以下の修正が実施されています ([#3563](https://github.com/denoland/fresh/pull/3563))
  1. リクエストボディが返却されないようにする
  2. `HEAD`メソッド向けにハンドラーが登録されていない場合は代わりに`GET`メソッドのハンドラーを実行する

### `@fresh/plugin-vite@1.0.6`

[@fresh/plugin-vite@1.0.6](https://jsr.io/@fresh/plugin-vite@1.0.6)がリリースされています。

`routes`ディレクトリ中のテストファイルがデフォルトでバンドルされてしまわないよう修正されています ([#3559](https://github.com/denoland/fresh/pull/3559))
