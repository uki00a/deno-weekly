---
title: 2025/09/01〜2025/09/07の最新情報
tags:
  - Deno
  - fresh
categories:
  - news
date: 2025-09-07
description: >
  Deno v2.5 向けの機能の追加について
---

## Deno v2.5 向けの機能の追加について

### `deno.json`でのパーミッションセットの定義 

`deno.json`でパーミッションセットの定義をサポートする機能がマージされています ([#30330](https://github.com/denoland/deno/pull/30330)):

```json
{
  "permissions": {
    "default": {
      "net": true
    },
    "server": {
      "net": true,
      "read": ["data.txt"]
    }
  }
}
```

定義したパーミッションセットは`--permission-set`で適用することが可能です:

```shell
# (1) `permissions.default`を適用します
$ deno --permission-set main.js

# (2) `--permission-set`は`-P`の短縮形式です
$ deno -P main.js

# (3) `permissions.server`を適用します
$ deno --permission-set=server main.js
```

また、`deno bench`/`deno compile`/`deno test`の各コマンド向け専用のパーミッションセットを定義することも可能で、`deno.json`の対応するセクション配下の`permissions`で定義できるようです ([以前]({{< ref "articles/2025/08/10.md" >}})は`deno.json`の`permissions.{compile,bench,test}`を特別扱いする想定で実装されていました):

```json
{
  "test": {
    "permissions": {
      "read": ["data.txt"]
    }
  }
}
```

```shell
# `test.permissions`を適用します
$ deno test --permission-set main.js
```

### `Deno.test`への`before*`/`after*`フックのサポート

`Deno.test`への`before*`/`after*`フックをサポートするPRがマージされています ([#30504](https://github.com/denoland/deno/pull/30504))

例えば、`Deno.test.beforeEach()`と`Deno.test.afterEach()`を使うことで、該当のテストモジュール内における各テストケースの実行前後に特定の処理を実行することができます:

```javascript
Deno.test.beforeEach(() => cleanup());
Deno.test.afterEach(() => teardown());
Deno.test("doSomethingAsync", async () => {
  await doSomethingAsync();
});
```
