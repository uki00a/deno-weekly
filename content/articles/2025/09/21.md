---
title: 2025/09/15〜2025/09/21の最新情報
tags:
  - Deno
  - fresh
categories:
  - news
date: 2025-09-21
description: >
  Deno v2.5.1 (WebSocketでプロキシーの利用や`Host`ヘッダーのカスタマイズなどがサポート, macOSで`deno init --npm`が動作しなくなっていた問題が修正, `deno lsp` - `deno.cacheOnSave`で`deno.lock`を更新しないよう挙動が変更, など), Fresh v2.1
---

## Deno v2.5.1

[Deno v2.5.1](https://github.com/denoland/deno/releases/tag/v2.5.1)がリリースされています。

### Deno API

#### `Deno.HttpClient`

`WebSocket`で`client`オプション (`Deno.HttpClient`) がサポートされています ([#30692](https://github.com/denoland/deno/pull/30692))。 これにより、プロキシーの利用や`allowHost`オプションにより`Host`ヘッダーのカスタマイズや可能です。

この改善にあわせて`HTTP_PROXY`などのプロキシー関連の環境変数が`WebSocket`にも適用されるよう改善されています

また、`Deno.createHttpClient()`で`proxy.transport: "tcp"`がサポートされています ([#30700](https://github.com/denoland/deno/pull/30700))

#### `Deno.serve()`

`DENO_SERVE_ADDRESS`に[`duplicate,<address>`]({{< ref "articles/2025/05/18.md" >}})形式のアドレスが指定された際に、`signal`や`onError`オプションも引き継がれるよう改善されています ([#30680](https://github.com/denoland/deno/pull/30680))

#### `Deno.bundle()`

`--unstable-bundle`なしで[`Deno.bundle()`]({{< ref "articles/deno/v2.5.md" >}})を使用した際に`--unstable-bundle`の指定が促されるように改善されています ([#30682](https://github.com/denoland/deno/pull/30682))

### `deno init`

macOSで`deno init --npm`が動作しなくなっていた問題が修正されています ([#30730](https://github.com/denoland/deno/pull/30730))

### `deno lsp`

[`deno.cacheOnSave`](https://github.com/denoland/vscode_deno/blob/7e125c6ffcdcdebd587f97be5341d404f5335b87/package.json#L201)による依存関係のキャッシュ時は`deno.lock`を更新しないよう挙動が変更されています ([#30733](https://github.com/denoland/deno/pull/30733))

### `deno check`

SvelteKit における`$app/environment`など、_bare specifier_ 形式の _ambient module_ でエラーが発生せぬよう挙動が変更されています ([#30690](https://github.com/denoland/deno/pull/30690))

### `node:fs`

以下の改善が実施されています。

- Windowsで`fchmod()`がサポートされています ([#30704](https://github.com/denoland/deno/pull/30704))
- `glob()`の`cwd`引数で`URL`オブジェクトの指定がサポートされています ([#30705](https://github.com/denoland/deno/pull/30705))
- `callback`引数を指定せずに`close()`を呼ぶとエラーが発生する問題が修正されています ([#30720](https://github.com/denoland/deno/pull/30720))
- `readlink()`の`path`引数で`Buffer`の指定がサポートされています ([#30691](https://github.com/denoland/deno/pull/30691))

### `node:process`

`process.env`において空文字列などの _falsy_ な値を持つ環境変数が`Object.keys()`などで返却されない問題が修正されています ([#30708](https://github.com/denoland/deno/pull/30708))
