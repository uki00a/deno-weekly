---
title: 2025/09/15〜2025/09/21の最新情報
tags:
  - Deno
  - fresh
categories:
  - news
date: 2025-09-21
description: >
  Deno v2.5.1 (WebSocketでプロキシーの利用や`Host`ヘッダーのカスタマイズなどがサポート, macOSで`deno init --npm`が動作しなくなっていた問題が修正, `deno lsp` - `deno.cacheOnSave`で`deno.lock`を更新しないよう挙動が変更, など), Fresh v2.1 (CSPミドルウェアが追加, 複数ミドルウェアのサポート), Deno への`--minimum-dependency-age`オプションの追加について
---

## Deno v2.5.1

[Deno v2.5.1](https://github.com/denoland/deno/releases/tag/v2.5.1)がリリースされています。

### Deno API

#### `Deno.HttpClient`

`WebSocket`で`client`オプション (`Deno.HttpClient`) がサポートされています ([#30692](https://github.com/denoland/deno/pull/30692))。 これにより、プロキシーの利用や`allowHost`オプションにより`Host`ヘッダーのカスタマイズなどが可能です。この改善にあわせて`HTTP_PROXY`などのプロキシー関連の環境変数が`WebSocket`にも適用されるよう改善されています。

また、`Deno.createHttpClient()`で`proxy.transport: "tcp"`がサポートされています ([#30700](https://github.com/denoland/deno/pull/30700))

#### `Deno.serve()`

[`DENO_SERVE_ADDRESS`]({{< ref "articles/deno/v2.3.md" >}})に[`duplicate,<address>`]({{< ref "articles/2025/05/18.md" >}})形式のアドレスが指定された際に、`signal`や`onError`オプションも引き継がれるよう改善されています ([#30680](https://github.com/denoland/deno/pull/30680))

#### `Deno.bundle()`

`--unstable-bundle`なしで[`Deno.bundle()`]({{< ref "articles/deno/v2.5.md" >}})を使用した際に`--unstable-bundle`の指定が促されるように改善されています ([#30682](https://github.com/denoland/deno/pull/30682))

### `deno init`

macOSで`deno init --npm`が動作しなくなっていた問題が修正されています ([#30730](https://github.com/denoland/deno/pull/30730))

### `deno lsp`

[`deno.cacheOnSave`](https://github.com/denoland/vscode_deno/blob/7e125c6ffcdcdebd587f97be5341d404f5335b87/package.json#L201)による依存関係のキャッシュ時は`deno.lock`を更新しないよう挙動が変更されています ([#30733](https://github.com/denoland/deno/pull/30733))

### `deno check`

SvelteKit における`$app/environment`など、_bare specifier_ 形式の _ambient module_ でエラーが発生しないよう挙動が変更されています ([#30690](https://github.com/denoland/deno/pull/30690))

### `node:fs`

以下の改善が実施されています。

- Windowsで`fchmod()`がサポートされています ([#30704](https://github.com/denoland/deno/pull/30704))
- `glob()`の`cwd`引数で`URL`オブジェクトの指定がサポートされています ([#30705](https://github.com/denoland/deno/pull/30705))
- `callback`引数を指定せずに`close()`を呼ぶとエラーが発生する問題が修正されています ([#30720](https://github.com/denoland/deno/pull/30720))
- `readlink()`の`path`引数で`Buffer`の指定がサポートされています ([#30691](https://github.com/denoland/deno/pull/30691))

### `node:process`

`process.env`において空文字列などの _falsy_ な値を持つ環境変数が`Object.keys()`などで返却されない問題が修正されています ([#30708](https://github.com/denoland/deno/pull/30708))

## Fresh v2.1.0

[Fresh v2.1.0](https://github.com/denoland/fresh/releases/tag/2.1.0)のリリースが実施されています。

### `@fresh/core@2.1.0`

[`@fresh/core@2.1.0`](https://jsr.io/@fresh/core@2.1.0)がリリースされています。

#### CSPミドルウェア

[`csp()`](https://github.com/denoland/fresh/blob/de9b8a7c404948fa4eae9a73ec690fe92f7d012e/docs/latest/plugins/csp.md)ミドルウェアが追加されています ([#3421](https://github.com/denoland/fresh/pull/3421))

指定されたオプションに基づいて`Content-Security-Policy`ヘッダーを設定してくれます。

#### 複数ミドルウェアのサポート

Fresh v1 でサポートされていた`_middleware.ts`における複数のミドルウェアの指定 (`Array<Middleware>`) がサポートされています ([#3434](https://github.com/denoland/fresh/pull/3434))

### `@fresh/plugin-vite@1.0.3` - コンポーネントに関するバグ修正

[@fresh/plugin-vite@1.0.3](https://jsr.io/@fresh/plugin-vite@1.0.3)がリリースされています。

以下のバグが修正されています:

- _Route_ コンポーネントにおいてCSSファイルの`import`が動作しない問題が修正されています ([#3438](https://github.com/denoland/fresh/pull/3438))
- _Island_ コンポーネントがネストされていると、エラーが発生する問題が修正されています ([#3440](https://github.com/denoland/fresh/pull/3440))

## Deno への`--minimum-dependency-age`オプションの追加について

**⚠️ この機能はまだマージされていません。**

直近におけるnpmレジストリへの大規模なサプライチェーン攻撃の発生を受けて、Denoに[`--minimum-dependency-age`](https://github.com/denoland/deno/blob/dcf3f4f56e219374e9909fd637bd28031b9c08bb/cli/args/flags.rs#L4444)オプションを追加するPRが作成されています:

- [feat(unstable): ability to only install dependencies older than a certain date #30752](https://github.com/denoland/deno/pull/30752)

[pnpm v10.16.0](https://github.com/pnpm/pnpm/releases/tag/v10.16.0)で追加された`minimumReleaseAge`のように、あるパッケージの最新バージョンがインストールされるまでに必要な期間を分単位で指定することできるようです。

---

- [npm史上最大：自己伝播ワーム「Shai-Hulud」のサプライチェーン攻撃](https://zenn.dev/nix/articles/0a2910ec65b4a3)
