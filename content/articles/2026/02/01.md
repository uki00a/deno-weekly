---
title: 2026/01/19〜2026/01/25の最新情報
tags:
  - Deno
  - deno_std
  - jsr
categories:
  - news
date: 2026-02-01
description: >
  Deno v2.6.7 (`@jsr`スコープの取り扱いの変更, `Deno.cron()` - `DENO_UNSTABLE_CRON_SOCK`による外部サーバーへのタスク管理の移譲がサポート, `node:test` - 各種`mock.*`APIの実装, `node:sqlite` - `DatabaseSync`で未実装であった各種オプションのサポート, など)
---

## Deno v2.6.7

[Deno v2.6.7](https://github.com/denoland/deno/releases/tag/v2.6.7)がリリースされています。

### JSR - `@jsr`スコープの取り扱いの変更

`@jsr`スコープのnpmパッケージがJSRから取得されるよう挙動が変更されています ([#31925](https://github.com/denoland/deno/pull/31925))。具体的には、以下を実行すると[@uki00a/deno-json-lint](https://jsr.io/@uki00a/deno-json-lint)がインストールされます。

```shell
# `npm:@jsr/*` は registry.npmjs.org からダウンロードされます
$ deno install npm:@jsr/uki00a__deno-json-lint

$ cat deno.json | jq '.imports["@jsr/uki00a__deno-json-lint"]'
"npm:@jsr/uki00a__deno-json-lint@^0.4.0"
```

デフォルトでは[https://registry.npmjs.org](ttps://registry.npmjs.org/) からパッケージがダウンロードされますが、 `JSR_NPM_URL`環境変数または`.npmrc`によって設定変更が可能です。

### `Deno.cron()` - 外部サーバーへのタスク管理の移譲がサポート (`DENO_UNSTABLE_CRON_SOCK`)

`Deno.cron()`によるジョブ管理をソケットを介して外部サーバーへ移譲する機能が実装されています ([#31952](https://github.com/denoland/deno/pull/31952))

この機能は`DENO_UNSTABLE_CRON_SOCK`にソケットへのURLを指定することで有効化されます (例: `unix:/path/to/cron.sock`)。指定されたソケットとの間でJSON形式のメッセージを交換し合うことでジョブの管理が行われます。

1. Denoプロセスで`Deno.cron()`が呼ばれると、ソケットに対してタスクの登録用メッセージが送信されます (`{ "kind":"register", "crons": [{ "name": "<task-name>", "schedule": "<cron-expression>" }] }`)
2. サーバーはソケットに対してタスクの実行を指示するメッセージ (`{ "kind": "invoke" }`) を書き込むことで、そのメッセージを受信したDenoプロセスで指定されたタスクが実行されます。
3. Denoプロセスでタスクの実行が完了すると、ソケットに対して実行完了メッセージが書き込まれます (`{ "kind": "result", "name": "<task-name>", "success": true }`)

おそらく、主にDeno Deploy向けの機能であると推測されますが、上記メッセージを処理するサーバー実装を用意することで、独自のジョブ管理の仕組みが実装できそうです。

### Node.js互換性の改善

#### `node:test`

下記のモック関連APIが実装されています ([#31954](https://github.com/denoland/deno/pull/31954))

- `mock.fn()`
- `mock.getter()`
- `mock.method()`
- `mock.reset()`
- `mock.restoreAll()`
- `mock.setter()`

#### `node:sqlite`

`DatabaseSync`で下記オプションのサポートが追加されています ([#31919](https://github.com/denoland/deno/pull/31919))

- `readBigInts`
- `returnArrays`
- `allowBareNamedParameters`
- `allowUnknownNamedParameters`

#### `node:fs/promises`

`FileHandle#readv()`が実装されています ([#31943](https://github.com/denoland/deno/pull/31943))

#### `node:http`

[2.6.4]({{< ref "articles/2026/01/11.md" >}})で`keepAlive`オプションがサポートされましたが、その影響でECONNRESETが発生することがあった問題が修正されています ([#31932](https://github.com/denoland/deno/pull/31932))

#### `NODE_OPTIONS` - `--require`のサポート

`NODE_OPTIONS`で`--require`が指定された際に、そのファイルが読み込まれるよう改善されています ([#31949](https://github.com/denoland/deno/pull/31949))

#### `DOMException`

Node.jsとの互換性のため、`DOMException`の第2引数でオブジェクト形式の引数がサポートされています ([#31939](https://github.com/denoland/deno/pull/31939))

#### Inspector

`--inspect-publish-uid`オプションが実装されています ([#31927](https://github.com/denoland/deno/pull/31927))

Node.jsにも同名オプションがあるようで、VSCodeから使用されているようです。

### `Deno.serve()`

`Deno.HttpServer#shutdown()`が呼ばれた際に、まだリクエストが受信されていないコネクションもgracefulに停止されるよう改善されています ([#31959](https://github.com/denoland/deno/pull/31959))

また、[`DENO_SERVE_ADDRESS`]({{< ref "articles/deno/v2.3.md" >}})で指定されたアドレスが`Deno.serve()`の2回目移行の呼び出しにも適用されてしまう問題が修正されています ([#31935](https://github.com/denoland/deno/pull/31935))

### `Deno.UnixListener`

`Deno.UnixListener`が破棄される際に、ソケットファイルが自動で削除されるよう挙動が修正されています ([#31947](https://github.com/denoland/deno/pull/31947))。`--watch`との併用時にエラーが発生することを回避することなどが目的のようです。

### `Deno.open()`

`/dev/tty`を開く際は`--allow-all`ではなく`--allow-read`の指定のみで開けるよう修正されています ([#31105](https://github.com/denoland/deno/pull/31105))

### `Deno.resolveDns()`

大きなメッセージを取り扱えるよう、内部的にEDNS0が有効化されています ([#31951](https://github.com/denoland/deno/pull/31951))

### `deno x`

`--unstable-*`オプションがサポートされています ([#31942](https://github.com/denoland/deno/pull/31942))

### `deno lint`

`Deno.lint.Program.comments`が別のファイルのコメントを返してしまうことのある問題が修正されています ([#31956](https://github.com/denoland/deno/pull/31956))
