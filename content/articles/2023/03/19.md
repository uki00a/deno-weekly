---
title: 2023/03/13〜2023/03/19の最新情報
tags:
  - Deno
  - deno_std
categories:
  - news
date: 2023-03-19
---

## Deno v1.31.3

Deno v1.31.3がリリースされました。

### CLI/APIに関する改善

- `deno info`と`deno doc`コマンドで`--no-lock`/`--lock`オプションがサポートされました。(挙動は`deno run`コマンドなどと同様です)
- `deno.json`などで`compilerOptions.types`エントリが定義されていると、型エラーが起きる問題が修正されています。
- REPLで`globalThis.Deno`やその配下で定義されたプロパティを削除しようとすると、プロセスがパニックする問題が修正されています。
- `Deno.makeTempFile(Sync)`でファイルがすでに存在した際にリトライが行われるように挙動が改善されています。
- `Deno.serveHttp()`でレスポンスエラーが発生した際に、[nextRequest](https://deno.land/api@v1.31.3?s=Deno.HttpConn#method_nextRequest_0)から返される`Request`の`signal`がabortedに設定されるように修正されました。

### Node.js互換性に関する改善

- `package.json`が存在する または `--node-modules-dir`オプションが指定されたが、実行されたスクリプトではnpmパッケージが`import`されていない場合に、`node_modules`が作成されないように挙動が改善されました。
- `node_modules`のセットアップ中にプログレスバーが表示されるように挙動が改善されました。([#18136](https://github.com/denoland/deno/pull/18136))
- `node:crypto`: `createCipheriv()`が実装されました。 (`aes-128-cbc`のみサポート)
- `node:fs`: `writeFile()`で`encoding: "ascii"`オプションがサポートされました。

---

https://github.com/denoland/deno/releases/tag/v1.31.3

## deno_std v0.180.0

deno_std v0.180.0がリリースされました。

### `std/encoding`関連モジュールのディレクトリ構造の見直し (**破壊的変更**)

`std/encoding`で提供されていた`csv`/`front_matter`/`json`/`jsonc`/`toml`/`yaml`モジュールが、トップレベルのモジュールとして独立しました。

今後は、例えば、`csv`モジュールを利用したい場合は`std/csv/mod.ts`、`yaml`モジュールを利用したい場合は`std/yaml/mod.ts`から読み込む必要があります。

ディレクトリの移動に合わせて、以下の変更も実施されています。

- `csv`モジュールの細分化
  - `csv/stringify.ts`/`csv/parse.ts`/`csv/stream.ts`が追加されており、必要なAPIのみを個別に読み込むことができます。
- `json`モジュールの細分化
  - `json/json_parse_stream.ts`/`json/json_stringify_stream.ts`/`json/concatenated_json_parse_stream.ts`が追加されており、必要なAPIのみを個別に読み込むことができます。
- `toml`モジュールの細分化
  - `toml/parse.ts`/`toml/stringify.ts`が追加されており、必要なAPIのみを個別に読み込むことができます。

### `std/http/server_sent_event.ts`が追加

新規モジュールとして[std/http/server_sent_event.ts](https://deno.land/std@0.180.0/http/server_sent_event.ts)が追加されました。

元々、[Oak](https://github.com/oakserver/oak)で提供されていた[Server-Sent Eventsのユーティリティ](https://github.com/oakserver/oak/blob/v12.1.0/docs/sse.md)が`deno_std`にポートされているようです。

---

https://github.com/denoland/deno_std/releases/tag/0.180.0
