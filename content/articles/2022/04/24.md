---
title: 2021/04/18ã€œ2022/04/24ã®æœ€æ–°æƒ…å ±
tags:
  - Deno
  - deno_std
  - Netlify
  - Aleph.js
  - Ultra
categories:
  - news
date: 2022-04-24
---

## Deno v1.21

Deno v1.21ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚

å€‹åˆ¥ã«è¨˜äº‹ã‚’æ›¸ã„ãŸã®ã§ã€è©³ã—ãã¯ãã¡ã‚‰ã‚’å‚ç…§ã„ãŸã ã‘ã‚Œã°ã¨æ€ã„ã¾ã™ã€‚

- [Deno v1.21]({{< ref "/articles/deno/v1.21.md" >}})

## deno_std v0.136.0

deno_std v0.136.0ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚

### `testing/snapshot`

ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆãƒ†ã‚¹ãƒˆã‚’è¡Œã†ãŸã‚ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¿½åŠ ã•ã‚Œã¾ã—ãŸã€‚

ã“ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã§ã¯`assertSnapshot`ã¨ã„ã†é–¢æ•°ãŒå…¬é–‹ã•ã‚Œã¦ãŠã‚Šã€`__snapshots__`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã«ä¿å­˜ã•ã‚ŒãŸã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¨ç¬¬2å¼•æ•°ã§æŒ‡å®šã•ã‚ŒãŸå€¤ã‚’æ¯”è¼ƒã—ã€ãƒãƒƒãƒã—ãªã‹ã£ãŸå ´åˆã€ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã™ã€‚

ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’èª­ã¿è¾¼ã‚€å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€åˆ©ç”¨ã«ã¯`--allow-read`ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

```js
import { assertSnapshot } from "https://deno.land/std@0.136.0/testing/snapshot.ts"

Deno.test("doSomething", async (t) => {
  const result = doSomething();
  await assertSnapshot(t, result);
});
```

ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’æ›´æ–°ã—ãŸã„ã¨ãã¯ã€ãƒ†ã‚¹ãƒˆã‚’å®Ÿè¡Œã™ã‚‹éš›ã«`--update`ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ã“ã®å ´åˆã€ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã‚’æ›¸ãè¾¼ã‚€ãŸã‚ã«ã€è¿½åŠ ã§`--allow-write`ãŒå¿…è¦ã«ãªã‚Šã¾ã™ã€‚

```shell
# ã‚¹ãƒŠãƒƒãƒ—ã‚·ãƒ§ãƒƒãƒˆã¯__snapshots__ã«æ›¸ãè¾¼ã¾ã‚Œã¾ã™
$ deno test --allow-read --allow-write tests/some_test.js -- --update
```

### `testing/bdd`

`it`ã«æ¸¡ã™ãƒ†ã‚¹ãƒˆé–¢æ•°ãŒ`TestContext`ã‚’å—ã‘å–ã‚‹ã‚ˆã†ã«ä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

```jsx
import { describe, it } from "https://deno.land/std@0.136.0/testing/bdd.ts"

describe("sum", () => {
  it("should return sum of numbers", (t) => {
    assertEquals(sum(1, 2, 3), 6, t.name);
  });
});
```

### `http/server`

`serve()`ãªã©ã®APIã§`signal`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã—ãŸéš›ã«ã€`addEventListener`ã§ã¯ãªã`onabort`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã‚’ä½¿ç”¨ã—ã¦`"abort"`ã‚¤ãƒ™ãƒ³ãƒˆã®ãƒªã‚¹ãƒŠãŒç™»éŒ²ã•ã‚Œã¦ã„ãŸå•é¡ŒãŒä¿®æ­£ã•ã‚Œã¾ã—ãŸã€‚

---

https://github.com/denoland/deno_std/releases/tag/0.136.0

## Netlify Edge Functions

Netlify Edge Functionsã®public betaãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå…¬é–‹ã•ã‚Œã¾ã—ãŸã€‚

Netlifyã®Edgeãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ä¸Šã§JavaScriptã‚„TypeScripté–¢æ•°ã‚’å®Ÿè¡Œã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

ã¾ãŸã€Netlify Edge Functionsã¯Deno Deployã‚’ãƒ™ãƒ¼ã‚¹ã«å®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚
ãã®ãŸã‚ã€Deno Deployã§ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹APIã‚‚åˆ©ç”¨ã§ãã¾ã™ã€‚

ç¾åœ¨ã€[Remix](https://github.com/netlify/remix-edge-template)ã‚„[Astro](https://astro.build/blog/netlify-edge-functions/), [Nuxt3](https://docs.netlify.com/integrations/frameworks/nuxt/#edge-functions)ãªã©æ§˜ã€…ãªãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã§Netlify Edge Functionsã®ã‚µãƒãƒ¼ãƒˆãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™

---

- https://deno.com/blog/netlify-edge-functions-on-deno-deploy
- https://www.netlify.com/blog/announcing-serverless-compute-with-edge-functions

## Aleph.js v1 alpha

Aleph.jsã®v1 alphaãƒãƒ¼ã‚¸ãƒ§ãƒ³ãŒå…¬é–‹ã•ã‚Œã¾ã—ãŸã€‚

- [Deno Deployã‚µãƒãƒ¼ãƒˆ](https://github.com/alephjs/alephjs.org/pull/58)
- Remixã®`loader`/`action`ãƒ©ã‚¤ã‚¯ãªAPI
- Reactä»¥å¤–ã®ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯ã®ã‚µãƒãƒ¼ãƒˆ (Vue.js)
- UnoCSSã®çµ„ã¿è¾¼ã¿ã‚µãƒãƒ¼ãƒˆ
- `ts`/`jsx`/`tsx`ã®ã‚ªãƒ³ãƒ‡ãƒãƒ³ãƒ‰ã§ã®å¤‰æ›

ãªã©ã€æ§˜ã€…ãªæ©Ÿèƒ½ã®è¿½åŠ ãªã©ãŒæƒ³å®šã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

---

https://github.com/alephjs/aleph.js/releases/tag/1.0.0-alpha.1

## Ultra v1

Ultraã®v1ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚

MDXã¨ã®çµ±åˆã‚„[@swc/wasm-web](https://swc.rs/docs/usage/wasm)ã¸ã®ç§»è¡Œãªã©ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚

ã¾ãŸã€ã“ã®ãƒªãƒªãƒ¼ã‚¹ã«åˆã‚ã›ã¦[æ–°ã—ã„Webã‚µã‚¤ãƒˆ](https://ultrajs.dev/)ã‚‚å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

https://github.com/exhibitionist-digital/ultra/releases/tag/v1.0.0

## Stripe API

[stripe-node](https://github.com/stripe/stripe-node)ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ãŒDenoã§ã‚‚å‹•ä½œã™ã‚‹ã‚ˆã†ã«ãªã£ãŸã‚ˆã†ã§ã™ã€‚

https://github.com/stripe/stripe-node/issues/997#issuecomment-1104276450

---

ã“ã®æƒ…å ±ã¯[aiotterã•ã‚“](aiotter_tech)ã«æä¾›ã„ãŸã ãã¾ã—ãŸğŸ™

- https://twitter.com/aiotter_tech/status/1517335820633444352

## Deno cheat sheet

ä¸‹è¨˜ã‚µã‚¤ãƒˆã§Denoã®ãƒãƒ¼ãƒˆã‚·ãƒ¼ãƒˆãŒå…¬é–‹ã•ã‚Œã¦ã„ã¾ã™ã€‚

- https://oscarotero.com/deno/

Denoã®å„ã‚³ãƒãƒ³ãƒ‰ã‚„APIã®ä½¿ç”¨æ–¹æ³•ãªã©ã«ã¤ã„ã¦è§£èª¬ã•ã‚Œã¦ã„ã¾ã™ã€‚

