---
title: 2024/07/22〜2024/07/28の最新情報
tags:
  - Deno
  - deno_std
categories:
  - news
date: 2024-07-28
description: Deno v1.45.3
---

## Deno v1.45.3

[Deno v1.45.3](https://github.com/denoland/deno/releases/tag/v1.45.3)がリリースされています。

### Node.js互換性の改善

#### npm workspaces

[npm workspace]({{< ref "articles/deno/v1.45.md" >}})内の複数のメンバー間で特定のパッケージのバージョンがコンフリクトした際に、それぞれのメンバー配下に`node_modules`が作られるように挙動が改善されています。(例: `./workspace-a`と`./workspace-b`がそれそれ`@foo/bar`パッケージのv1とv2に依存している場合、`./workspace-a/node_modules`と`./workspace-b/node_modules`が作られるようです)

また、BYONMが有効化されていない場合でも、npm workspace内の他のパッケージをbare specifierによって読めるように改善されたようです (https://github.com/denoland/deno/issues/24605)

#### `--allow-scripts`

`deno.json`で`nodeModulesDir: true`が未設定の場合であっても、コマンドラインで`--node-modules-dir`が指定されていれば[`--allow-scripts`]({{< ref "articles/deno/v1.45.md" >}})が動作するように改善されています。

#### `node:fs`

`exists(Sync)`のパフォーマンスが最適化されています ([#24613](https://github.com/denoland/deno/pull/24613))

また、Windowsで`Stats.mode`に適切な値が設定されるように改善されています ([chokidar](https://github.com/paulmillr/chokidar)がWindowsで動かない問題があったようです)

#### `node:http`

`request()`で`Buffer`の`subarray`をボディに指定すると、データが欠損してしまう問題が修正されています。

#### `node:tty`

`WriteStream`で`hasColors()`と`getColorDepth()`メソッドが実装されています。

### `deno publish`

`deno publish`コマンドに`LICENSE`ファイルが含まれていない場合に警告を表示する機能が追加されています。

---

- [cli/tools/registry/mod.rs#L1201-L1208](https://github.com/denoland/deno/blob/v1.45.3/cli/tools/registry/mod.rs#L1201-L1208)

### `deno lsp`

`deno lsp`で[npm workspaces]({{< ref "articles/deno/v1.45.md" >}})がサポートされています。

また、依存関係のキャッシュに失敗するとLSPがフリーズする問題が修正されています。

### `deno compile`

`deno compile`で生成されたバイナリーでNode-APIがサポートされました。

### その他

`console.log`などで`Error`の`cause`プロパティの内容がフォーマットして出力されるように改善されています。

また、`lib.deno_web.d.ts`の`lib.dom.d.ts`や`lib.webworker.d.ts`との互換性が改善されています。
