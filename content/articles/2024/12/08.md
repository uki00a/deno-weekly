---
title: 2024/12/02ã€œ2024/12/08ã®æœ€æ–°æƒ…å ±
tags:
  - Deno
  - deno_std
  - deno_lint
  - Next.js
  - OpenTelemetry
categories:
  - news
date: 2024-12-08
description: >
  Deno v2.1.3 (deno taskã§--recursiveã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã™ã‚‹ã‚ˆã†ã«, deno taskã«ãŠã‘ã‚‹å­ãƒ—ãƒ­ã‚»ã‚¹ã®å–ã‚Šæ‰±ã„ã®æ”¹å–„, deno fmtã§scriptã‚’æŒã¤HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å®‰å®šæ€§ãŒæ”¹å–„, OpenTelemetry - metricsã®exportãŒã‚µãƒãƒ¼ãƒˆ, npm workspaceã«ãŠã‘ã‚‹workspace:~åŠã³workspace:^ãŒã‚µãƒãƒ¼ãƒˆ, Temporal.Duration#toLocaleStringã§ãƒ­ã‚±ãƒ¼ãƒ«ãŒè€ƒæ…®ã•ã‚Œã‚‹ã‚ˆã†æ”¹å–„), @std/http@1.0.12 (@std/http/unstable-route - ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®infoå¼•æ•°ã¨paramså¼•æ•°ã®é †ç•ªãŒå¤‰æ›´), deno lintã«ãŠã‘ã‚‹JavaScriptãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚µãƒãƒ¼ãƒˆã«ã¤ã„ã¦, Run your Next.js SSR app on Deno Deploy
---

## Deno v2.1.3

[Deno v2.1.3](https://github.com/denoland/deno/releases/tag/v2.1.3)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `deno task`

#### `--recursive`ã‚ªãƒ—ã‚·ãƒ§ãƒ³

[v2.1.0]({{< ref "articles/deno/v2.1.md" >}})ã§è¿½åŠ ã•ã‚ŒãŸ`--recursive`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒå‹•ä½œã—ã¦ã„ãªã‹ã£ãŸå•é¡ŒãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ (`--filter *`ã‚’æŒ‡å®šã—ãŸå ´åˆã¨åŒæ§˜ã«å‹•ä½œã—ã¾ã™)

```shell
# ãƒ¯ãƒ¼ã‚¯ã‚¹ãƒšãƒ¼ã‚¹å†…ã®å„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã§å®šç¾©ã•ã‚ŒãŸtestã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã—ã¾ã™
$ deno task --recursive test
```

---

- [fix(task): `--recursive` option not working #27183](https://github.com/denoland/deno/pull/27183)

#### (Unixç’°å¢ƒå‘ã‘) å­ãƒ—ãƒ­ã‚»ã‚¹ã¸ã®ã‚·ã‚°ãƒŠãƒ«ã®è»¢é€ãŒã‚µãƒãƒ¼ãƒˆ

Unixç’°å¢ƒã«ãŠã„ã¦ã€`deno task`ã®ãƒ—ãƒ­ã‚»ã‚¹å‘ã‘ã«é€ä¿¡ã•ã‚ŒãŸã‚·ã‚°ãƒŠãƒ«ãŒã‚¿ã‚¹ã‚¯ã§èµ·å‹•ã•ã‚ŒãŸå­ãƒ—ãƒ­ã‚»ã‚¹ã¸è»¢é€ã•ã‚Œã‚‹ã‚ˆã†æŒ™å‹•ãŒæ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix(task): forward signals to spawned sub-processes on unix #27141](https://github.com/denoland/deno/pull/27141)

#### (Windowså‘ã‘) å­ãƒ—ãƒ­ã‚»ã‚¹ã®è‡ªå‹•åœæ­¢

Windowsã«ãŠã„ã¦`deno task`ã®ãƒ—ãƒ­ã‚»ã‚¹ã‚’åœæ­¢ã•ã›ãŸéš›ã«ã€`deno task`ã«ã‚ˆã£ã¦èµ·å‹•ã•ã‚ŒãŸå­ãƒ—ãƒ­ã‚»ã‚¹ã‚‚åœæ­¢ã•ã‚Œã‚‹ã‚ˆã†æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix(task): kill descendants when killing task process on Windows #27163](https://github.com/denoland/deno/pull/27163)

#### ã‚¿ã‚¹ã‚¯ã®ä¾å­˜é–¢ä¿‚ãŒå®šç¾©ã•ã‚Œã¦ã„ã‚‹éš›ã®å¼•æ•°ã®å–ã‚Šæ‰±ã„ã®å¤‰æ›´

`deno task`ã«è¿½åŠ ã®å¼•æ•°ãŒæ¸¡ã•ã‚ŒãŸå ´åˆã€ãã®å¼•æ•°ãŒãƒ«ãƒ¼ãƒˆã®ã‚¿ã‚¹ã‚¯ã«ã®ã¿æ¸¡ã•ã‚Œã‚‹ã‚ˆã†ä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ ([dependencies]({{< ref "articles/deno/v2.1.md" >}})ã§æŒ‡å®šã•ã‚ŒãŸå­ã‚¿ã‚¹ã‚¯ã«ã¯æ¸¡ã•ã‚Œã¾ã›ã‚“)

```shell
# ä¾‹) a b cã¯buildã‚¿ã‚¹ã‚¯ã«ã®ã¿æ¸¡ã•ã‚Œã€dependenciesã§æŒ‡å®šã•ã‚ŒãŸå­ã‚¿ã‚¹ã‚¯ã«ã¯æ¸¡ã•ã‚Œã¾ã›ã‚“
$ deno task build a b c
```

---

- [fix(task): only pass args to root task #27213](https://github.com/denoland/deno/pull/27213)

### `deno fmt`

#### HTMLãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®å®‰å®šæ€§ãŒæ”¹å–„

`<script>`ã‚¿ã‚°ã‚’æŒã¤HTMLãƒ•ã‚¡ã‚¤ãƒ«ã«å¯¾ã™ã‚‹`deno fmt`ã®å®‰å®šæ€§ãŒæ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix(fmt): stable formatting of HTML files with JS #27164](https://github.com/denoland/deno/pull/27164)


### `deno install`

#### `exports`ã§è¤‡æ•°ã®ã‚¨ãƒ³ãƒˆãƒªãƒ¼ãƒã‚¤ãƒ³ãƒˆãŒå®šç¾©ã•ã‚ŒãŸjsrãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«é–¢ã™ã‚‹ä¿®æ­£

ã‚ã‚‹jsrãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®`exports`ã‚’ç¢ºèªã™ã‚‹éš›ã«ã€`deno.lock`ã§æŒ‡å®šã•ã‚ŒãŸãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¨ã¯ç•°ãªã‚‹ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®`deno.json`ã§å®£è¨€ã•ã‚ŒãŸ`exports`ãŒå‚ç…§ã•ã‚Œã¦ã—ã¾ã†ã“ã¨ãŒã‚ã‚‹å•é¡ŒãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix(install): use locked version of jsr package when fetching exports #27237](https://github.com/denoland/deno/pull/27237)

### `deno outdated`

#### `--update`ãŒæŒ‡å®šã•ã‚Œã¦ã„ãªã„å ´åˆã§ã‚‚`--latest`ãŒåˆ©ç”¨ã§ãã‚‹ã‚ˆã†ã«

[`deno outdated`]({{< ref "articles/deno/v2.1.md" >}})ã®`--latest`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒ`--update`ãªã—ã ã¨æŒ‡å®šã§ããªã„å•é¡ŒãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix(outdated): allow `--latest` without `--update` #27227](https://github.com/denoland/deno/pull/27227)

### OpenTelemetry

#### metricsã®export

[`Deno.telemetry.MetricExporter`](https://github.com/denoland/deno/blob/v2.1.3/ext/telemetry/telemetry.ts#L925)ãŒè¿½åŠ ã•ã‚Œã€metricsã®exportãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [feat(unstable): add metrics to otel #27143](https://github.com/denoland/deno/pull/27143)

### Node.jsäº’æ›æ€§ã®æ”¹å–„

#### `workspace:~`/`workspace:^`ã®ã‚µãƒãƒ¼ãƒˆ

[npm workspaces]({{< ref "articles/deno/v1.45.md" >}})ã«ãŠã„ã¦ã€ãƒãƒ¼ã‚¸ãƒ§ãƒ³åˆ¶ç´„ã¨ã—ã¦`workspace:~`ã¨`workspace:^`ã®æŒ‡å®šãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix: support `workspace:^` and `workspace:~` version constraints #27096](https://github.com/denoland/deno/pull/27096)


#### `node:fs`

`readdir()`ã®`recursive`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix(node/fs): support `recursive` option in readdir #27179](https://github.com/denoland/deno/pull/27179)

#### `node:worker_threads`

`eval`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãŒæŒ‡å®šã•ã‚ŒãŸéš›ã«æ„å›³ã›ãšSyntaxErrorãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‚‹å•é¡ŒãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix(node/worker_threads): data url not encoded properly with eval #27184](https://github.com/denoland/deno/pull/27184)

### Temporal API

#### `Temporal.Duration#toLocaleString`ã§ãƒ­ã‚±ãƒ¼ãƒ«ãŒè€ƒæ…®ã•ã‚Œã‚‹ã‚ˆã†ã«æ”¹å–„

å†…éƒ¨çš„ã«`Intl.DurationFormat#format`ã‚’ä½¿ã£ã¦ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã•ã‚Œã‚‹ã‚ˆã†æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix(unstable/temporal): respect locale in `Duration.prototype.toLocaleString` #27000](https://github.com/denoland/deno/pull/27000)

### ãã®ä»–

#### dynamic importãŒå¤šç”¨ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰ã«ãŠã‘ã‚‹OOMã¸ã®å¯¾ç­–

dynamic importãŒå¤šç”¨ã•ã‚Œã¦ã„ã‚‹å ´åˆã€åˆå›ã®å®Ÿè¡Œæ™‚ã«OOMãŒç™ºç”Ÿã™ã‚‹ã“ã¨ãŒã‚ã‚‹å•é¡Œã¸ã®å¯¾ç­–ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix: clear dep analysis when module loading is done #27204](https://github.com/denoland/deno/pull/27204)

## `deno_std`ã®ãƒªãƒªãƒ¼ã‚¹

`deno_std`ã®ãƒªãƒªãƒ¼ã‚¹ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™ ([release-2024.12.06](https://github.com/denoland/std/releases/tag/release-2024.12.06))

### `@std/http@1.0.12`

[@std/http@1.0.12](https://jsr.io/@std/http@1.0.12)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### `@std/http/unstable-route`

ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®`info`å¼•æ•°ã¨`params`å¼•æ•°ã®é †ç•ªãŒå…¥ã‚Œæ›¿ã‚ã£ã¦ã„ã¾ã™ (`params`å¼•æ•°ãŒç¬¬2å¼•æ•°ã¸å¤‰æ›´)

`info`å¼•æ•°ã‚ˆã‚Šã‚‚`params`å¼•æ•°ã®æ–¹ãŒä½¿ç”¨é »åº¦ãŒé«˜ã„ã¨è€ƒãˆã‚‰ã‚Œã‚‹ãŸã‚ã€ã“ã®å¤‰æ›´ãŒå®Ÿæ–½ã•ã‚Œã¾ã—ãŸã€‚

#### `@std/http/file-server`

ãƒ•ã‚¡ã‚¤ãƒ«ã‚µãƒ¼ãƒãƒ¼ãŒHEADãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é©åˆ‡ã«å‡¦ç†ã™ã‚‹ã‚ˆã†æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/dotenv@0.225.3`

[@std/dotenv@0.225.3](https://jsr.io/@std/dotenv@0.225.3)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### Windowsã‚µãƒãƒ¼ãƒˆã®æ”¹å–„

`\r\n`ãŒå«ã¾ã‚ŒãŸå€¤ãŒé©åˆ‡ã«è§£æã•ã‚Œã¦ã„ãªã‹ã£ãŸå•é¡ŒãŒè§£æ¶ˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/expect@1.0.9`

[@std/expect@1.0.9](https://jsr.io/@std/expect@1.0.9)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### `expect().toMatchObject()`ã®ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ä¿®æ­£

`expect().toMatchObject()`ã§ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãŸéš›ã«`expect().not.toMatchObject()`ã¨åŒã˜ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¡¨ç¤ºã•ã‚Œã¦ã—ã¾ã†å•é¡ŒãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/testing@1.0.6`

[@std/testing@1.0.6](https://jsr.io/@std/testing@1.0.6)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### `@std/testing/bdd`

`test.only()`/`test.ignore()`/`test.skip()`ãŒå®Ÿè£…ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/text@1.0.9`

[@std/text@1.0.9](https://jsr.io/@std/text@1.0.9)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

`toCamelCase()`ãªã©ã®å„ç¨®APIã®å†…éƒ¨ã§ã€`String#toLocaleLowerCase`ãªã©ã®ãƒ­ã‚±ãƒ¼ãƒ«ä¾å­˜ã®APIã‚’ä½¿ç”¨ã—ãªã„ã‚ˆã†ä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

## `deno_lint` - JavaScriptãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã®ã‚µãƒãƒ¼ãƒˆã«ã¤ã„ã¦

**âš ï¸ ã¾ã æ­£å¼ã«å°å…¥ã•ã‚Œã‚‹ã‹ã©ã†ã‹ã¯ã‚ã‹ã‚‰ãªã„ãŸã‚ã”æ³¨æ„ãã ã•ã„ğŸ™**

Denoã®ãƒªãƒã‚¸ãƒˆãƒªã§`deno lint`å‘ã‘ã«JavaScriptãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹PRãŒä½œæˆã•ã‚Œã¦ã„ã¾ã™:

- [feat(lint): add JavaScript plugin support (denoland/deno#27203)](https://github.com/denoland/deno/pull/27203)
- [feat: Add LintOptionsConfig.plugins (denoland/deno_config#145)](https://github.com/denoland/deno_config/pull/145)

ç¾æ™‚ç‚¹([`54f002f`](https://github.com/denoland/deno/tree/54f002fc2a8bae02fdb7685c181b2bedc5853fb6))ã§ã¯ã€`--plugins`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ ã‚‚ã—ãã¯ `deno.json`ã®`lint.plugins`ã§ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ãƒ‘ã‚¹ã‚’æŒ‡å®šã—ã¦åˆ©ç”¨ã™ã‚‹æƒ³å®šã®ã‚ˆã†ã§ã™ã€‚

ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‹ã‚‰ã¯`name`åŠã³`rules`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ¼ã‚’æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’`default export`ã«ã‚ˆã£ã¦æä¾›ã™ã‚‹ã“ã¨ã§ã€ã‚«ã‚¹ã‚¿ãƒ ã®ãƒªãƒ³ãƒˆãƒ«ãƒ¼ãƒ«ãªã©ã‚’æä¾›ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹æƒ³å®šã®ã‚ˆã†ã§ã™ã€‚

## Run your Next.js SSR app on Deno Deploy

[@deno/nextjs-start]({{< ref "articles/2024/10/27.md" >}})ã‚’ä½¿ã£ã¦ã€Deno Deployã§Next.jsã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’å‹•ä½œã•ã›ã‚‹è¨˜äº‹ãŒDenoã®å…¬å¼ãƒ–ãƒ­ã‚°ã§å…¬é–‹ã•ã‚Œã¦ã„ã¾ã™:

- [Run your Next.js SSR app on Deno Deploy](https://deno.com/blog/nextjs-on-deno-deploy)
