---
title: 2024/08/26ã€œ2024/09/01ã®æœ€æ–°æƒ…å ±
tags:
  - Deno
  - deno_std
categories:
  - news
date: 2024-09-01
description: Deno v2.0.0-rc.0 (DENO_FUTURE=1ã®æŒ™å‹•ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆåŒ–), Deno v1.46.2 (fetchã®bodyã§ã®AsyncIterableã‚µãƒãƒ¼ãƒˆãŒrevert, Node.jsäº’æ›æ€§ã®æ”¹å–„ãªã©), @std/encoding@1.0.3 (@doctor/encoding-streamãŒå–ã‚Šè¾¼ã¾ã‚Œã¦ã„ã¾ã™), @std/http@1.0.4/route (HTTPãƒ¡ã‚½ãƒƒãƒ‰ã«ã‚ˆã‚‹ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒã‚µãƒãƒ¼ãƒˆ), @std/assert@1.0.3 (assertNeverãŒè¿½åŠ )
---

## Deno v2.0.0-rc.0

[Deno v2.0.0-rc.0](https://github.com/denoland/deno/commit/b9da6d0d0098cd1fba2aba152cd4499e8baef14b)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

### ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã¤ã„ã¦

ä»Šå›ã€GitHub Releaseã¯ä½œæˆã•ã‚Œã¦ã„ãªã„ã‚ˆã†ãªã®ã§ã€`deno upgrade`ã«ã‚ˆã£ã¦ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚RCãƒãƒ¼ã‚¸ãƒ§ãƒ³ã¸ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã¯[Deno v1.46]({{< ref "articles/deno/v1.46.md" >}})ã§ã‚µãƒãƒ¼ãƒˆãŒå…¥ã£ã¦ã„ã‚‹ãŸã‚ã€ãã‚Œä»¥å‰ã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã‚’ãŠä½¿ã„ã®å ´åˆã¯ã€ä¸€åº¦ã€`v1.46`ã‚’çµŒç”±ã—ã¦ã‹ã‚‰ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã™ã‚‹å¿…è¦ãŒã‚ã‚Šãã†ã§ã™ã€‚

```shell
$ deno upgrade 2.0.0-rc.0
```

ã‚‚ã—ç¾åœ¨ã®Denoã®å®Ÿè¡Œå¯èƒ½ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä¸Šæ›¸ãã—ãŸããªã„å ´åˆã¯ã€`--output`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’ä½¿ãˆã°å›é¿ã§ãã¾ã™:

```shell
# `./deno-2.0.0-rc.0`ã«ä¿å­˜ã—ã¾ã™
$ deno upgrade --output deno-2.0.0-rc.0 2.0.0-rc.0
```

### ç›´è¿‘ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆã«ã¤ã„ã¦

[ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°](https://github.com/denoland/deno/compare/0fb8df6c0ce582c947a8e165c7fb31cd4ec0c3ca...b9da6d0d0098cd1fba2aba152cd4499e8baef14b)ã‚’å‚è€ƒã«ã€`v2.0.0-rc.0`ã«å…¥ã£ã¦ã„ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šãã†ãªå†…å®¹ã«ã¤ã„ã¦ç´¹ä»‹ã—ã¾ã™

âš ï¸ã“ã“ã§æ›¸ã„ã¦ã„ã‚‹å†…å®¹ã«ã¯æ¨æ¸¬ã‚‚å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚ã‚‚ã—æ©Ÿèƒ½ãŒå…¥ã£ã¦ã„ãªãã†ã§ã—ãŸã‚‰ã€ã™ã¿ã¾ã›ã‚“ğŸ™

### `DENO_FUTURE=1`è¨­å®šæ™‚ã®æŒ¯ã‚‹èˆã„ã®ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆåŒ–

[`DENO_FUTURE=1`]({{< ref "articles/2024/02/18.md" >}})ã‚’è¨­å®šã—ãŸéš›ã®æŒ¯ã‚‹èˆã„ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆåŒ–ã•ã‚ŒãŸã‚ˆã†ã§ã™ã€‚

> [BREAKING: `DENO_FUTURE=1` by default, or welcome to Deno 2.0 (#25213)](https://github.com/denoland/deno/pull/25213)

å…·ä½“çš„ã«ã¯ã€ä»¥ä¸‹ã®ã‚ˆã†ãªå¤‰æ›´ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é©ç”¨ã•ã‚Œã¾ã™:

- `Deno.*`é…ä¸‹ã®éæ¨å¥¨APIãŒå‰Šé™¤ã•ã‚Œã¾ã™
- [`window`å¤‰æ•°ãŒå‰Šé™¤]({{< ref "articles/deno/v1.40.md" >}})ã•ã‚Œã¾ã™
- FFIã‚„WebGPU APIãªã©ãŒ`--unstable-*`ãªã—ã§ã‚‚æœ‰åŠ¹åŒ–ã•ã‚Œã¾ã™
- [Import AssertionãŒç„¡åŠ¹åŒ–]({{< ref "articles/deno/v1.46.md" >}})ã•ã‚Œã¾ã™
- `package.json`ãŒã‚ã‚Œã°[BYONM]({{< ref "articles/deno/v1.38.md" >}})ãŒãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ‰åŠ¹åŒ–ã•ã‚Œã¾ã™

#### `--node-modules`ã‚ªãƒ—ã‚·ãƒ§ãƒ³

Deno v2 å‘ã‘ã«`--node-modules`ã¨ã„ã†ãƒ•ãƒ©ã‚°ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

âš ï¸ä¸Šè¨˜ã®ã‚³ãƒŸãƒƒãƒˆãƒ­ã‚°å†…ã«å«ã¾ã‚Œã¦ã„ã‚‹ãŸã‚ç´¹ä»‹ã—ã¾ã™ãŒã€è©¦ã—ãŸã¨ã“ã‚ã†ã¾ãå‹•ã„ã¦ã„ãªã„ã‚ˆã†ã«ã‚‚è¦‹ãˆã‚‹ã®ã§ã€ã‚‚ã—ã‹ã—ãŸã‚‰ã“ã®å¤‰æ›´ã¯ã¾ã `v2.0.0-rc.0`ã«ã¯å…¥ã£ã¦ã„ãªã„å¯èƒ½æ€§ã‚‚ã‚ã‚‹ã‹ã‚‚ã—ã‚Œã¾ã›ã‚“ğŸ™

- [feat(config): Node modules option for 2.0 (#25299)](https://github.com/denoland/deno/pull/25299)

ä»¥ä¸‹ã®3ç¨®é¡ã®ãƒ¢ãƒ¼ãƒ‰ãŒæŒ‡å®šã§ãã‚‹ã‚ˆã†ã§ã™:

|ãƒ¢ãƒ¼ãƒ‰|èª¬æ˜|å‚™è€ƒ|
|:---:|:---:|:---:|
|`local-auto`|ãŠãã‚‰ãã€DenoãŒ`node_modules/`ã‚’ä½œæˆã—ã¦ãã‚Œã‚‹ãƒ¢ãƒ¼ãƒ‰||
|`local-manual`|ãŠãã‚‰ãã€[BYONM]({{< ref "articles/deno/v1.38.md" >}})ãŒæœ‰åŠ¹åŒ–ã•ã‚Œã¾ã™|v2ã§ã¯`package.json`ãŒã‚ã‚Œã°è‡ªå‹•ã§BYONMãŒæœ‰åŠ¹åŒ–ã•ã‚Œã‚‹ã¯ãšãªã®ã§ã€ã“ã®ãƒ¢ãƒ¼ãƒ‰ã‚’æŒ‡å®šã™ã‚‹å ´é¢ã¯ãŠãã‚‰ãå¤šãã¯ãªã•ãã†ã«æ€ã‚ã‚Œã¾ã™|
|`global-auto`|ãŠãã‚‰ãã€DenoãŒ`node_modules/`ã‚’ä½œæˆã›ãšã«ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã«ã®ã¿npmãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä¿å­˜ã™ã‚‹ãƒ¢ãƒ¼ãƒ‰||

ã“ã®ãƒ¢ãƒ¼ãƒ‰ã¯`--node-modules`ã ã‘ã§ãªãã€`deno.json`ã®`nodeModules`ã§è¨­å®šã™ã‚‹ã“ã¨ã‚‚å¯èƒ½ãªã‚ˆã†ã§ã™ã€‚

ã“ã®å¤‰æ›´ã«ä¼´ã„ã€`--node-modules-dir`(`nodeModulesDir`)ã¯å‰Šé™¤ã•ã‚Œã‚‹äºˆå®šã®ã‚ˆã†ã§ã™ã€‚

---

- https://github.com/denoland/deno_config/releases/tag/0.31.0

## Deno v1.46.2

[Deno v1.46.2](https://github.com/denoland/deno/releases/tag/v1.46.2)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

### v1.46.0ã§ã®`fetch()`ã®æ”¹å–„ã«ã¤ã„ã¦

[Deno v1.46.0]({{< ref "articles/deno/v1.46.md" >}})ã§å°å…¥ã•ã‚ŒãŸ`fetch()`ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£ã§ã®`AsyncIterable<Uint8Array>`ã®ã‚µãƒãƒ¼ãƒˆãŒrevertã•ã‚Œã¦ã„ã¾ã™ã€‚

æ„å›³ã›ã¬ãƒªã‚°ãƒ¬ãƒƒã‚·ãƒ§ãƒ³ãŒåˆ¤æ˜ã—ãŸã“ã¨ãŒèƒŒæ™¯ã®ã‚ˆã†ã§ã™:

- [Responding with boxed strings breaks HTTP server (#25203)](https://github.com/denoland/deno/issues/25203)

ã“ã®å¯¾å¿œã«ã¤ã„ã¦ã¯ã€ä»•æ§˜ã‚’æ”¹ã‚ã¦æ¤œè¨ã—ã¦ã‹ã‚‰å†å°å…¥ã™ã‚‹ã“ã¨ãŒè€ƒãˆã‚‰ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ ([Add `async iterable<T>` type to WebIDL (whatwg/webidl#1397)](https://github.com/whatwg/webidl/pull/1397#issuecomment-2309798759))

### `node:worker_threads`

`Worker`ã§`online`ã‚¤ãƒ™ãƒ³ãƒˆãŒé©åˆ‡ãªã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ç™ºç«ã•ã‚Œãªã„å•é¡ŒãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

[Parcelã®ã‚µãƒãƒ¼ãƒˆ](https://github.com/denoland/deno/issues/20613)ã«å‘ã‘ãŸå¯¾å¿œã®ã‚ˆã†ã§ã™ã€‚

### `node:async_hooks`

[async context](https://github.com/nodejs/node/blob/v22.7.0/doc/api/async_context.md)ã®ãƒˆãƒ©ãƒƒã‚­ãƒ³ã‚°ãŒæ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

---

- [fix: reland async context ([#25140)](https://github.com/denoland/deno/pull/25140)

### `node:crypto`

JWKã®ã‚µãƒãƒ¼ãƒˆã«é–¢ã—ã¦æ§˜ã€…ãªæ”¹å–„ãŒè¡Œã‚ã‚Œã¦ã„ã¾ã™:

- `createPublicKey`ã§ä½œã£ãŸå…¬é–‹éµã®JWKå½¢å¼ã§ã®`export`ãŒã‚µãƒãƒ¼ãƒˆ
- `createPublicKey`ã§JWKå½¢å¼ã®ECå…¬é–‹éµã®å–ã‚Šè¾¼ã¿ãŒã‚µãƒãƒ¼ãƒˆ
- `createPublicKey`ã¨`createPrivateKey`ã§[`"kty": "OKP"`](https://www.rfc-editor.org/rfc/rfc8037.html#section-2)å½¢å¼ã®JWKéµãŒã‚µãƒãƒ¼ãƒˆ
- `createPublicKey`ã§`"kty": "RSA"`å½¢å¼ã®JWKéµãŒã‚µãƒãƒ¼ãƒˆ

### `node:cluster`

[log4js](https://github.com/log4js-node/log4js-node)ã‚’å‹•ã‹ã™ãŸã‚ã€`node:cluster`ã®APIãŒæ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `deno run <task>`

[`deno run`ã‚³ãƒãƒ³ãƒ‰ã§`deno.json`ã®`tasks`ã§å®šç¾©ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œ]({{< ref "articles/deno/v1.46.md" >}})ã™ã‚‹éš›ã«ã€åå‰ã«`:`ã‚’å«ã‚€ã‚¿ã‚¹ã‚¯ãŒå®Ÿè¡Œã§ããªã„å•é¡ŒãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `deno install`

Deno v2ã«å‘ã‘ã¦ã€[BYONM]({{< ref "articles/deno/v1.38.md" >}})ãŒæœ‰åŠ¹åŒ–ã•ã‚Œ ã‹ã¤ `node_modules/`ãŒãªã„å ´åˆã«ã€`npm install`ã§ã¯ãªã`deno install`ã®å®Ÿè¡ŒãŒææ¡ˆã•ã‚Œã‚‹ã‚ˆã†ã«ä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

```shell
error: Could not resolve "picocolors", but found it in a package.json. Deno expects the node_modules/ directory to be up to date. Did you forget to run `deno install`?
```

## `deno_std`ã®ãƒªãƒªãƒ¼ã‚¹

[deno_stdãŒãƒªãƒªãƒ¼ã‚¹](https://github.com/denoland/std/releases/tag/release-2024.08.26)ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/encoding@1.0.3`

[@std/encoding@1.0.3](https://jsr.io/@std/encoding@1.0.3)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™

[@doctor/encoding-stream](https://github.com/BlackAsLight/encoding-stream)ãŒ`@std/encoding`ã«å–ã‚Šè¾¼ã¾ã‚Œã¾ã—ãŸã€‚

ä»¥ä¸‹ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™:

- `@std/encoding/base32-stream`
  - `Base32EncoderStream`
  - `Base32DecoderStream`
- `@std/encoding/base32hex-stream`
  - `Base32HexEncoderStream`
  - `Base32HexDecoderStream`
- `@std/encoding/base64-stream`
  - `Base64EncoderStream`
  - `Base64DecoderStream`
- `@std/encoding/base64url-stream`
  - `Base64UrlEncoderStream`
  - `Base64UrlDecoderStream`
- `@std/encoding/hex-stream`
  - `HexEncoderStream`
  - `HexDecoderStream`

### `@std/http@1.0.4`

[@std/http@1.0.4](https://jsr.io/@std/http@1.0.4)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚

[`@std/http/route`]({{< ref "articles/2024/08/11.md" >}})ã§`method`ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã«æŒ‡å®šã•ã‚ŒãŸHTTPãƒ¡ã‚½ãƒƒãƒ‰ãŒãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®éš›ã«è€ƒæ…®ã•ã‚Œã¦ã„ãªã‹ã£ãŸå•é¡ŒãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/assert@1.0.3`

[@std/assert@1.0.3](https://jsr.io/@std/assert@1.0.3)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

æ–°ã—ã„APIã¨ã—ã¦`assertNever`(`@std/assert/never`)ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚æŒ‡å®šã•ã‚ŒãŸå€¤ãŒ`never`å‹ã§ã‚ã‚‹ã‹ã©ã†ã‹ã‚’ãƒã‚§ãƒƒã‚¯ã—ã¦ãã‚Œã¾ã™ã€‚

### `@std/path@1.0.3`

[@std/path@1.0.3](https://jsr.io/@std/path@1.0.3)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

`extname`(`@std/path/extname`)ã¨`dirname`(`@std/path/dirname`)ã®å¼•æ•°ã¨ã—ã¦`URL`ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/testing@1.0.1`

[@std/testing@1.0.1](https://jsr.io/@std/testing@1.0.1)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

`@std/testing/types`ã®`IsExact`å‹ã§ã€æ„å›³ã›ãšã—ã¦å‹ãƒã‚§ãƒƒã‚¯ãŒé€šã£ã¦ã—ã¾ã†ã¾ãŸã¯å¤±æ•—ã—ã¦ã—ã¾ã†ã‚±ãƒ¼ã‚¹ãŒã‚ã‚‹å•é¡ŒãŒä¿®æ­£ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/front-matter@1.0.3`

[@std/front-matter@1.0.3](https://jsr.io/@std/front-matter@1.0.3)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

**`@std/front-matter/yaml`**:

`extract()`ã®å¼•æ•°ã¨ã—ã¦`ParseOptions`(`@std/yaml/parse`)ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«æ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/cache@0.1.1`

[@std/cache@0.1.1](https://jsr.io/@std/cache@0.1.1)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

æ–°è¦APIã¨ã—ã¦`TtlCache`(`@std/cache/ttl-cache`)ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/csv@1.0.2`

[@std/csv@1.0.2](https://jsr.io/@std/csv@1.0.2)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

`stringify()`ã«`readonly`ãªé…åˆ—ã‚’æ¸¡ã›ã‚‹ã‚ˆã†ã«å‹å®šç¾©ãŒæ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/dotenv@0.225.1`

[@std/dotenv@0.225.1](https://jsr.io/@std/dotenv@0.225.1)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

ä¸æ­£ãªå½¢å¼ã®ã‚­ãƒ¼ãŒ`.env`ã«å­˜åœ¨ã—ãŸå ´åˆã€è­¦å‘ŠãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‚ˆã†æŒ™å‹•ãŒæ”¹å–„ã•ã‚Œã¦ã„ã¾ã™ã€‚
