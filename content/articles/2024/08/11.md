---
title: 2024/08/05ã€œ2024/08/11ã®æœ€æ–°æƒ…å ±
tags:
  - Deno
  - deno_std
categories:
  - news
date: 2024-08-11
description: Denoã®ç›´è¿‘ã®å¤‰æ›´ã«ã¤ã„ã¦ (CLIå¼•æ•°ã®ç°¡ç•¥åŒ–, deno fmtã§ã®CSSã‚„YAMLã®ã‚µãƒãƒ¼ãƒˆ, deno cleanã‚³ãƒãƒ³ãƒ‰), @std/csv@1.0.0ãŒãƒªãƒªãƒ¼ã‚¹, @std/http@1.0.1ãŒãƒªãƒªãƒ¼ã‚¹ (URLPatternãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®è¿½åŠ ãªã©)
---

## Denoã®ç›´è¿‘ã®å¤‰æ›´ã«ã¤ã„ã¦

ä»Šé€±ã¯Denoæœ¬ä½“ã®ãƒªãƒªãƒ¼ã‚¹ã¯è¡Œã‚ã‚Œã¦ã„ãªã„ã§ã™ãŒã€ãŠãã‚‰ãæ¬¡ã®Deno v1.46ã§ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ã¨æ€ã‚ã‚Œã‚‹æ©Ÿèƒ½ãŒã„ãã¤ã‹ãƒãƒ¼ã‚¸ã•ã‚Œã¦ã„ãŸãŸã‚ã€ä¸»è¦ãªã‚‚ã®ã«ã¤ã„ã¦ç´¹ä»‹ã„ãŸã—ã¾ã™ã€‚

**âš ï¸æ­£å¼ã«Deno v1.46ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹éš›ã«ã¯ã€ä»•æ§˜ãªã©ã«å¤‰æ›´ãŒå…¥ã‚‹å¯èƒ½æ€§ã‚‚ã‚ã‚Šã¾ã™ğŸ™**

### CLIå¼•æ•°ã®ç°¡ç•¥åŒ–

#### ãƒ‘ãƒ¼ãƒŸãƒƒã‚·ãƒ§ãƒ³å¼•æ•°ã®ç°¡ç•¥åŒ–

ä¾‹ãˆã°ã€`--allow-read`ã¯`-R`, `--allow-env`ã¯`-E`ã®ã‚ˆã†ã«çŸ­ç¸®ã•ã‚ŒãŸå½¢å¼ã§æŒ‡å®šã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```shell
# ä¾‹) ä»¥ä¸‹ã¯`deno --allow-read --allow-env main.ts`ã¨åŒç­‰ã§ã™
$ deno -ER main.ts
```

---

- [feat: support short flags for permissions (denoland/deno#24883)](https://github.com/denoland/deno/pull/24883)

#### `run`ã®çœç•¥ (`deno <script>`ã®ã‚µãƒãƒ¼ãƒˆ)

`deno run`ã‚³ãƒãƒ³ãƒ‰ã«ãŠã‘ã‚‹`run`ã‚’çœç•¥ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹å¤‰æ›´ãŒå°å…¥ã•ã‚Œã¦ã„ã¾ã™ã€‚

```shell
$ deno main.ts 
```

---

- [feat: treat bare deno command with run arguments as deno run (denoland/deno#24887)](https://github.com/denoland/deno/pull/24887)

#### `deno run`ã§ã‚¿ã‚¹ã‚¯ã®å®Ÿè¡ŒãŒã‚µãƒãƒ¼ãƒˆ (`deno run <task>`)

`deno run`ã‚³ãƒãƒ³ãƒ‰ã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆã¨ã—ã¦æŒ‡å®šã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã€`deno.json`ã®`tasks`ã§å®šç¾©ã•ã‚ŒãŸã‚¿ã‚¹ã‚¯ã‚’å®Ÿè¡Œã™ã‚‹ã‚ˆã†ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã™ã‚‹æ©Ÿèƒ½ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚`deno run <entrypoint>`ã®ã‚ˆã†ã«å®Ÿè¡Œã•ã‚ŒãŸéš›ã«ã€`<entrypoint>`ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã—ãªã„å ´åˆã¯`deno task <entrypoint>`ã¨ã—ã¦æŒ¯ã‚‹èˆã†ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚

```shell
# `deno.json`ã®`tasks.hello`ãŒå®Ÿè¡Œã•ã‚Œã¾ã™
$ deno run hello
```

---

- [feat: deno run <task> (denoland/deno#24891)](https://github.com/denoland/deno/pull/24891)

### `deno fmt`ã§ã®CSSã‚„YAMLã®ã‚µãƒãƒ¼ãƒˆ

`deno fmt`ã‚³ãƒãƒ³ãƒ‰ã«CSS/SCSS/Sass/Less/YAMLãªã©ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã®ã‚µãƒãƒ¼ãƒˆãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

- [feat(fmt): support CSS, SCSS, Sass and Less (denoland/deno#24870)](https://github.com/denoland/deno/pull/24870)
- [feat(fmt): support YAML (denoland/deno#24717)](https://github.com/denoland/deno/pull/24717)

ã“ã‚Œã‚‰ã®ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã‚’æœ‰åŠ¹åŒ–ã™ã‚‹ãŸã‚ã«ã¯ã€ä»¥ä¸‹ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æŒ‡å®šã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã‚ˆã†ã§ã™ã€‚

- `deno fmt`ã‚³ãƒãƒ³ãƒ‰ã«`--unstable-css`ã¾ãŸã¯`--unstable-yaml`ã‚’æŒ‡å®šã™ã‚‹
- `deno.json`ã®[`"unstable"`]({{< ref "articles/deno/v1.38.md" >}})ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§`"fmt-css"`ã¾ãŸã¯`"fmt-yaml"`ã‚’æŒ‡å®šã™ã‚‹

### `deno clean`ã‚³ãƒãƒ³ãƒ‰

`deno clean`ã‚³ãƒãƒ³ãƒ‰ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚ç¾çŠ¶ã§ã¯`DENO_DIR`ã‚’å‰Šé™¤ã™ã‚‹æ©Ÿèƒ½ã®ã¿ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ãŒã€ä»Šå¾Œã€ã‚ˆã‚Šç´°ã‹ãæŒ¯ã‚‹èˆã„ã‚’åˆ¶å¾¡ã§ãã‚‹ã‚ˆã†ã«ã™ã‚‹ã“ã¨ãªã©ã‚‚æƒ³å®šã•ã‚Œã¦ã„ã‚‹ã‚ˆã†ã§ã™ã€‚

- [Feature request: deno clean (denoland/deno#3437)](https://github.com/denoland/deno/issues/3437)

---

- [feat: deno clean (denoland/deno#24950)](https://github.com/denoland/deno/pull/24950)

## `deno_std`ã®ãƒªãƒªãƒ¼ã‚¹

`deno_std`ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

- [release-2024.08.07](https://github.com/denoland/std/releases/tag/release-2024.08.07)
- [release-2024.08.05](https://github.com/denoland/std/releases/tag/release-2024.08.05)

### `@std/csv@1.0.0`

[@std/csv@1.0.0](https://jsr.io/@std/csv@1.0.0)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¾ã—ãŸã€‚

### `@std/http@1.0.1`

[@std/http@1.0.1](https://jsr.io/@std/http@1.0.1)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### `@std/http/route` - `URLPattern`ãƒ™ãƒ¼ã‚¹ã®ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«

`URLPattern`ã‚’æ´»ç”¨ã—ã¦ç°¡æ˜“çš„ãªãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã‚’å®Ÿè£…ã™ã‚‹ãŸã‚ã®å®Ÿé¨“çš„ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

`route()`ã‚’å‘¼ã¶ã¨[`Deno.ServeHandler`](https://github.com/denoland/deno/blob/v1.45.5/cli/tsc/dts/lib.deno.ns.d.ts#L6254-L6257)å‹ã®é–¢æ•°ã‚’è¿”å´ã—ã¦ãã‚Œã‚‹ãŸã‚ã€[`deno serve`]({{< ref "articles/deno/v1.43.md" >}})ã‚„`Deno.serve`ãªã©ã¨ä½µç”¨ã™ã‚‹ã“ã¨ãŒã§ãã¾ã™ã€‚

```typescript
import { type Route, route } from "jsr:@std/http@1.0.1/route";

const routes: Array<Route> = [
  {
    pattern: new URLPattern({ pathname: "/messages/:id" }),
    handler: (
      _req,
      _info,
      params,
    ) => new Response(`Message ${params?.pathname.groups.id}`),
  },
  {
    pattern: new URLPattern({ pathname: "/authenticate" }),
    method: "POST",
    handler: () => new Response("OK"),
  },
];
const handler = route(routes);

export default {
  fetch(req: Request): Response {
    return handler(req);
  },
};
```

ä½™è«‡ã§ã™ãŒã€[`Deno.ServeDefaultExport`](https://github.com/denoland/deno/pull/24879)ã¨ã„ã†å‹ãŒç›´è¿‘ã§Denoã®æœ¬ä½“ã«è¿½åŠ ã•ã‚Œã¦ã„ã‚‹ãŸã‚ã€`deno serve`ã‚’ä½¿ç”¨ã™ã‚‹éš›ã®å‹ã®å®šç¾©ãŒè¡Œã„ã‚„ã™ããªã‚Šãã†ã§ã™ã€‚(ãŠãã‚‰ãDeno v1.46ã§ãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã‚‹ã¨æ€ã„ã¾ã™)

```typescript
const handler = route(routes);

export default {
  fetch(req) {
    return handler(req);
  },
} satisfies Deno.ServeDefaultExport;
```

#### `@std/http/{header,method}`

å®Ÿé¨“çš„ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¨ã—ã¦`@std/http/header`ã¨`@std/http/method`ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

HTTPãƒ˜ãƒƒãƒ€ãƒ¼ã‚„ãƒ¡ã‚½ãƒƒãƒ‰ã«é–¢ã™ã‚‹å®šæ•°ãŒæä¾›ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/streams@1.0.1`

[@std/streams@1.0.1](https://jsr.io/@std/streams@1.0.1)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

#### `@std/streams/fixed-chunk-stream`ãŒè¿½åŠ 

å…¥åŠ›ã‚’ä¸€å®šã®ã‚µã‚¤ã‚ºã”ã¨ã®ãƒãƒ£ãƒ³ã‚¯ã«åˆ†å‰²ã—ã¦ãã‚Œã‚‹`FixedChunkStream`ãŒè¿½åŠ ã•ã‚Œã¦ã„ã¾ã™ã€‚

### `@std/archive@0.225.0`

[@std/archive@0.225.0](https://jsr.io/@std/archive@0.225.0)ãŒãƒªãƒªãƒ¼ã‚¹ã•ã‚Œã¦ã„ã¾ã™ã€‚

APIã«é–¢ã™ã‚‹ä»¥ä¸‹ã®ç ´å£Šçš„å¤‰æ›´ãŒå®Ÿæ–½ã•ã‚Œã¦ã„ã¾ã™ã€‚

- `TarEntry`ã®ã‚³ãƒ³ã‚¹ãƒˆãƒ©ã‚¯ã‚¿ãƒ¼ã®`header`å¼•æ•°ãŒå‰Šé™¤ã•ã‚Œã¦ã„ã¾ã™
- `Tar`ã®`data`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ¼ãŒprivateã«å¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™
- `Untar`ã®`reader`ã¨`block`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ãƒ¼ãŒprivateã«å¤‰æ›´ã•ã‚Œã¦ã„ã¾ã™
