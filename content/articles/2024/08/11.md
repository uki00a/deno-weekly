---
title: 2024/08/05〜2024/08/11の最新情報
tags:
  - Deno
  - deno_std
categories:
  - news
date: 2024-08-11
description: @std/csv@1.0.0がリリース, @std/http@1.0.1がリリース (URLPatternベースのルーティングモジュールの追加など)
---

## `deno_std`のリリース

`deno_std`がリリースされています。

- [release-2024.08.07](https://github.com/denoland/std/releases/tag/release-2024.08.07)
- [release-2024.08.05](https://github.com/denoland/std/releases/tag/release-2024.08.05)

### `@std/csv@1.0.0`

[@std/csv@1.0.0](https://jsr.io/@std/csv@1.0.0)がリリースされました。

### `@std/http@1.0.1`

[@std/http@1.0.1](https://jsr.io/@std/http@1.0.1)がリリースされています。

#### `@std/http/route` - `URLPattern`ベースのルーティングモジュール

`URLPattern`を活用して簡易的なルーティングを実装するための実験的なモジュールが追加されています。

`route()`を呼ぶと[`Deno.ServeHandler`](https://github.com/denoland/deno/blob/v1.45.5/cli/tsc/dts/lib.deno.ns.d.ts#L6254-L6257)型の関数を返却してくれるため、[`deno serve`]({{< ref "articles/deno/v1.43.md" >}})や`Deno.serve`などと併用することができます。

```typescript
import { type Route, route } from "jsr:@std/http@1.0.1/route";

const routes: Array<Route> = [
  {
    pattern: new URLPattern({ pathname: "/messages/:id" }),
    handler: (
      _req,
      _info,
      params,
    ) => new Response(`Message ${params?.pathname.groups.id}`),
  },
  {
    pattern: new URLPattern({ pathname: "/authenticate" }),
    method: "POST",
    handler: () => new Response("OK"),
  },
];
const handler = route(routes);

export default {
  fetch(req: Request): Response {
    return handler(req);
  },
};
```

余談ですが、[`Deno.ServeDefaultExport`](https://github.com/denoland/deno/pull/24879)という型が直近でDenoの本体に追加されているため、`deno serve`を使用する際の型の定義が行いやすくなりそうです。(おそらくDeno v1.46でリリースされると思います)

```typescript
const handler = route(routes);

export default {
  fetch(req) {
    return handler(req);
  },
} satisfies Deno.ServeDefaultExport;
```

#### `@std/http/{header,method}`

実験的なモジュールとして`@std/http/header`と`@std/http/method`が追加されています。

HTTPヘッダーやメソッドに関する定数が提供されています。

### `@std/streams@1.0.1`

[@std/streams@1.0.1](https://jsr.io/@std/streams@1.0.1)がリリースされています。

#### `@std/streams/fixed-chunk-stream`が追加

入力を一定のサイズごとのチャンクに分割してくれる`FixedChunkStream`が追加されています。

### `@std/archive@0.225.0`

[@std/archive@0.225.0](https://jsr.io/@std/archive@0.225.0)がリリースされています。

APIに関する以下の破壊的変更が実施されています。

- `TarEntry`のコンストラクターの`header`引数が削除されています
- `Tar`の`data`プロパティーがprivateに変更されています
- `Untar`の`reader`と`block`プロパティーがprivateに変更されています
