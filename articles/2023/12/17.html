<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>2023/12/11〜2023/12/17の最新情報 | 週刊Deno</title><meta name=keywords content="Deno,deno_std,Deno KV"><meta name=description content="Deno v1.39, deno_std v0.209.0 (std/webgpuやstd/netの追加など), `Deno.Kv.watch`のアナウンス, `@deno/kv`パッケージの解説, Deno KVのベンチマーク"><meta name=author content><link rel=canonical href=https://uki00a.github.io/deno-weekly/articles/2023/12/17.html><link crossorigin=anonymous href=/deno-weekly/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/deno-weekly/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://raw.githubusercontent.com/uki00a/blog/master/src/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://uki00a.github.io/deno-weekly/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://uki00a.github.io/deno-weekly/favicon-32x32.png><link rel=apple-touch-icon href=https://uki00a.github.io/deno-weekly/apple-touch-icon.png><link rel=mask-icon href=https://uki00a.github.io/deno-weekly/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:image" content="https://raw.githubusercontent.com/uki00a/blog/master/src/assets/avatar.png"><meta property="twitter:image" content="https://raw.githubusercontent.com/uki00a/blog/master/src/assets/avatar.png"><meta name=twitter:site content="@uki00a"><script async src="https://www.googletagmanager.com/gtag/js?id=G-MK2K2MRMBF"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MK2K2MRMBF",{anonymize_ip:!1})}</script><meta property="og:title" content="2023/12/11〜2023/12/17の最新情報"><meta property="og:description" content="Deno v1.39, deno_std v0.209.0 (std/webgpuやstd/netの追加など), `Deno.Kv.watch`のアナウンス, `@deno/kv`パッケージの解説, Deno KVのベンチマーク"><meta property="og:type" content="article"><meta property="og:url" content="https://uki00a.github.io/deno-weekly/articles/2023/12/17.html"><meta property="article:section" content="articles"><meta property="article:published_time" content="2023-12-17T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-17T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="2023/12/11〜2023/12/17の最新情報"><meta name=twitter:description content="Deno v1.39, deno_std v0.209.0 (std/webgpuやstd/netの追加など), `Deno.Kv.watch`のアナウンス, `@deno/kv`パッケージの解説, Deno KVのベンチマーク"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"2023/12/11〜2023/12/17の最新情報","item":"https://uki00a.github.io/deno-weekly/articles/2023/12/17.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"2023/12/11〜2023/12/17の最新情報","name":"2023\/12\/11〜2023\/12\/17の最新情報","description":"Deno v1.39, deno_std v0.209.0 (std/webgpuやstd/netの追加など), `Deno.Kv.watch`のアナウンス, `@deno/kv`パッケージの解説, Deno KVのベンチマーク","keywords":["Deno","deno_std","Deno KV"],"articleBody":"Deno v1.39 Deno v1.39がリリースされました。\n以下に内容をまとめたため、よろしければそちらを参照いただければと思います。\n Deno v1.39  deno_std v0.209.0 deno_std v0.209.0がリリースされました。\n非推奨モジュール・APIの削除 以下の非推奨化されていたモジュールやAPIが削除されています。\n std/fs/eol.ts: EOLがenumから文字列(\"\\n\" | \"\\r\\n\")に変更されています。 std/async/deferred.tsが削除されています。(Deno v1.38からPromise.withResolversがサポートされたため) std/bytes/concat.ts: スプレッド形式のシグネチャ(concat(...buf: (Uint8Array | Uint8Array[])[]): Uint8Array)が削除されました。 std/collections: binary_heap.tsなどのデータ構造に関わるファイルが削除されています。  deno_std v0.207.0でstd/data_structuresが追加されていて、今回削除されたデータ構造はそちらから利用できます。   std/datetime/to_imf.tsが削除されました。(Date#toUTCString()の使用が推奨されます。) std/http/server_sent_event.tsが削除されました。(std/http/server_sent_event_stream.tsの使用が推奨されます。)  既存モジュール・APIの非推奨化  std/types.d.tsが非推奨化されました。  今後はWeb Streams APIの使用が推奨されます。 また、std/io/types.d.tsが追加されており、こちらはdeno_std v1までは維持されるようなので、もしstd/types.d.tsを利用したいケースではこちらの利用が推奨されます。   std/log: LogLevelsがenumから通常のオブジェクトへ変更されています。(これに伴い、一部フィールドが非推奨化されています。)  これに合わせてLogLevel型が追加されており、v0.211.0でログレベルをnumber型として扱っていた箇所がLogLevelに変更される予定のようです。   std/front_matter: Formatが非推奨化されています。  std/webgpuが追加 Deno v1.39でのWebGPU APIの再導入に伴い、deno_stdにstd/webgpuモジュールが追加されています。\nWebGPU APIに関連するユーティリティが提供されているようです。\nstd/netが追加 新規モジュールとしてstd/netが追加されています。\n現在はgetAvailablePort()というシステムの空きポートを返してくれる機能のみが提供されています。\nstd/iniが追加 新規モジュールとしてstd/iniが追加されています。\nINIファイルの解析やJavaScriptオブジェクトからの生成がサポートされています。\nstd/cli/prompt_secret.tsが追加 promptSecret()というAPIが提供されています。\nwindow.promptと同様にユーザーに入力を求めることができますが、入力内容が*でマスキングされます。\nimport { promptSecret } from \"https://deno.land/std@0.209.0/cli/prompt_secret.ts\";  const password = promptSecret(\" \"); assert(typeof password === \"string\"); std/assert/std/expect assertIsError()とexpect().toThrow()で正規表現がサポートされています。\nimport { assertIsError } from \"https://deno.land/std@0.209.0/assert/assert_is_error.ts\";  assertIsError(new Error(\"foo\"), Error, /^f..$/); std/http/unstable_signed_cookie.tsが追加 Cookieの署名(signCookie)や検証(verifyCookie)などのためのAPIが提供されています。\nimport { signCookie } from \"https://deno.land/std@0.209.0/http/unstable_signed_cookie.ts\"; import { setCookie } from \"https://deno.land/std@0.209.0/http/cookie.ts\";  const headers = new Headers(); // ... const value = await signCookie(\"value\", key); setCookie(headers, {  name: \"cookie-name\",  value, }); assert(headers.has(\"Set-Cookie\")); その他の改善  std/assert: assertEqualsなどで長い文字列を持つオブジェクトどうしを比較する際に、diffが部分的に切り取られてしまう問題が修正されています。 std/toml: 複数行文字列に含まれるCRLFがきちんと取り扱われるように改善されています。  Deno.Kv.watchのアナウンス Deno.Kv.watchの解説がDeno公式で公開されています。\n Build Real-time Applications with the new “watch” API in Deno KV  @deno/kvパッケージの解説 Node.jsなどからDeno KVに接続するための@deno/kvパッケージに関する解説記事がDeno公式で公開されています。\n Use Deno KV in Node with the new official npm package  Deno KVのベンチマーク Deno公式でDeno KVやCloudflare Workers KV, Upstash Redisなどのベンチマーク結果や比較などが公開されています。\n Deno KV vs. Cloudflare Workers KV, Upstash Redis, AWS DynamoDB, and Google Firestore denoland/deno-kv-benchmarks  ","wordCount":"173","inLanguage":"en","datePublished":"2023-12-17T00:00:00Z","dateModified":"2023-12-17T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://uki00a.github.io/deno-weekly/articles/2023/12/17.html"},"publisher":{"@type":"Organization","name":"週刊Deno","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/uki00a/blog/master/src/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://uki00a.github.io/deno-weekly/ accesskey=h title="週刊Deno (Alt + H)">週刊Deno</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://uki00a.github.io/deno-weekly/tags.html title=タグ><span><i class="fa fa-heart"></i>タグ</span></a></li><li><a href=https://uki00a.github.io/deno-weekly/categories.html title=カテゴリー><span><i class="fa fa-heart"></i>カテゴリー</span></a></li><li><a href=https://uki00a.github.io/deno-weekly/gallery.html title=ギャラリー><span><i class="fa fa-road"></i>ギャラリー<span class=alert></span></span></a></li><li><a href=https://uki00a.github.io/deno-weekly/index.xml title="RSS feed"><span><i class="fa fa-road"></i>RSS feed<span class=alert></span></span></a></li><li><a href=https://uki00a.github.io/deno-weekly/about.html title=About><span><i class="fa fa-road"></i>About<span class=alert></span></span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>2023/12/11〜2023/12/17の最新情報</h1><div class=post-description>Deno v1.39, deno_std v0.209.0 (std/webgpuやstd/netの追加など), `Deno.Kv.watch`のアナウンス, `@deno/kv`パッケージの解説, Deno KVのベンチマーク</div><div class=post-meta><span title="2023-12-17 00:00:00 +0000 UTC">December 17, 2023</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#deno-v139 aria-label="Deno v1.39">Deno v1.39</a></li><li><a href=#deno_std-v02090 aria-label="deno_std v0.209.0">deno_std v0.209.0</a><ul><li><a href=#%e9%9d%9e%e6%8e%a8%e5%a5%a8%e3%83%a2%e3%82%b8%e3%83%a5%e3%83%bc%e3%83%abapi%e3%81%ae%e5%89%8a%e9%99%a4 aria-label=非推奨モジュール・APIの削除>非推奨モジュール・APIの削除</a></li><li><a href=#%e6%97%a2%e5%ad%98%e3%83%a2%e3%82%b8%e3%83%a5%e3%83%bc%e3%83%abapi%e3%81%ae%e9%9d%9e%e6%8e%a8%e5%a5%a8%e5%8c%96 aria-label=既存モジュール・APIの非推奨化>既存モジュール・APIの非推奨化</a></li><li><a href=#stdwebgpu%e3%81%8c%e8%bf%bd%e5%8a%a0 aria-label=std/webgpuが追加><code>std/webgpu</code>が追加</a></li><li><a href=#stdnet%e3%81%8c%e8%bf%bd%e5%8a%a0 aria-label=std/netが追加><code>std/net</code>が追加</a></li><li><a href=#stdini%e3%81%8c%e8%bf%bd%e5%8a%a0 aria-label=std/iniが追加><code>std/ini</code>が追加</a></li><li><a href=#stdcliprompt_secretts%e3%81%8c%e8%bf%bd%e5%8a%a0 aria-label=std/cli/prompt_secret.tsが追加><code>std/cli/prompt_secret.ts</code>が追加</a></li><li><a href=#stdassertstdexpect aria-label=std/assert/std/expect><code>std/assert</code>/<code>std/expect</code></a></li><li><a href=#stdhttpunstable_signed_cookiets%e3%81%8c%e8%bf%bd%e5%8a%a0 aria-label=std/http/unstable_signed_cookie.tsが追加><code>std/http/unstable_signed_cookie.ts</code>が追加</a></li><li><a href=#%e3%81%9d%e3%81%ae%e4%bb%96%e3%81%ae%e6%94%b9%e5%96%84 aria-label=その他の改善>その他の改善</a></li></ul></li><li><a href=#denokvwatch%e3%81%ae%e3%82%a2%e3%83%8a%e3%82%a6%e3%83%b3%e3%82%b9 aria-label=Deno.Kv.watchのアナウンス><code>Deno.Kv.watch</code>のアナウンス</a></li><li><a href=#denokv%e3%83%91%e3%83%83%e3%82%b1%e3%83%bc%e3%82%b8%e3%81%ae%e8%a7%a3%e8%aa%ac aria-label=@deno/kvパッケージの解説><code>@deno/kv</code>パッケージの解説</a></li><li><a href=#deno-kv%e3%81%ae%e3%83%99%e3%83%b3%e3%83%81%e3%83%9e%e3%83%bc%e3%82%af aria-label="Deno KVのベンチマーク">Deno KVのベンチマーク</a></li></ul></div></details></div><div class=post-content><h2 id=deno-v139>Deno v1.39<a hidden class=anchor aria-hidden=true href=#deno-v139>#</a></h2><p>Deno v1.39がリリースされました。</p><p>以下に内容をまとめたため、よろしければそちらを参照いただければと思います。</p><ul><li><a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.39.html>Deno v1.39</a></li></ul><h2 id=deno_std-v02090>deno_std v0.209.0<a hidden class=anchor aria-hidden=true href=#deno_std-v02090>#</a></h2><p><a href=https://github.com/denoland/deno_std/releases/tag/0.209.0>deno_std v0.209.0</a>がリリースされました。</p><h3 id=非推奨モジュールapiの削除>非推奨モジュール・APIの削除<a hidden class=anchor aria-hidden=true href=#非推奨モジュールapiの削除>#</a></h3><p>以下の非推奨化されていたモジュールやAPIが削除されています。</p><ul><li><code>std/fs/eol.ts</code>: <code>EOL</code>が<code>enum</code>から文字列(<code>"\n" | "\r\n"</code>)に変更されています。</li><li><code>std/async/deferred.ts</code>が削除されています。(<a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.38.html>Deno v1.38</a>から<code>Promise.withResolvers</code>がサポートされたため)</li><li><code>std/bytes/concat.ts</code>: スプレッド形式のシグネチャ(<code>concat(...buf: (Uint8Array | Uint8Array[])[]): Uint8Array</code>)が削除されました。</li><li><code>std/collections</code>: <code>binary_heap.ts</code>などのデータ構造に関わるファイルが削除されています。<ul><li><a href=https://uki00a.github.io/deno-weekly/articles/2023/11/19.html>deno_std v0.207.0</a>で<code>std/data_structures</code>が追加されていて、今回削除されたデータ構造はそちらから利用できます。</li></ul></li><li><code>std/datetime/to_imf.ts</code>が削除されました。(<code>Date#toUTCString()</code>の使用が推奨されます。)</li><li><code>std/http/server_sent_event.ts</code>が削除されました。(<a href=https://uki00a.github.io/deno-weekly/articles/2023/11/12.html>std/http/server_sent_event_stream.ts</a>の使用が推奨されます。)</li></ul><h3 id=既存モジュールapiの非推奨化>既存モジュール・APIの非推奨化<a hidden class=anchor aria-hidden=true href=#既存モジュールapiの非推奨化>#</a></h3><ul><li><code>std/types.d.ts</code>が非推奨化されました。<ul><li>今後は<a href=https://developer.mozilla.org/en-US/docs/Web/API/Streams_API>Web Streams API</a>の使用が推奨されます。</li><li>また、<code>std/io/types.d.ts</code>が追加されており、こちらはdeno_std v1までは維持されるようなので、もし<code>std/types.d.ts</code>を利用したいケースではこちらの利用が推奨されます。</li></ul></li><li><code>std/log</code>: <code>LogLevels</code>が<code>enum</code>から通常のオブジェクトへ変更されています。(これに伴い、一部フィールドが非推奨化されています。)<ul><li>これに合わせて<code>LogLevel</code>型が追加されており、v0.211.0でログレベルを<code>number</code>型として扱っていた箇所が<code>LogLevel</code>に変更される予定のようです。</li></ul></li><li><code>std/front_matter</code>: <code>Format</code>が非推奨化されています。</li></ul><h3 id=stdwebgpuが追加><code>std/webgpu</code>が追加<a hidden class=anchor aria-hidden=true href=#stdwebgpuが追加>#</a></h3><p><a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.39.html>Deno v1.39</a>でのWebGPU APIの再導入に伴い、<code>deno_std</code>に<code>std/webgpu</code>モジュールが追加されています。</p><p>WebGPU APIに関連するユーティリティが提供されているようです。</p><h3 id=stdnetが追加><code>std/net</code>が追加<a hidden class=anchor aria-hidden=true href=#stdnetが追加>#</a></h3><p>新規モジュールとして<code>std/net</code>が追加されています。</p><p>現在は<code>getAvailablePort()</code>というシステムの空きポートを返してくれる機能のみが提供されています。</p><h3 id=stdiniが追加><code>std/ini</code>が追加<a hidden class=anchor aria-hidden=true href=#stdiniが追加>#</a></h3><p>新規モジュールとして<code>std/ini</code>が追加されています。</p><p>INIファイルの解析やJavaScriptオブジェクトからの生成がサポートされています。</p><h3 id=stdcliprompt_secrettsが追加><code>std/cli/prompt_secret.ts</code>が追加<a hidden class=anchor aria-hidden=true href=#stdcliprompt_secrettsが追加>#</a></h3><p><code>promptSecret()</code>というAPIが提供されています。</p><p><code>window.prompt</code>と同様にユーザーに入力を求めることができますが、入力内容が<code>*</code>でマスキングされます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>promptSecret</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;https://deno.land/std@0.209.0/cli/prompt_secret.ts&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>password</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>promptSecret</span>(<span style=color:#e6db74>&#34;&gt; &#34;</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert</span>(<span style=color:#66d9ef>typeof</span> <span style=color:#a6e22e>password</span> <span style=color:#f92672>===</span> <span style=color:#e6db74>&#34;string&#34;</span>);
</span></span></code></pre></div><h3 id=stdassertstdexpect><code>std/assert</code>/<code>std/expect</code><a hidden class=anchor aria-hidden=true href=#stdassertstdexpect>#</a></h3><p><a href=https://deno.land/std@0.209.0/assert/assert_is_error.ts>assertIsError()</a>と<a href=https://deno.land/std@0.209.0/expect/mod.ts>expect().toThrow()</a>で正規表現がサポートされています。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>assertIsError</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;https://deno.land/std@0.209.0/assert/assert_is_error.ts&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>assertIsError</span>(<span style=color:#66d9ef>new</span> Error(<span style=color:#e6db74>&#34;foo&#34;</span>), Error, <span style=color:#e6db74>/^f..$/</span>);
</span></span></code></pre></div><h3 id=stdhttpunstable_signed_cookietsが追加><code>std/http/unstable_signed_cookie.ts</code>が追加<a hidden class=anchor aria-hidden=true href=#stdhttpunstable_signed_cookietsが追加>#</a></h3><p>Cookieの署名(<code>signCookie</code>)や検証(<code>verifyCookie</code>)などのためのAPIが提供されています。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>signCookie</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;https://deno.land/std@0.209.0/http/unstable_signed_cookie.ts&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>setCookie</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;https://deno.land/std@0.209.0/http/cookie.ts&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>headers</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Headers</span>();
</span></span><span style=display:flex><span><span style=color:#75715e>// ...
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>value</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>signCookie</span>(<span style=color:#e6db74>&#34;value&#34;</span>, <span style=color:#a6e22e>key</span>);
</span></span><span style=display:flex><span><span style=color:#a6e22e>setCookie</span>(<span style=color:#a6e22e>headers</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>name</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;cookie-name&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>value</span>,
</span></span><span style=display:flex><span>});
</span></span><span style=display:flex><span><span style=color:#a6e22e>assert</span>(<span style=color:#a6e22e>headers</span>.<span style=color:#a6e22e>has</span>(<span style=color:#e6db74>&#34;Set-Cookie&#34;</span>));
</span></span></code></pre></div><h3 id=その他の改善>その他の改善<a hidden class=anchor aria-hidden=true href=#その他の改善>#</a></h3><ul><li><code>std/assert</code>: <code>assertEquals</code>などで長い文字列を持つオブジェクトどうしを比較する際に、diffが部分的に切り取られてしまう問題が修正されています。</li><li><code>std/toml</code>: 複数行文字列に含まれるCRLFがきちんと取り扱われるように改善されています。</li></ul><h2 id=denokvwatchのアナウンス><code>Deno.Kv.watch</code>のアナウンス<a hidden class=anchor aria-hidden=true href=#denokvwatchのアナウンス>#</a></h2><p><a href=https://uki00a.github.io/deno-weekly/articles/2023/12/10.html><code>Deno.Kv.watch</code></a>の解説がDeno公式で公開されています。</p><ul><li><a href=https://deno.com/blog/kv-watch>Build Real-time Applications with the new &ldquo;watch&rdquo; API in Deno KV</a></li></ul><h2 id=denokvパッケージの解説><code>@deno/kv</code>パッケージの解説<a hidden class=anchor aria-hidden=true href=#denokvパッケージの解説>#</a></h2><p>Node.jsなどからDeno KVに接続するための<a href=https://uki00a.github.io/deno-weekly/articles/2023/12/10.html><code>@deno/kv</code>パッケージ</a>に関する解説記事がDeno公式で公開されています。</p><ul><li><a href=https://deno.com/blog/kv-npm>Use Deno KV in Node with the new official npm package</a></li></ul><h2 id=deno-kvのベンチマーク>Deno KVのベンチマーク<a hidden class=anchor aria-hidden=true href=#deno-kvのベンチマーク>#</a></h2><p>Deno公式でDeno KVやCloudflare Workers KV, Upstash Redisなどのベンチマーク結果や比較などが公開されています。</p><ul><li><a href=https://deno.com/blog/comparing-deno-kv>Deno KV vs. Cloudflare Workers KV, Upstash Redis, AWS DynamoDB, and Google Firestore</a></li><li><a href=https://github.com/denoland/deno-kv-benchmarks>denoland/deno-kv-benchmarks</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://uki00a.github.io/deno-weekly/tags/deno.html>deno</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/deno_std.html>deno_std</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/deno-kv.html>Deno KV</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://uki00a.github.io/deno-weekly/>週刊Deno</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>