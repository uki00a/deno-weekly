<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>2023/12/04〜2023/12/10の最新情報 | 週刊Deno</title><meta name=keywords content="Deno,Deno KV,fresh,Deno Deploy,deployctl,Lume"><meta name=description content="Deno v1.38.5 (Deno.Kv.watchが実装), --unstable-sloppy-importsについて, fresh v1.6.1 (Tailwind CSSプラグインの改善など), deployctl v1.9.0 (deno.jsonによる設定やプロジェクト名の推論などがサポート), denokv v0.6.0 (Node.js向けに@deno/kvパッケージが公開), lume v2 (UnoCSSプラグインの追加やAPIの整理など)"><meta name=author content><link rel=canonical href=https://uki00a.github.io/deno-weekly/articles/2023/12/10.html><link crossorigin=anonymous href=/deno-weekly/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/deno-weekly/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://raw.githubusercontent.com/uki00a/blog/master/src/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://uki00a.github.io/deno-weekly/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://uki00a.github.io/deno-weekly/favicon-32x32.png><link rel=apple-touch-icon href=https://uki00a.github.io/deno-weekly/apple-touch-icon.png><link rel=mask-icon href=https://uki00a.github.io/deno-weekly/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:image" content="https://raw.githubusercontent.com/uki00a/blog/master/src/assets/avatar.png"><meta property="twitter:image" content="https://raw.githubusercontent.com/uki00a/blog/master/src/assets/avatar.png"><meta name=twitter:site content="@uki00a"><script async src="https://www.googletagmanager.com/gtag/js?id=G-MK2K2MRMBF"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MK2K2MRMBF",{anonymize_ip:!1})}</script><meta property="og:title" content="2023/12/04〜2023/12/10の最新情報"><meta property="og:description" content="Deno v1.38.5 (Deno.Kv.watchが実装), --unstable-sloppy-importsについて, fresh v1.6.1 (Tailwind CSSプラグインの改善など), deployctl v1.9.0 (deno.jsonによる設定やプロジェクト名の推論などがサポート), denokv v0.6.0 (Node.js向けに@deno/kvパッケージが公開), lume v2 (UnoCSSプラグインの追加やAPIの整理など)"><meta property="og:type" content="article"><meta property="og:url" content="https://uki00a.github.io/deno-weekly/articles/2023/12/10.html"><meta property="article:section" content="articles"><meta property="article:published_time" content="2023-12-10T00:00:00+00:00"><meta property="article:modified_time" content="2023-12-10T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="2023/12/04〜2023/12/10の最新情報"><meta name=twitter:description content="Deno v1.38.5 (Deno.Kv.watchが実装), --unstable-sloppy-importsについて, fresh v1.6.1 (Tailwind CSSプラグインの改善など), deployctl v1.9.0 (deno.jsonによる設定やプロジェクト名の推論などがサポート), denokv v0.6.0 (Node.js向けに@deno/kvパッケージが公開), lume v2 (UnoCSSプラグインの追加やAPIの整理など)"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"2023/12/04〜2023/12/10の最新情報","item":"https://uki00a.github.io/deno-weekly/articles/2023/12/10.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"2023/12/04〜2023/12/10の最新情報","name":"2023\/12\/04〜2023\/12\/10の最新情報","description":"Deno v1.38.5 (Deno.Kv.watchが実装), --unstable-sloppy-importsについて, fresh v1.6.1 (Tailwind CSSプラグインの改善など), deployctl v1.9.0 (deno.jsonによる設定やプロジェクト名の推論などがサポート), denokv v0.6.0 (Node.js向けに@deno/kvパッケージが公開), lume v2 (UnoCSSプラグインの追加やAPIの整理など)","keywords":["Deno","Deno KV","fresh","Deno Deploy","deployctl","Lume"],"articleBody":"Deno v1.38.5 Deno v1.38.5がリリースされました。\nDeno.Kvにwatch()メソッドが実装されています。引数として監視したいキーの一覧を指定すると、戻り値として返却されたReadableStream[]からそれらのキーに関する変更が通知されます。\nconst kv = await Deno.openKv(\":memory:\"); const watcher = kv.watch(  [  [\"users\", 1],  [\"users\", 2]  ] );  (async () = {  for await (const entries of watcher) {  // 変更があった際は通知されます。  console.info(entries);  } })();  await kv.set([\"users\", 1], \"foo\"); await kv.set([\"users\", 2], \"bar\"); await kv.set([\"users\", 3], \"baz\"); --unstable-sloppy-importsの実装について まだリリースはされていませんが、Deno本体に--unstable-sloppy-importsというオプションを導入するPRがマージされています。\n feat(unstable): ability to resolve specifiers with no extension, specifiers for a directory, and TS files from JS extensions #21464\n この機能を有効化すると、以下のようなモジュールの読み込み方法が有効化されます。\n拡張子なしでのモジュールのimport\n// Denoがサポートする拡張子(ts, js, tsx, mjsなど)のファイルの探索を試みます。 // もしそれらの拡張子のファイルが見つかれば、それが読み込まれるようです。 import { add } from \"./add\"; ディレクトリを指定したimport\n// 対象のディレクトリから`index.${Denoがサポートする拡張子}`を名前に持つファイルの探索を試みます。 import { foo } from \"./path/to/dir\"; TypeScriptモジュールの.js拡張子でのimport\n// add.tsがあれば、それが読み込まれます。 import { add } from \"./add.js\"; この機能は以下のいずれかの方法で有効化できるようです。\n --unstable-sloppy-importsオプションを指定する deno.jsonでunstable: [\"sloppy-imports\"]を設定する DENO_UNSTABLE_SLOPPY_IMPORTS環境変数を設定する  この機能は既存のNode.jsプロジェクトをDenoで動かしやすくすることを目的としているようで、それ以外のケースにおいては、基本的に有効化することは推奨はされないようです。そのため、この機能を有効化した上で上記のいずれかの方法によるimportが検出された場合は、警告が出力されるようです。\nfresh v1.6.1 fresh v1.6.1がリリースされています。\nTailwind CSSプラグインの改善 fresh v1.6で追加されたTailwind CSSプラグインに関する変更が実施されています。\n Tailwind CSSプラグインとrouter.basePathオプション(fresh.config.ts)の併用がサポートされました。 autoprefixerの設定をカスタマイズできるようになりました。(TailwindPluginOptions)  その他  ctx.dataの非推奨化が解除されています。(意図せずして非推奨化されていたようです) v1.6.0で行われたルーティングの実装に関するURLPatternからRegExpへの移行がrevertされたようです。(代わりにDeno本体でURLPatternのパフォーマンスチューニングが実施されているようです)  deployctl v1.9.0 deployctl v1.9.0がリリースされています。\ndeno.json(c)による設定のサポート deno.json(c)にdeployフィールドを定義しておくと、deployctlがそこから設定を読み込んでくれるようになりました。\ndeployフィールドには以下の項目を設定できるようです。\n project entrypoint include exclude  deployctl deployの実行後にdeno.json(c)が存在しなければ、deployctlが自動でdeno.jsonにこれらの設定を書き込んでくれるようです。\ndeployctl deployコマンドの改善 --projectや--entrypointオプションが省略された際のプロジェクト名やエントリポイントの推論がサポートされています。\nプロジェクト名はGitリポジトリやディレクトリ名などから推論されるようです。また、もしmain.tsやindex.tsなどの名前のファイルが見つかれば、それがエントリポイントとして取り扱われるようです。\n インタラクティブな認可フローのサポート\ndeployctlの実行時に--tokenオプションなどでアクセストークンが指定されなかった際は、インタラクティブな認可フローを実行してトークンが発行されるようになりました。\n発行されたトークンはmacOSではkeychainパッケージを使用して保存されるようです。\nGitHubアクションの改善 deployctlのGitHubアクションでinclude/excludeオプションがサポートされています。\n https://github.com/denoland/deployctl/blob/1.9.0/action.yml#L19-L24\ndenokv v0.6.0 denokv v0.6.0がリリースされています。\n@deno/kvパッケージがnpmレジストリに公開されています。\nこのパッケージを使用することで、Node.jsからDeno KVのKV Connectプロトコルを実装したサーバーやSQLiteバックエンドなどへ接続できるようです。\nまた、Deno CLIの実装とは異なる独自のインメモリ実装なども提供されているようです。(implementation: \"in-memory\")\nlume v2 lume v2がリリースされています。\nUnoCSSプラグインやsharpベースの画像変換プラグインの追加、デフォルトのテンプレートエンジンがNunjucksからVentoへ移行、APIやCLIオプションの整理などが行われているようです。\n以下のページでマイグレーションガイドが公開されています。\n Migrate to Lume 2    CHANGELOG lume.land/docs/advanced/migrate-to-lume2.md  ","wordCount":"170","inLanguage":"en","datePublished":"2023-12-10T00:00:00Z","dateModified":"2023-12-10T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://uki00a.github.io/deno-weekly/articles/2023/12/10.html"},"publisher":{"@type":"Organization","name":"週刊Deno","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/uki00a/blog/master/src/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://uki00a.github.io/deno-weekly/ accesskey=h title="週刊Deno (Alt + H)">週刊Deno</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://uki00a.github.io/deno-weekly/tags.html title=タグ><span><i class="fa fa-heart"></i>タグ</span></a></li><li><a href=https://uki00a.github.io/deno-weekly/categories.html title=カテゴリー><span><i class="fa fa-heart"></i>カテゴリー</span></a></li><li><a href=https://uki00a.github.io/deno-weekly/gallery.html title=ギャラリー><span><i class="fa fa-road"></i>ギャラリー<span class=alert></span></span></a></li><li><a href=https://uki00a.github.io/deno-weekly/index.xml title="RSS feed"><span><i class="fa fa-road"></i>RSS feed<span class=alert></span></span></a></li><li><a href=https://uki00a.github.io/deno-weekly/about.html title=About><span><i class="fa fa-road"></i>About<span class=alert></span></span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>2023/12/04〜2023/12/10の最新情報</h1><div class=post-description>Deno v1.38.5 (Deno.Kv.watchが実装), --unstable-sloppy-importsについて, fresh v1.6.1 (Tailwind CSSプラグインの改善など), deployctl v1.9.0 (deno.jsonによる設定やプロジェクト名の推論などがサポート), denokv v0.6.0 (Node.js向けに@deno/kvパッケージが公開), lume v2 (UnoCSSプラグインの追加やAPIの整理など)</div><div class=post-meta><span title="2023-12-10 00:00:00 +0000 UTC">December 10, 2023</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#deno-v1385 aria-label="Deno v1.38.5">Deno v1.38.5</a></li><li><a href=#--unstable-sloppy-imports%e3%81%ae%e5%ae%9f%e8%a3%85%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6 aria-label=--unstable-sloppy-importsの実装について><code>--unstable-sloppy-imports</code>の実装について</a></li><li><a href=#fresh-v161 aria-label="fresh v1.6.1">fresh v1.6.1</a><ul><li><a href=#tailwind-css%e3%83%97%e3%83%a9%e3%82%b0%e3%82%a4%e3%83%b3%e3%81%ae%e6%94%b9%e5%96%84 aria-label="Tailwind CSSプラグインの改善">Tailwind CSSプラグインの改善</a></li><li><a href=#%e3%81%9d%e3%81%ae%e4%bb%96 aria-label=その他>その他</a></li></ul></li><li><a href=#deployctl-v190 aria-label="deployctl v1.9.0">deployctl v1.9.0</a><ul><li><a href=#denojsonc%e3%81%ab%e3%82%88%e3%82%8b%e8%a8%ad%e5%ae%9a%e3%81%ae%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=deno.json(c)による設定のサポート><code>deno.json(c)</code>による設定のサポート</a></li><li><a href=#deployctl-deploy%e3%82%b3%e3%83%9e%e3%83%b3%e3%83%89%e3%81%ae%e6%94%b9%e5%96%84 aria-label="deployctl deployコマンドの改善"><code>deployctl deploy</code>コマンドの改善</a></li><li><a href=#github%e3%82%a2%e3%82%af%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%ae%e6%94%b9%e5%96%84 aria-label=GitHubアクションの改善>GitHubアクションの改善</a></li></ul></li><li><a href=#denokv-v060 aria-label="denokv v0.6.0">denokv v0.6.0</a></li><li><a href=#lume-v2 aria-label="lume v2">lume v2</a></li></ul></div></details></div><div class=post-content><h2 id=deno-v1385>Deno v1.38.5<a hidden class=anchor aria-hidden=true href=#deno-v1385>#</a></h2><p><a href=https://github.com/denoland/deno/releases/tag/v1.38.5>Deno v1.38.5</a>がリリースされました。</p><p><code>Deno.Kv</code>に<a href="https://deno.land/api@v1.38.5?unstable=&s=Deno.Kv&p=prototype.watch"><code>watch()</code></a>メソッドが実装されています。引数として監視したいキーの一覧を指定すると、戻り値として返却された<code>ReadableStream&lt;Deno.KvEntryMaybe&lt;T>[]></code>からそれらのキーに関する変更が通知されます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>kv</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>Deno</span>.<span style=color:#a6e22e>openKv</span>(<span style=color:#e6db74>&#34;:memory:&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>watcher</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>kv</span>.<span style=color:#a6e22e>watch</span>(
</span></span><span style=display:flex><span>  [
</span></span><span style=display:flex><span>    [<span style=color:#e6db74>&#34;users&#34;</span>, <span style=color:#ae81ff>1</span>],
</span></span><span style=display:flex><span>    [<span style=color:#e6db74>&#34;users&#34;</span>, <span style=color:#ae81ff>2</span>]
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>(<span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
</span></span><span style=display:flex><span>  <span style=color:#66d9ef>for</span> <span style=color:#66d9ef>await</span> (<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>entries</span> <span style=color:#66d9ef>of</span> <span style=color:#a6e22e>watcher</span>) {
</span></span><span style=display:flex><span>    <span style=color:#75715e>// 変更があった際は通知されます。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>    <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>info</span>(<span style=color:#a6e22e>entries</span>);
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>})();
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>kv</span>.<span style=color:#66d9ef>set</span>([<span style=color:#e6db74>&#34;users&#34;</span>, <span style=color:#ae81ff>1</span>], <span style=color:#e6db74>&#34;foo&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>kv</span>.<span style=color:#66d9ef>set</span>([<span style=color:#e6db74>&#34;users&#34;</span>, <span style=color:#ae81ff>2</span>], <span style=color:#e6db74>&#34;bar&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>await</span> <span style=color:#a6e22e>kv</span>.<span style=color:#66d9ef>set</span>([<span style=color:#e6db74>&#34;users&#34;</span>, <span style=color:#ae81ff>3</span>], <span style=color:#e6db74>&#34;baz&#34;</span>);
</span></span></code></pre></div><h2 id=--unstable-sloppy-importsの実装について><code>--unstable-sloppy-imports</code>の実装について<a hidden class=anchor aria-hidden=true href=#--unstable-sloppy-importsの実装について>#</a></h2><p>まだリリースはされていませんが、Deno本体に<code>--unstable-sloppy-imports</code>というオプションを導入するPRがマージされています。</p><blockquote><p><a href=https://github.com/denoland/deno/pull/21464>feat(unstable): ability to resolve specifiers with no extension, specifiers for a directory, and TS files from JS extensions #21464</a></p></blockquote><p>この機能を有効化すると、以下のようなモジュールの読み込み方法が有効化されます。</p><p><strong>拡張子なしでのモジュールのimport</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// Denoがサポートする拡張子(ts, js, tsx, mjsなど)のファイルの探索を試みます。
</span></span></span><span style=display:flex><span><span style=color:#75715e>// もしそれらの拡張子のファイルが見つかれば、それが読み込まれるようです。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>add</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./add&#34;</span>;
</span></span></code></pre></div><p><strong>ディレクトリを指定したimport</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// 対象のディレクトリから`index.${Denoがサポートする拡張子}`を名前に持つファイルの探索を試みます。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>foo</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./path/to/dir&#34;</span>;
</span></span></code></pre></div><p><strong>TypeScriptモジュールの.js拡張子でのimport</strong></p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#75715e>// add.tsがあれば、それが読み込まれます。
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>add</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;./add.js&#34;</span>;
</span></span></code></pre></div><p>この機能は以下のいずれかの方法で有効化できるようです。</p><ul><li><code>--unstable-sloppy-imports</code>オプションを指定する</li><li><code>deno.json</code>で<code>unstable: ["sloppy-imports"]</code>を設定する</li><li><code>DENO_UNSTABLE_SLOPPY_IMPORTS</code>環境変数を設定する</li></ul><p>この機能は既存のNode.jsプロジェクトをDenoで動かしやすくすることを目的としているようで、それ以外のケースにおいては、基本的に有効化することは推奨はされないようです。そのため、この機能を有効化した上で上記のいずれかの方法による<code>import</code>が検出された場合は、警告が出力されるようです。</p><h2 id=fresh-v161>fresh v1.6.1<a hidden class=anchor aria-hidden=true href=#fresh-v161>#</a></h2><p><a href=https://github.com/denoland/fresh/releases/tag/1.6.1>fresh v1.6.1</a>がリリースされています。</p><h3 id=tailwind-cssプラグインの改善>Tailwind CSSプラグインの改善<a hidden class=anchor aria-hidden=true href=#tailwind-cssプラグインの改善>#</a></h3><p><a href=https://uki00a.github.io/deno-weekly/articles/fresh/v1.6.html>fresh v1.6</a>で追加されたTailwind CSSプラグインに関する変更が実施されています。</p><ul><li>Tailwind CSSプラグインと<a href="https://deno.land/x/fresh@1.6.1/server.ts?doc=&s=RouterOptions#prop_basePath"><code>router.basePath</code></a>オプション(<code>fresh.config.ts</code>)の併用がサポートされました。</li><li><a href=https://github.com/postcss/autoprefixer>autoprefixer</a>の設定をカスタマイズできるようになりました。(<a href="https://deno.land/x/fresh@1.6.1/plugins/tailwind/types.ts?doc=&s=TailwindPluginOptions"><code>TailwindPluginOptions</code></a>)</li></ul><h3 id=その他>その他<a hidden class=anchor aria-hidden=true href=#その他>#</a></h3><ul><li><a href="https://deno.land/x/fresh@1.6.1/server.ts?doc=&s=FreshContext"><code>ctx.data</code></a>の非推奨化が解除されています。(意図せずして非推奨化されていたようです)</li><li>v1.6.0で行われたルーティングの実装に関する<code>URLPattern</code>から<code>RegExp</code>への移行がrevertされたようです。(代わりにDeno本体で<a href=https://github.com/denoland/deno/pull/21488><code>URLPattern</code>のパフォーマンスチューニング</a>が実施されているようです)</li></ul><h2 id=deployctl-v190>deployctl v1.9.0<a hidden class=anchor aria-hidden=true href=#deployctl-v190>#</a></h2><p><a href=https://github.com/denoland/deployctl/releases/tag/1.9.0>deployctl v1.9.0</a>がリリースされています。</p><h3 id=denojsoncによる設定のサポート><code>deno.json(c)</code>による設定のサポート<a hidden class=anchor aria-hidden=true href=#denojsoncによる設定のサポート>#</a></h3><p><code>deno.json(c)</code>に<code>deploy</code>フィールドを定義しておくと、<code>deployctl</code>がそこから設定を読み込んでくれるようになりました。</p><p><code>deploy</code>フィールドには以下の項目を設定できるようです。</p><ul><li><code>project</code></li><li><code>entrypoint</code></li><li><code>include</code></li><li><code>exclude</code></li></ul><p><code>deployctl deploy</code>の実行後に<code>deno.json(c)</code>が存在しなければ、<code>deployctl</code>が自動で<code>deno.json</code>にこれらの設定を書き込んでくれるようです。</p><h3 id=deployctl-deployコマンドの改善><code>deployctl deploy</code>コマンドの改善<a hidden class=anchor aria-hidden=true href=#deployctl-deployコマンドの改善>#</a></h3><p><code>--project</code>や<code>--entrypoint</code>オプションが省略された際のプロジェクト名やエントリポイントの推論がサポートされています。</p><p>プロジェクト名はGitリポジトリやディレクトリ名などから推論されるようです。また、もし<code>main.ts</code>や<code>index.ts</code>などの名前のファイルが見つかれば、それがエントリポイントとして取り扱われるようです。</p><hr><p><strong>インタラクティブな認可フローのサポート</strong></p><p><code>deployctl</code>の実行時に<code>--token</code>オプションなどでアクセストークンが指定されなかった際は、インタラクティブな認可フローを実行してトークンが発行されるようになりました。</p><p>発行されたトークンはmacOSでは<a href=https://www.npmjs.com/package/keychain>keychain</a>パッケージを使用して保存されるようです。</p><h3 id=githubアクションの改善>GitHubアクションの改善<a hidden class=anchor aria-hidden=true href=#githubアクションの改善>#</a></h3><p><code>deployctl</code>のGitHubアクションで<code>include</code>/<code>exclude</code>オプションがサポートされています。</p><hr><p><a href=https://github.com/denoland/deployctl/blob/1.9.0/action.yml#L19-L24>https://github.com/denoland/deployctl/blob/1.9.0/action.yml#L19-L24</a></p><h2 id=denokv-v060>denokv v0.6.0<a hidden class=anchor aria-hidden=true href=#denokv-v060>#</a></h2><p><a href=https://github.com/denoland/denokv/releases/tag/0.6.0>denokv v0.6.0</a>がリリースされています。</p><p><a href=https://www.npmjs.com/package/@deno/kv>@deno/kv</a>パッケージがnpmレジストリに公開されています。</p><p>このパッケージを使用することで、Node.jsからDeno KVのKV Connectプロトコルを実装したサーバーやSQLiteバックエンドなどへ接続できるようです。</p><p>また、Deno CLIの実装とは異なる独自のインメモリ実装なども提供されているようです。(<code>implementation: "in-memory"</code>)</p><h2 id=lume-v2>lume v2<a hidden class=anchor aria-hidden=true href=#lume-v2>#</a></h2><p><a href=https://lume.land/blog/posts/lume-2/>lume v2</a>がリリースされています。</p><p>UnoCSSプラグインや<a href=https://github.com/lovell/sharp>sharp</a>ベースの画像変換プラグインの追加、デフォルトのテンプレートエンジンがNunjucksから<a href=https://github.com/oscarotero/vento>Vento</a>へ移行、APIやCLIオプションの整理などが行われているようです。</p><p>以下のページでマイグレーションガイドが公開されています。</p><ul><li><a href=https://lume.land/docs/advanced/migrate-to-lume2/>Migrate to Lume 2</a></li></ul><hr><ul><li><a href=https://github.com/lumeland/lume/blob/v2.0.0/CHANGELOG.md>CHANGELOG</a></li><li><a href=https://github.com/lumeland/lume.land/blob/a6cd0e643749a95dd6c85a43bc76fc19465c997c/docs/advanced/migrate-to-lume2.md>lume.land/docs/advanced/migrate-to-lume2.md</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://uki00a.github.io/deno-weekly/tags/deno.html>deno</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/deno-kv.html>Deno KV</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/fresh.html>fresh</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/deno-deploy.html>Deno Deploy</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/deployctl.html>deployctl</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/lume.html>Lume</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://uki00a.github.io/deno-weekly/>週刊Deno</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>