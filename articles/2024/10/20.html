<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>2024/10/14〜2024/10/20の最新情報 | 週刊Deno</title><meta name=keywords content="Deno,Deno KV,deno_std,esbuild,OpenTelemetry"><meta name=description content="Denoのv2.0.1とv2.0.2がリリース (--unstable-detect-cjsが追加, SvelteKit/Wrangler/Next.jsなどのサポートの改善, deno addやdeno removeの改善, など), @deno/otel (OpenTelemetryのエクスポーター), deno_stdへの@std/kvパッケージの追加について, esbuild_deno_loader v0.11.0 (Deno v2とDeno workspacesのサポート)
"><meta name=author content><link rel=canonical href=https://uki00a.github.io/deno-weekly/articles/2024/10/20.html><link crossorigin=anonymous href=/deno-weekly/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/deno-weekly/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://raw.githubusercontent.com/uki00a/blog/master/src/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://uki00a.github.io/deno-weekly/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://uki00a.github.io/deno-weekly/favicon-32x32.png><link rel=apple-touch-icon href=https://uki00a.github.io/deno-weekly/apple-touch-icon.png><link rel=mask-icon href=https://uki00a.github.io/deno-weekly/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:image" content="https://raw.githubusercontent.com/uki00a/blog/master/src/assets/avatar.png"><meta property="twitter:image" content="https://raw.githubusercontent.com/uki00a/blog/master/src/assets/avatar.png"><meta name=twitter:site content="@uki00a"><script async src="https://www.googletagmanager.com/gtag/js?id=G-MK2K2MRMBF"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MK2K2MRMBF",{anonymize_ip:!1})}</script><meta property="og:title" content="2024/10/14〜2024/10/20の最新情報"><meta property="og:description" content="Denoのv2.0.1とv2.0.2がリリース (--unstable-detect-cjsが追加, SvelteKit/Wrangler/Next.jsなどのサポートの改善, deno addやdeno removeの改善, など), @deno/otel (OpenTelemetryのエクスポーター), deno_stdへの@std/kvパッケージの追加について, esbuild_deno_loader v0.11.0 (Deno v2とDeno workspacesのサポート)
"><meta property="og:type" content="article"><meta property="og:url" content="https://uki00a.github.io/deno-weekly/articles/2024/10/20.html"><meta property="article:section" content="articles"><meta property="article:published_time" content="2024-10-20T00:00:00+00:00"><meta property="article:modified_time" content="2024-10-20T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="2024/10/14〜2024/10/20の最新情報"><meta name=twitter:description content="Denoのv2.0.1とv2.0.2がリリース (--unstable-detect-cjsが追加, SvelteKit/Wrangler/Next.jsなどのサポートの改善, deno addやdeno removeの改善, など), @deno/otel (OpenTelemetryのエクスポーター), deno_stdへの@std/kvパッケージの追加について, esbuild_deno_loader v0.11.0 (Deno v2とDeno workspacesのサポート)
"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"2024/10/14〜2024/10/20の最新情報","item":"https://uki00a.github.io/deno-weekly/articles/2024/10/20.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"2024/10/14〜2024/10/20の最新情報","name":"2024\/10\/14〜2024\/10\/20の最新情報","description":"Denoのv2.0.1とv2.0.2がリリース (--unstable-detect-cjsが追加, SvelteKit/Wrangler/Next.jsなどのサポートの改善, deno addやdeno removeの改善, など), @deno/otel (OpenTelemetryのエクスポーター), deno_stdへの@std/kvパッケージの追加について, esbuild_deno_loader v0.11.0 (Deno v2とDeno workspacesのサポート)\n","keywords":["Deno","Deno KV","deno_std","esbuild","OpenTelemetry"],"articleBody":"Deno v2.0.1/v2.0.2 Denoのv2.0.1とv2.0.2がリリースされています:\n v2.0.1 v2.0.2  Node.js互換性の改善 CommonJSサポートの改善やWrangler/SvelteKit/Next.jsなどに関するサポートの改善が行われています。\n--unstable-detect-cjs --unstable-detect-cjsという新しいオプションが追加されています (deno.jsonで\"unstable\": [\"detect-cjs\"]を指定して有効化することも可能です)\nこのオプションを指定すると、package.jsonで\"type\": commonjsが指定されたパッケージの.jsファイルが.cjsファイル(CommonJS形式)として認識されます。\n  feat(unstable): --unstable-detect-cjs for respecting explicit \"type\": \"commonjs\" #26149  node:net: Socket#setNoDelayが実装 新規APIとしてSocket#setNoDelayが実装されました。\nこのAPIによってnode-postgresなどのパフォーマンスの改善が期待されるようです。\n  fix(ext/node): implement TCP.setNoDelay #26263  node:child_process: fork()での--no-warningsのサポート fork()のexecArgvオプションでNode.jsの--no-warningsがサポートされています (Denoの--quietオプションにマッピングされます)\nWranglerを動作させるための対応のようです。\n  fix(child_process): map node --no-warnings flag to --quiet #26288  node:dns: lookup()の互換性の改善 lookup()でlocalhostを解決する際の振る舞いがNode.jsと一致するよう挙動が改善されています。\n  fix(ext/node): fix dns.lookup result ordering #26264  node:process (Windows) 未サポートのシグナルの取り扱いの変更 Windowsにおいて未サポートのシグナルに対して警告を発するのではなく、単純に無視されるように振る舞いが変更されています。パッケージによっては多くの警告が出てしまうこともあったようです。\n  fix: don’t warn on ignored signals on windows #26332  process.stdout.isTTYへの書き込みがサポート vite-plugin-checkerがこの挙動に依存していたようです\n  fix(node): make process.stdout.isTTY writable #26130  node:util: styleTextが公開 styleTextが実装はされていたもののexportされていなかったので、ユーザーが利用できるよう改めてexportされています。\n  fix(node/util): export styleText from node:util #26194  node:fs: copyFile()のバグ修正 copyFile()のmode引数にconstants.COPYFILE_EXCLが指定された際に、宛先のファイルが存在しないとエラーが発生する問題が修正されています (Next.jsのStatic Exportsでエラーが発生してしまっていたようです)\n  fix(node/fs): copyFile with COPYFILE_EXCL should not throw if the destination doesn’t exist #26360  node:http: ServerResponseでのヘッダーの正規化 setHeader()でヘッダーを設定する際に、正規化された状態でヘッダーが保持されるように修正されています。正規化されていないことにより、removeHeader()によって意図せずヘッダーが削除されないことがあったようです。(SvelteKitなど向けの対応のようです)\n  fix(node/http): normalize header names in ServerResponse #26339  node:crypto: timingSafeEqual()の改善 timingSafeEqual()でArrayBufferのbyteOffsetが考慮されるように実装が改善されています。\nscrypt-kdfパッケージの利用に当たって必要な変更のようです。\n  fix(ext/node): timingSafeEqual account for AB byteOffset #26292  deno add/deno install パッケージバージョンを明示した際の振る舞いの変更 以下のようにdeno addでパッケージのバージョンを明示した際に、deno.jsonのimportsに^付きでバージョンが設定されないよう振る舞いが変更されています:\n$ deno add npm:chalk@5.3.0   # Deno v2.0.1 $ cat deno.json | jq '.imports.chalk' \"npm:chalk@5.3.0\"   # Deno v2.0.0 $ cat deno.json | jq '.imports.chalk' \"npm:chalk@^5.3.0\"   fix(add): exact version should not have range ^ specifier #26302  jsrパッケージ追加時のdeno.jsonの作成がサポート deno addでjsrパッケージを追加するとdeno.jsonが自動で作成されるよう挙動が改善されています。\n  fix(add): create deno.json when running deno add jsr: #26275  エイリアスのサポート deno addまたはdeno installでパッケージをインストールする際のエイリアスの指定がサポートされています:\n# `@npm:`の形式で指定できます $ deno add chalk5@npm:chalk@^5 以下のようにエイリアスによってパッケージを参照できます:\nimport chalk from \"chalk5\";   fix(install): support installing npm package with alias #26246  安定性の改善 npmパッケージなどのダウンロード失敗時にリトライが行われるよう挙動が改善されています。\n  fix(install): retry downloads of registry info / tarballs #26278  deno remove npm:などのプレフィックスの指定がサポート deno removeコマンドでjsr:やnpm:プレフィックスを指定してパッケージを削除できるよう改善されています:\n$ deno remove npm:chalk   fix(cli): consolidate pkg parser for install \u0026 remove #26298  --allow-scripts deno runなどのサポート deno runやdeno addなどのコマンドでも--allow-scriptsがサポートされています (今まではdeno cacheとdeno installでのみサポートされていました)\nnodeModulesDir: \"auto\"が設定されている場合の体験を改善することが目的のようです。\n  feat(npm): support --allow-scripts on deno run (and deno add, deno test, etc)  --allow-import Workerコンストラクタのdenoオプション(--unstable-worker-optionsが必要)でpermissions.import(--allow-import)がサポートされています。\n  fix(unstable/worker): ensure import permissions are passed #26101  deno lsp 相対形式のマッピングへの補完 以下のようなマッピングに対してうまく補完が動作しない問題が改善されています:\n{  \"imports\": {  \"$/\": \"./src/\"  } }   fix(lsp): relative completions for bare import-mapped specifiers #26137  deno/didRefreshDenoConfigurationTreenotificationが実装 プロジェクトに含まれる各deno.jsonやpackage.jsonのパスなどを通知してくれるようです。\n  Reland feat(lsp): deno/didRefreshDenoConfigurationTree notifications #26325  deno test --doc default exportとnamed exportの衝突に関するハンドリング deno test --docでdefault exportとnamed exportで同じ名前を持つ要素がexportされたモジュールに対するコードブロックのテストをする際に、named exportの方が優先されるよう挙動が修正されています。\n  fix(cli): named export takes precedence over default export in doc testing #26112  deno repl JSONファイルをimportできない問題が修正 deno replにおいてImport AttributesによるJSONファイルのimportができない問題が解消されています。\n  fix(repl): importing json files #26053  --checkオプションの削除 deno replコマンドから--checkと--no-checkオプションが削除されています。\n  fix(repl): remove check flags #26140  deno info --json npmパッケージに関する修正 deno info --jsonでnpmパッケージに関する表示が改善されています。レジストリのURL(registryUrl)の追加などが行われているようです。\n  feat(cli): improve deno info output for npm packages #25906  @deno/otel Deno公式から@deno/otelというパッケージが公開されているようです:\n @deno/otel  OpenTelemetryのエクスポーターとして機能してくれるパッケージのようなのですが、Deno.tracingというDeno本体にはおそらくまだ入っていないAPIが利用されており、もしかしたら将来的に追加される可能性があるのかもしれません。\n@std/kvの追加について deno_stdに@std/kvパッケージを追加することが提案されています (deno_stdにDeno KVに関するパッケージを追加することは以前にも一度検討されていました)\n Proposal: Add @std/kv #6123  内容としてはkv-toolboxが提供している以下のモジュールの機能を@std/kvから提供することが提案されています:\n @kitsonk/kv-toolbox/json - Deno KVが取り扱う型をJSONでエンコード/デコードするためのモジュール @kitsonk/kv-toolbox/size_of - Deno KVに格納される値のバイトサイズを推測するためのユーティリティー  esbuild_deno_loader v0.11.0 esbuild_deno_loader v0.11.0がリリースされています。\nDeno v2とDeno workspacesやdeno.jsonの自動検出などのサポートが追加されています。\n","wordCount":"368","inLanguage":"en","datePublished":"2024-10-20T00:00:00Z","dateModified":"2024-10-20T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://uki00a.github.io/deno-weekly/articles/2024/10/20.html"},"publisher":{"@type":"Organization","name":"週刊Deno","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/uki00a/blog/master/src/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://uki00a.github.io/deno-weekly/ accesskey=h title="週刊Deno (Alt + H)">週刊Deno</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://uki00a.github.io/deno-weekly/tags.html title=タグ><span><i class="fa fa-heart"></i>タグ</span></a></li><li><a href=https://uki00a.github.io/deno-weekly/categories.html title=カテゴリー><span><i class="fa fa-heart"></i>カテゴリー</span></a></li><li><a href=https://uki00a.github.io/deno-weekly/gallery.html title=ギャラリー><span><i class="fa fa-road"></i>ギャラリー<span class=alert></span></span></a></li><li><a href=https://uki00a.github.io/deno-weekly/index.xml title="RSS feed"><span><i class="fa fa-road"></i>RSS feed<span class=alert></span></span></a></li><li><a href=https://uki00a.github.io/deno-weekly/about.html title=About><span><i class="fa fa-road"></i>About<span class=alert></span></span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>2024/10/14〜2024/10/20の最新情報</h1><div class=post-description>Denoのv2.0.1とv2.0.2がリリース (--unstable-detect-cjsが追加, SvelteKit/Wrangler/Next.jsなどのサポートの改善, deno addやdeno removeの改善, など), @deno/otel (OpenTelemetryのエクスポーター), deno_stdへの@std/kvパッケージの追加について, esbuild_deno_loader v0.11.0 (Deno v2とDeno workspacesのサポート)</div><div class=post-meta><span title="2024-10-20 00:00:00 +0000 UTC">October 20, 2024</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#deno-v201v202 aria-label="Deno v2.0.1/v2.0.2">Deno v2.0.1/v2.0.2</a><ul><li><a href=#nodejs%e4%ba%92%e6%8f%9b%e6%80%a7%e3%81%ae%e6%94%b9%e5%96%84 aria-label=Node.js互換性の改善>Node.js互換性の改善</a><ul><li><a href=#--unstable-detect-cjs aria-label=--unstable-detect-cjs><code>--unstable-detect-cjs</code></a></li><li><a href=#nodenet-socketsetnodelay%e3%81%8c%e5%ae%9f%e8%a3%85 aria-label="node:net: Socket#setNoDelayが実装"><code>node:net</code>: <code>Socket#setNoDelay</code>が実装</a></li><li><a href=#nodechild_process-fork%e3%81%a7%e3%81%ae--no-warnings%e3%81%ae%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label="node:child_process: fork()での--no-warningsのサポート"><code>node:child_process</code>: <code>fork()</code>での<code>--no-warnings</code>のサポート</a></li><li><a href=#nodedns-lookup%e3%81%ae%e4%ba%92%e6%8f%9b%e6%80%a7%e3%81%ae%e6%94%b9%e5%96%84 aria-label="node:dns: lookup()の互換性の改善"><code>node:dns</code>: <code>lookup()</code>の互換性の改善</a></li><li><a href=#nodeprocess aria-label=node:process><code>node:process</code></a><ul><li><a href=#windows-%e6%9c%aa%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88%e3%81%ae%e3%82%b7%e3%82%b0%e3%83%8a%e3%83%ab%e3%81%ae%e5%8f%96%e3%82%8a%e6%89%b1%e3%81%84%e3%81%ae%e5%a4%89%e6%9b%b4 aria-label="(Windows) 未サポートのシグナルの取り扱いの変更">(Windows) 未サポートのシグナルの取り扱いの変更</a></li><li><a href=#processstdoutistty%e3%81%b8%e3%81%ae%e6%9b%b8%e3%81%8d%e8%be%bc%e3%81%bf%e3%81%8c%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=process.stdout.isTTYへの書き込みがサポート><code>process.stdout.isTTY</code>への書き込みがサポート</a></li></ul></li><li><a href=#nodeutil-styletext%e3%81%8c%e5%85%ac%e9%96%8b aria-label="node:util: styleTextが公開"><code>node:util</code>: <code>styleText</code>が公開</a></li><li><a href=#nodefs-copyfile%e3%81%ae%e3%83%90%e3%82%b0%e4%bf%ae%e6%ad%a3 aria-label="node:fs: copyFile()のバグ修正"><code>node:fs</code>: <code>copyFile()</code>のバグ修正</a></li><li><a href=#nodehttp-serverresponse%e3%81%a7%e3%81%ae%e3%83%98%e3%83%83%e3%83%80%e3%83%bc%e3%81%ae%e6%ad%a3%e8%a6%8f%e5%8c%96 aria-label="node:http: ServerResponseでのヘッダーの正規化"><code>node:http</code>: <code>ServerResponse</code>でのヘッダーの正規化</a></li><li><a href=#nodecrypto-timingsafeequal%e3%81%ae%e6%94%b9%e5%96%84 aria-label="node:crypto: timingSafeEqual()の改善"><code>node:crypto</code>: <code>timingSafeEqual()</code>の改善</a></li></ul></li><li><a href=#deno-adddeno-install aria-label="deno add/deno install"><code>deno add</code>/<code>deno install</code></a><ul><li><a href=#%e3%83%91%e3%83%83%e3%82%b1%e3%83%bc%e3%82%b8%e3%83%90%e3%83%bc%e3%82%b8%e3%83%a7%e3%83%b3%e3%82%92%e6%98%8e%e7%a4%ba%e3%81%97%e3%81%9f%e9%9a%9b%e3%81%ae%e6%8c%af%e3%82%8b%e8%88%9e%e3%81%84%e3%81%ae%e5%a4%89%e6%9b%b4 aria-label=パッケージバージョンを明示した際の振る舞いの変更>パッケージバージョンを明示した際の振る舞いの変更</a></li><li><a href=#jsr%e3%83%91%e3%83%83%e3%82%b1%e3%83%bc%e3%82%b8%e8%bf%bd%e5%8a%a0%e6%99%82%e3%81%aedenojson%e3%81%ae%e4%bd%9c%e6%88%90%e3%81%8c%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=jsrパッケージ追加時のdeno.jsonの作成がサポート>jsrパッケージ追加時の<code>deno.json</code>の作成がサポート</a></li><li><a href=#%e3%82%a8%e3%82%a4%e3%83%aa%e3%82%a2%e3%82%b9%e3%81%ae%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=エイリアスのサポート>エイリアスのサポート</a></li><li><a href=#%e5%ae%89%e5%ae%9a%e6%80%a7%e3%81%ae%e6%94%b9%e5%96%84 aria-label=安定性の改善>安定性の改善</a></li></ul></li><li><a href=#deno-remove aria-label="deno remove"><code>deno remove</code></a><ul><li><a href=#npm%e3%81%aa%e3%81%a9%e3%81%ae%e3%83%97%e3%83%ac%e3%83%95%e3%82%a3%e3%83%83%e3%82%af%e3%82%b9%e3%81%ae%e6%8c%87%e5%ae%9a%e3%81%8c%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=npm:などのプレフィックスの指定がサポート><code>npm:</code>などのプレフィックスの指定がサポート</a></li></ul></li><li><a href=#--allow-scripts aria-label=--allow-scripts><code>--allow-scripts</code></a><ul><li><a href=#deno-run%e3%81%aa%e3%81%a9%e3%81%ae%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label="deno runなどのサポート"><code>deno run</code>などのサポート</a></li></ul></li><li><a href=#--allow-import aria-label=--allow-import><code>--allow-import</code></a></li><li><a href=#deno-lsp aria-label="deno lsp"><code>deno lsp</code></a><ul><li><a href=#%e7%9b%b8%e5%af%be%e5%bd%a2%e5%bc%8f%e3%81%ae%e3%83%9e%e3%83%83%e3%83%94%e3%83%b3%e3%82%b0%e3%81%b8%e3%81%ae%e8%a3%9c%e5%ae%8c aria-label=相対形式のマッピングへの補完>相対形式のマッピングへの補完</a></li><li><a href=#denodidrefreshdenoconfigurationtreenotification%e3%81%8c%e5%ae%9f%e8%a3%85 aria-label=deno/didRefreshDenoConfigurationTreenotificationが実装><code>deno/didRefreshDenoConfigurationTree</code>notificationが実装</a></li></ul></li><li><a href=#deno-test---doc aria-label="deno test --doc"><code>deno test --doc</code></a><ul><li><a href=#default-export%e3%81%a8named-export%e3%81%ae%e8%a1%9d%e7%aa%81%e3%81%ab%e9%96%a2%e3%81%99%e3%82%8b%e3%83%8f%e3%83%b3%e3%83%89%e3%83%aa%e3%83%b3%e3%82%b0 aria-label="default exportとnamed exportの衝突に関するハンドリング">default exportとnamed exportの衝突に関するハンドリング</a></li></ul></li><li><a href=#deno-repl aria-label="deno repl"><code>deno repl</code></a><ul><li><a href=#json%e3%83%95%e3%82%a1%e3%82%a4%e3%83%ab%e3%82%92import%e3%81%a7%e3%81%8d%e3%81%aa%e3%81%84%e5%95%8f%e9%a1%8c%e3%81%8c%e4%bf%ae%e6%ad%a3 aria-label=JSONファイルをimportできない問題が修正>JSONファイルを<code>import</code>できない問題が修正</a></li><li><a href=#--check%e3%82%aa%e3%83%97%e3%82%b7%e3%83%a7%e3%83%b3%e3%81%ae%e5%89%8a%e9%99%a4 aria-label=--checkオプションの削除><code>--check</code>オプションの削除</a></li></ul></li><li><a href=#deno-info---json aria-label="deno info --json"><code>deno info --json</code></a><ul><li><a href=#npm%e3%83%91%e3%83%83%e3%82%b1%e3%83%bc%e3%82%b8%e3%81%ab%e9%96%a2%e3%81%99%e3%82%8b%e4%bf%ae%e6%ad%a3 aria-label=npmパッケージに関する修正>npmパッケージに関する修正</a></li></ul></li></ul></li><li><a href=#denootel aria-label=@deno/otel><code>@deno/otel</code></a></li><li><a href=#stdkv%e3%81%ae%e8%bf%bd%e5%8a%a0%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6 aria-label=@std/kvの追加について><code>@std/kv</code>の追加について</a></li><li><a href=#esbuild_deno_loader-v0110 aria-label="esbuild_deno_loader v0.11.0">esbuild_deno_loader v0.11.0</a></li></ul></div></details></div><div class=post-content><h2 id=deno-v201v202>Deno v2.0.1/v2.0.2<a hidden class=anchor aria-hidden=true href=#deno-v201v202>#</a></h2><p>Denoのv2.0.1とv2.0.2がリリースされています:</p><ul><li><a href=https://github.com/denoland/deno/releases/tag/v2.0.1>v2.0.1</a></li><li><a href=https://github.com/denoland/deno/releases/tag/v2.0.2>v2.0.2</a></li></ul><h3 id=nodejs互換性の改善>Node.js互換性の改善<a hidden class=anchor aria-hidden=true href=#nodejs互換性の改善>#</a></h3><p>CommonJSサポートの改善やWrangler/SvelteKit/Next.jsなどに関するサポートの改善が行われています。</p><h4 id=--unstable-detect-cjs><code>--unstable-detect-cjs</code><a hidden class=anchor aria-hidden=true href=#--unstable-detect-cjs>#</a></h4><p><code>--unstable-detect-cjs</code>という新しいオプションが追加されています (<code>deno.json</code>で<code>"unstable": ["detect-cjs"]</code>を指定して有効化することも可能です)</p><p>このオプションを指定すると、<code>package.json</code>で<code>"type": commonjs</code>が指定されたパッケージの<code>.js</code>ファイルが<code>.cjs</code>ファイル(CommonJS形式)として認識されます。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26149>feat(unstable): <code>--unstable-detect-cjs</code> for respecting explicit <code>"type": "commonjs"</code> #26149</a></li></ul><h4 id=nodenet-socketsetnodelayが実装><code>node:net</code>: <code>Socket#setNoDelay</code>が実装<a hidden class=anchor aria-hidden=true href=#nodenet-socketsetnodelayが実装>#</a></h4><p>新規APIとして<code>Socket#setNoDelay</code>が実装されました。</p><p>このAPIによって<a href=https://github.com/brianc/node-postgres>node-postgres</a>などのパフォーマンスの改善が期待されるようです。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26263>fix(ext/node): implement TCP.setNoDelay #26263</a></li></ul><h4 id=nodechild_process-forkでの--no-warningsのサポート><code>node:child_process</code>: <code>fork()</code>での<code>--no-warnings</code>のサポート<a hidden class=anchor aria-hidden=true href=#nodechild_process-forkでの--no-warningsのサポート>#</a></h4><p><code>fork()</code>の<code>execArgv</code>オプションでNode.jsの<code>--no-warnings</code>がサポートされています (Denoの<code>--quiet</code>オプションにマッピングされます)</p><p>Wranglerを動作させるための対応のようです。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26288>fix(child_process): map node <code>--no-warnings</code> flag to <code>--quiet</code> #26288</a></li></ul><h4 id=nodedns-lookupの互換性の改善><code>node:dns</code>: <code>lookup()</code>の互換性の改善<a hidden class=anchor aria-hidden=true href=#nodedns-lookupの互換性の改善>#</a></h4><p><code>lookup()</code>で<code>localhost</code>を解決する際の振る舞いがNode.jsと一致するよう挙動が改善されています。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26264>fix(ext/node): fix dns.lookup result ordering #26264</a></li></ul><h4 id=nodeprocess><code>node:process</code><a hidden class=anchor aria-hidden=true href=#nodeprocess>#</a></h4><h5 id=windows-未サポートのシグナルの取り扱いの変更>(Windows) 未サポートのシグナルの取り扱いの変更<a hidden class=anchor aria-hidden=true href=#windows-未サポートのシグナルの取り扱いの変更>#</a></h5><p><a href=https://uki00a.github.io/deno-weekly/articles/2024/09/22.html>Windowsにおいて未サポートのシグナルに対して警告を発する</a>のではなく、単純に無視されるように振る舞いが変更されています。パッケージによっては多くの警告が出てしまうこともあったようです。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26332>fix: don&rsquo;t warn on ignored signals on windows #26332</a></li></ul><h5 id=processstdoutisttyへの書き込みがサポート><code>process.stdout.isTTY</code>への書き込みがサポート<a hidden class=anchor aria-hidden=true href=#processstdoutisttyへの書き込みがサポート>#</a></h5><p><a href=https://github.com/fi3ework/vite-plugin-checker>vite-plugin-checker</a>がこの挙動に依存していたようです</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26130>fix(node): make <code>process.stdout.isTTY</code> writable #26130</a></li></ul><h4 id=nodeutil-styletextが公開><code>node:util</code>: <code>styleText</code>が公開<a hidden class=anchor aria-hidden=true href=#nodeutil-styletextが公開>#</a></h4><p><code>styleText</code>が実装はされていたものの<code>export</code>されていなかったので、ユーザーが利用できるよう改めて<code>export</code>されています。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26194>fix(node/util): export <code>styleText</code> from <code>node:util</code> #26194</a></li></ul><h4 id=nodefs-copyfileのバグ修正><code>node:fs</code>: <code>copyFile()</code>のバグ修正<a hidden class=anchor aria-hidden=true href=#nodefs-copyfileのバグ修正>#</a></h4><p><code>copyFile()</code>の<code>mode</code>引数に<code>constants.COPYFILE_EXCL</code>が指定された際に、宛先のファイルが存在しないとエラーが発生する問題が修正されています (Next.jsのStatic Exportsでエラーが発生してしまっていたようです)</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26360>fix(node/fs): copyFile with <code>COPYFILE_EXCL</code> should not throw if the destination doesn&rsquo;t exist #26360</a></li></ul><h4 id=nodehttp-serverresponseでのヘッダーの正規化><code>node:http</code>: <code>ServerResponse</code>でのヘッダーの正規化<a hidden class=anchor aria-hidden=true href=#nodehttp-serverresponseでのヘッダーの正規化>#</a></h4><p><code>setHeader()</code>でヘッダーを設定する際に、正規化された状態でヘッダーが保持されるように修正されています。正規化されていないことにより、<code>removeHeader()</code>によって意図せずヘッダーが削除されないことがあったようです。(SvelteKitなど向けの対応のようです)</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26339>fix(node/http): normalize header names in <code>ServerResponse</code> #26339</a></li></ul><h4 id=nodecrypto-timingsafeequalの改善><code>node:crypto</code>: <code>timingSafeEqual()</code>の改善<a hidden class=anchor aria-hidden=true href=#nodecrypto-timingsafeequalの改善>#</a></h4><p><code>timingSafeEqual()</code>で<code>ArrayBuffer</code>の<code>byteOffset</code>が考慮されるように実装が改善されています。</p><p><a href=https://github.com/chrisveness/scrypt-kdf>scrypt-kdf</a>パッケージの利用に当たって必要な変更のようです。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26292>fix(ext/node): timingSafeEqual account for AB byteOffset #26292</a></li></ul><h3 id=deno-adddeno-install><code>deno add</code>/<code>deno install</code><a hidden class=anchor aria-hidden=true href=#deno-adddeno-install>#</a></h3><h4 id=パッケージバージョンを明示した際の振る舞いの変更>パッケージバージョンを明示した際の振る舞いの変更<a hidden class=anchor aria-hidden=true href=#パッケージバージョンを明示した際の振る舞いの変更>#</a></h4><p>以下のように<code>deno add</code>でパッケージのバージョンを明示した際に、<code>deno.json</code>の<code>imports</code>に<code>^</code>付きでバージョンが設定されないよう振る舞いが変更されています:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno add npm:chalk@5.3.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Deno v2.0.1</span>
</span></span><span style=display:flex><span>$ cat deno.json | jq <span style=color:#e6db74>&#39;.imports.chalk&#39;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;npm:chalk@5.3.0&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Deno v2.0.0</span>
</span></span><span style=display:flex><span>$ cat deno.json | jq <span style=color:#e6db74>&#39;.imports.chalk&#39;</span>
</span></span><span style=display:flex><span><span style=color:#e6db74>&#34;npm:chalk@^5.3.0&#34;</span>
</span></span></code></pre></div><hr><ul><li><a href=https://github.com/denoland/deno/pull/26302>fix(add): exact version should not have range <code>^</code> specifier #26302</a></li></ul><h4 id=jsrパッケージ追加時のdenojsonの作成がサポート>jsrパッケージ追加時の<code>deno.json</code>の作成がサポート<a hidden class=anchor aria-hidden=true href=#jsrパッケージ追加時のdenojsonの作成がサポート>#</a></h4><p><code>deno add</code>でjsrパッケージを追加すると<code>deno.json</code>が自動で作成されるよう挙動が改善されています。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26275>fix(add): create deno.json when running <code>deno add jsr:&lt;pkg></code> #26275</a></li></ul><h4 id=エイリアスのサポート>エイリアスのサポート<a hidden class=anchor aria-hidden=true href=#エイリアスのサポート>#</a></h4><p><code>deno add</code>または<code>deno install</code>でパッケージをインストールする際のエイリアスの指定がサポートされています:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># `&lt;alias&gt;@npm:&lt;package&gt;`の形式で指定できます</span>
</span></span><span style=display:flex><span>$ deno add chalk5@npm:chalk@^5
</span></span></code></pre></div><p>以下のようにエイリアスによってパッケージを参照できます:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>import</span> <span style=color:#a6e22e>chalk</span> <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;chalk5&#34;</span>;
</span></span></code></pre></div><hr><ul><li><a href=https://github.com/denoland/deno/pull/26246>fix(install): support installing npm package with alias #26246</a></li></ul><h4 id=安定性の改善>安定性の改善<a hidden class=anchor aria-hidden=true href=#安定性の改善>#</a></h4><p>npmパッケージなどのダウンロード失敗時にリトライが行われるよう挙動が改善されています。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26278>fix(install): retry downloads of registry info / tarballs #26278</a></li></ul><h3 id=deno-remove><code>deno remove</code><a hidden class=anchor aria-hidden=true href=#deno-remove>#</a></h3><h4 id=npmなどのプレフィックスの指定がサポート><code>npm:</code>などのプレフィックスの指定がサポート<a hidden class=anchor aria-hidden=true href=#npmなどのプレフィックスの指定がサポート>#</a></h4><p><code>deno remove</code>コマンドで<code>jsr:</code>や<code>npm:</code>プレフィックスを指定してパッケージを削除できるよう改善されています:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno remove npm:chalk
</span></span></code></pre></div><hr><ul><li><a href=https://github.com/denoland/deno/pull/26298>fix(cli): consolidate pkg parser for install & remove #26298</a></li></ul><h3 id=--allow-scripts><code>--allow-scripts</code><a hidden class=anchor aria-hidden=true href=#--allow-scripts>#</a></h3><h4 id=deno-runなどのサポート><code>deno run</code>などのサポート<a hidden class=anchor aria-hidden=true href=#deno-runなどのサポート>#</a></h4><p><code>deno run</code>や<code>deno add</code>などのコマンドでも<a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.45.html><code>--allow-scripts</code></a>がサポートされています (今までは<code>deno cache</code>と<code>deno install</code>でのみサポートされていました)</p><p><code>nodeModulesDir: "auto"</code>が設定されている場合の体験を改善することが目的のようです。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26075>feat(npm): support <code>--allow-scripts</code> on <code>deno run</code> (and <code>deno add</code>, <code>deno test</code>, etc)</a></li></ul><h3 id=--allow-import><code>--allow-import</code><a hidden class=anchor aria-hidden=true href=#--allow-import>#</a></h3><p><code>Worker</code>コンストラクタの<a href=https://github.com/denoland/deno/blob/v2.0.2/cli/tsc/dts/lib.deno.unstable.d.ts#L1266><code>deno</code></a>オプション(<code>--unstable-worker-options</code>が必要)で<code>permissions.import</code>(<a href=https://uki00a.github.io/deno-weekly/articles/2024/09/29.html><code>--allow-import</code></a>)がサポートされています。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26101>fix(unstable/worker): ensure import permissions are passed #26101</a></li></ul><h3 id=deno-lsp><code>deno lsp</code><a hidden class=anchor aria-hidden=true href=#deno-lsp>#</a></h3><h4 id=相対形式のマッピングへの補完>相対形式のマッピングへの補完<a hidden class=anchor aria-hidden=true href=#相対形式のマッピングへの補完>#</a></h4><p>以下のようなマッピングに対してうまく補完が動作しない問題が改善されています:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;imports&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;$/&#34;</span>: <span style=color:#e6db74>&#34;./src/&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><hr><ul><li><a href=https://github.com/denoland/deno/pull/26137>fix(lsp): relative completions for bare import-mapped specifiers #26137</a></li></ul><h4 id=denodidrefreshdenoconfigurationtreenotificationが実装><code>deno/didRefreshDenoConfigurationTree</code>notificationが実装<a hidden class=anchor aria-hidden=true href=#denodidrefreshdenoconfigurationtreenotificationが実装>#</a></h4><p>プロジェクトに含まれる各<code>deno.json</code>や<code>package.json</code>のパスなどを通知してくれるようです。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26325>Reland feat(lsp): deno/didRefreshDenoConfigurationTree notifications #26325</a></li></ul><h3 id=deno-test---doc><code>deno test --doc</code><a hidden class=anchor aria-hidden=true href=#deno-test---doc>#</a></h3><h4 id=default-exportとnamed-exportの衝突に関するハンドリング>default exportとnamed exportの衝突に関するハンドリング<a hidden class=anchor aria-hidden=true href=#default-exportとnamed-exportの衝突に関するハンドリング>#</a></h4><p><a href=https://uki00a.github.io/deno-weekly/articles/2024/09/22.html><code>deno test --doc</code></a>でdefault exportとnamed exportで同じ名前を持つ要素が<code>export</code>されたモジュールに対するコードブロックのテストをする際に、named exportの方が優先されるよう挙動が修正されています。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26112>fix(cli): named export takes precedence over default export in doc testing #26112</a></li></ul><h3 id=deno-repl><code>deno repl</code><a hidden class=anchor aria-hidden=true href=#deno-repl>#</a></h3><h4 id=jsonファイルをimportできない問題が修正>JSONファイルを<code>import</code>できない問題が修正<a hidden class=anchor aria-hidden=true href=#jsonファイルをimportできない問題が修正>#</a></h4><p><code>deno repl</code>において<a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.37.html>Import Attributes</a>によるJSONファイルの<code>import</code>ができない問題が解消されています。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26053>fix(repl): importing json files #26053</a></li></ul><h4 id=--checkオプションの削除><code>--check</code>オプションの削除<a hidden class=anchor aria-hidden=true href=#--checkオプションの削除>#</a></h4><p><code>deno repl</code>コマンドから<code>--check</code>と<code>--no-check</code>オプションが削除されています。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/26140>fix(repl): remove check flags #26140</a></li></ul><h3 id=deno-info---json><code>deno info --json</code><a hidden class=anchor aria-hidden=true href=#deno-info---json>#</a></h3><h4 id=npmパッケージに関する修正>npmパッケージに関する修正<a hidden class=anchor aria-hidden=true href=#npmパッケージに関する修正>#</a></h4><p><code>deno info --json</code>でnpmパッケージに関する表示が改善されています。レジストリのURL(<code>registryUrl</code>)の追加などが行われているようです。</p><hr><ul><li><a href=https://github.com/denoland/deno/pull/25906>feat(cli): improve deno info output for npm packages #25906</a></li></ul><h2 id=denootel><code>@deno/otel</code><a hidden class=anchor aria-hidden=true href=#denootel>#</a></h2><p>Deno公式から<code>@deno/otel</code>というパッケージが公開されているようです:</p><ul><li><a href=https://github.com/denoland/otel><code>@deno/otel</code></a></li></ul><p><a href=https://github.com/open-telemetry>OpenTelemetry</a>のエクスポーターとして機能してくれるパッケージのようなのですが、<a href=https://github.com/denoland/otel/blob/4b57aaee6ec00dfa07fbe905eda2f42dcbc3cb1c/src/index.ts#L20><code>Deno.tracing</code></a>というDeno本体にはおそらくまだ入っていないAPIが利用されており、もしかしたら将来的に追加される可能性があるのかもしれません。</p><h2 id=stdkvの追加について><code>@std/kv</code>の追加について<a hidden class=anchor aria-hidden=true href=#stdkvの追加について>#</a></h2><p><code>deno_std</code>に<code>@std/kv</code>パッケージを追加することが提案されています (<a href=https://uki00a.github.io/deno-weekly/articles/2024/01/28.html><code>deno_std</code>にDeno KVに関するパッケージを追加することは以前にも一度検討されていました</a>)</p><ul><li><a href=https://github.com/denoland/std/issues/6123>Proposal: Add @std/kv #6123</a></li></ul><p>内容としては<a href=https://github.com/kitsonk/kv-toolbox><code>kv-toolbox</code></a>が提供している以下のモジュールの機能を<code>@std/kv</code>から提供することが提案されています:</p><ul><li><a href=https://github.com/kitsonk/kv-toolbox/blob/0.21.1/json.ts><code>@kitsonk/kv-toolbox/json</code></a> - Deno KVが取り扱う型をJSONでエンコード/デコードするためのモジュール</li><li><a href=https://github.com/kitsonk/kv-toolbox/blob/0.21.1/size_of.ts><code>@kitsonk/kv-toolbox/size_of</code></a> - Deno KVに格納される値のバイトサイズを推測するためのユーティリティー</li></ul><h2 id=esbuild_deno_loader-v0110>esbuild_deno_loader v0.11.0<a hidden class=anchor aria-hidden=true href=#esbuild_deno_loader-v0110>#</a></h2><p><a href=https://github.com/lucacasonato/esbuild_deno_loader/releases/tag/0.11.0>esbuild_deno_loader v0.11.0</a>がリリースされています。</p><p>Deno v2と<a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.45.html>Deno workspaces</a>や<code>deno.json</code>の自動検出などのサポートが追加されています。</p></div><footer class=post-footer><ul class=post-tags><li><a href=https://uki00a.github.io/deno-weekly/tags/deno.html>deno</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/deno-kv.html>Deno KV</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/deno_std.html>deno_std</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/esbuild.html>esbuild</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/opentelemetry.html>OpenTelemetry</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2026 <a href=https://uki00a.github.io/deno-weekly/>週刊Deno</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>