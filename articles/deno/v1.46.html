<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>Deno v1.46 | 週刊Deno</title><meta name=keywords content="Deno,JSR"><meta name=description content="Deno v1.46がリリース。Deno v2.0のリリースについて, deno cleanコマンドが追加, deno removeコマンドが追加, deno <entrypoint>, deno run <task>, パーミッションフラグの短縮形式の導入, deno serve --parallel, deno fmtでYAML/CSS/HTML/Vueなどの形式がサポート, deno compileがコード署名に対応, deno lintにno-node-globalsルールが追加, deno upgradeがRCバージョンに対応, deno addがdist tagsに対応, deno publishでライセンスが未定義の場合にエラーが発生するように, deno checkとdeno cacheがglob形式に対応, deno.lock v4, JSRパッケージへのパッチ, HMRの安定化, --env-fileが追加, ヘルプの改善, Node.js互換性の改善 (LinuxとMac限定でPlaywrightが動くように), 廃止されたTemporal APIの削除, Deno.watchFsでrenameイベントがサポート, fetchのbodyでAsyncIterableがサポート, など"><meta name=author content><link rel=canonical href=https://uki00a.github.io/deno-weekly/articles/deno/v1.46.html><link crossorigin=anonymous href=/deno-weekly/assets/css/stylesheet.6a98292fb8fa8cf0f3ba4042d4b75515c04267550f3ad49ff6271b5af9562443.css integrity="sha256-apgpL7j6jPDzukBC1LdVFcBCZ1UPOtSf9icbWvlWJEM=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/deno-weekly/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://raw.githubusercontent.com/uki00a/blog/master/src/assets/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://uki00a.github.io/deno-weekly/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://uki00a.github.io/deno-weekly/favicon-32x32.png><link rel=apple-touch-icon href=https://uki00a.github.io/deno-weekly/apple-touch-icon.png><link rel=mask-icon href=https://uki00a.github.io/deno-weekly/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><meta property="og:image" content="https://raw.githubusercontent.com/uki00a/blog/master/src/assets/avatar.png"><meta property="twitter:image" content="https://raw.githubusercontent.com/uki00a/blog/master/src/assets/avatar.png"><meta name=twitter:site content="@uki00a"><script async src="https://www.googletagmanager.com/gtag/js?id=G-MK2K2MRMBF"></script>
<script>var doNotTrack=!1;if(!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-MK2K2MRMBF",{anonymize_ip:!1})}</script><meta property="og:title" content="Deno v1.46"><meta property="og:description" content="Deno v1.46がリリース。Deno v2.0のリリースについて, deno cleanコマンドが追加, deno removeコマンドが追加, deno <entrypoint>, deno run <task>, パーミッションフラグの短縮形式の導入, deno serve --parallel, deno fmtでYAML/CSS/HTML/Vueなどの形式がサポート, deno compileがコード署名に対応, deno lintにno-node-globalsルールが追加, deno upgradeがRCバージョンに対応, deno addがdist tagsに対応, deno publishでライセンスが未定義の場合にエラーが発生するように, deno checkとdeno cacheがglob形式に対応, deno.lock v4, JSRパッケージへのパッチ, HMRの安定化, --env-fileが追加, ヘルプの改善, Node.js互換性の改善 (LinuxとMac限定でPlaywrightが動くように), 廃止されたTemporal APIの削除, Deno.watchFsでrenameイベントがサポート, fetchのbodyでAsyncIterableがサポート, など"><meta property="og:type" content="article"><meta property="og:url" content="https://uki00a.github.io/deno-weekly/articles/deno/v1.46.html"><meta property="article:section" content="articles"><meta property="article:published_time" content="2024-08-25T00:00:00+00:00"><meta property="article:modified_time" content="2024-08-25T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Deno v1.46"><meta name=twitter:description content="Deno v1.46がリリース。Deno v2.0のリリースについて, deno cleanコマンドが追加, deno removeコマンドが追加, deno <entrypoint>, deno run <task>, パーミッションフラグの短縮形式の導入, deno serve --parallel, deno fmtでYAML/CSS/HTML/Vueなどの形式がサポート, deno compileがコード署名に対応, deno lintにno-node-globalsルールが追加, deno upgradeがRCバージョンに対応, deno addがdist tagsに対応, deno publishでライセンスが未定義の場合にエラーが発生するように, deno checkとdeno cacheがglob形式に対応, deno.lock v4, JSRパッケージへのパッチ, HMRの安定化, --env-fileが追加, ヘルプの改善, Node.js互換性の改善 (LinuxとMac限定でPlaywrightが動くように), 廃止されたTemporal APIの削除, Deno.watchFsでrenameイベントがサポート, fetchのbodyでAsyncIterableがサポート, など"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Deno v1.46","item":"https://uki00a.github.io/deno-weekly/articles/deno/v1.46.html"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"Deno v1.46","name":"Deno v1.46","description":"Deno v1.46がリリース。Deno v2.0のリリースについて, deno cleanコマンドが追加, deno removeコマンドが追加, deno , deno run , パーミッションフラグの短縮形式の導入, deno serve --parallel, deno fmtでYAML/CSS/HTML/Vueなどの形式がサポート, deno compileがコード署名に対応, deno lintにno-node-globalsルールが追加, deno upgradeがRCバージョンに対応, deno addがdist tagsに対応, deno publishでライセンスが未定義の場合にエラーが発生するように, deno checkとdeno cacheがglob形式に対応, deno.lock v4, JSRパッケージへのパッチ, HMRの安定化, --env-fileが追加, ヘルプの改善, Node.js互換性の改善 (LinuxとMac限定でPlaywrightが動くように), 廃止されたTemporal APIの削除, Deno.watchFsでrenameイベントがサポート, fetchのbodyでAsyncIterableがサポート, など","keywords":["Deno","JSR"],"articleBody":"Deno v1.46がリリースされました。\nこの記事では主な変更点などについて解説します。\nDeno v2.0について 今回のv1.46がDeno v1.xにおける最後のリリースのようです。\nDeno v2.0については、正式リリース前にまずはRCバージョンから順次リリースされていく想定のようです (後述のdeno upgradeでもRCバージョンへのアップグレードがサポートされています)\n今回のv1.46では、おそらくv2.0に向けて、CLIのオプションやUIに関する様々な改善が行われています。\nCLI deno clean deno cleanという新しいコマンドが追加されました。\nこのコマンドを実行すると、Denoのグローバルキャッシュディレクトリ(DENO_DIR)を削除してくれます。\ndeno remove deno removeという新しいコマンドが追加されました。\n引数で指定されたパッケージの定義がdeno.jsonとdeno.lockから削除されます。\n# `deno.json`の`imports`と`deno.lock`から`@std/assert`を削除します $ deno remove @std/assert deno  deno runコマンドにおけるrunの指定の省略がサポートされました。\n# `deno run --allow-read main.ts`と同様に動作します $ deno --allow-read main.ts deno run  deno runコマンドでdeno.jsonで定義されたタスクの実行がサポートされました。\n例えば、以下のように実行すると、deno.jsonのtasks.devで定義されたスクリプトが実行されます (deno runの引数としてJavaScriptまたはTypeScriptファイルを指定した場合は、今まで通りそのスクリプトが実行されます)\n$ deno run dev この変更に合わせて、エントリポイントを指定せずにdeno runコマンドを実行した場合、deno.jsonのtasksで定義されたスクリプトの一覧を表示する機能が追加されています (引数なしでdeno taskコマンドを実行した場合と同じ振る舞いをします)\n$ deno run Available tasks: - dev  deno serve --watch -R main.ts パーミッションフラグの短縮形式 各種--allow-*オプションの短縮形式がサポートされました:\n   パーミッションフラグ 短縮形     --allow-read -R   --allow-write -W   --allow-net -N   --allow-env -E   --allow-sys -S    例えば、以下はdeno run --allow-read --allow-env main.tsと同等です:\n$ deno -ER main.ts --allow-runや--allow-ffiなど、短縮形式が導入されていないフラグもあり、--allow-runについては-Xという形式で導入が提案されているようです。\n Short flag for --allow-run (-X?) (#25201)  deno serve --parallelオプション deno serveで--parallelオプションがサポートされています。\nこのオプションが指定された場合、deno serveはコア数またはDENO_JOBSで指定された値に基づいて、リクエストを複数のワーカーへ分散してくれます。\n$ DENO_JOBS=2 deno serve --parallel main.ts deno serve: Listening on http://0.0.0.0:8000/ with 2 threads   Parallelizing Deno Serve  Deno.ServeDefaultExport Deno.ServeDefaultExportという型が追加されています。\ndeno serveのエントリポイントとして指定するモジュールでdefault exportするオブジェクトの型として利用することが想定されています。\nexport default {  fetch(req) {  return new Response(\"OK\");  }, } satisfies Deno.ServeDefaultExport; deno init --serve deno serveと@std/http/routeを使ったプロジェクトのテンプレートを作成してくれます:\n$ deno init --serve  # `deno serve --watch`によって`main.ts`が実行されます $ deno run dev deno fmt YAML/CSS/LESS/Sass/SCSS/HTML/Svelte/Vue/Astroのサポート deno fmtコマンドで以下の形式のファイルがサポートされました:\n YAML CSS LESS Sass SCSS HTML Component (Svelte/Vue/Astro/Angular)  現時点ではまだ実験的機能という扱いのため、これらに対してフォーマットを行う場合は--unstable-*を指定して有効化する必要があります:\n# YAMLファイルをフォーマット $ deno fmt --unstable-yaml test.yml  # HTMLファイルをフォーマット $ deno fmt --unstable-html test.html  # CSSファイルをフォ−マット $ deno fmt --unstable-css test.css  # Vueファイルをフォーマット $ deno fmt --unstable-component Test.vue または、deno.jsonのunstableフィールドによって有効化することも可能です:\n{  \"unstable\": [  \"fmt-yaml\",  \"fmt-html\",  \"fmt-css\",  \"fmt-component\"  ] } deno compile コード署名 MacとWindows向けにdeno compileで生成されたバイナリーへのコード署名がサポートされています。\n--icon Windows向けに--iconオプションによるアイコン(.ico)の設定がサポートされました。\ndeno test --permit-no-files deno testコマンドでテストファイルが見つからなかった際にエラーが発生するのを抑止するための--allow-noneオプションが--permit-no-filesにリネームされました\n--allow-noneはまだ残ってはいるものの、Deno v2.0で削除予定のようです\n--hide-stacktraces --hide-stacktracesオプションが追加されています。このオプションを指定すると、失敗したテストケースのテスト結果においてスタックトレースが表示されなくなります。\n$ deno test --hide-stacktraces --watch= deno testで--watchオプションへのパスの指定がサポートされています。\ndeno lint no-node-globalsルール no-node-globalsルールが導入されました。\nprocessやBufferなどのNode.jsのグローバルAPIへの参照が検出されると、node:processやnode:bufferなどから読み込むことが促されます。\n--ext --extオプションが追加されています。\n標準入力経由でJSXやTSXに対してLintを行いたい場合に使用することが想定されているようです:\n$ some-command | deno lint --ext=jsx - deno upgrade deno upgrade [VERSION] deno upgradeコマンドで--versionオプションを使わずに引数として直接バージョンを指定できるようになりました:\n# v1.46.0へのアップグレード $ deno upgrade 1.46.0  # canaryバージョンへのアップグレード $ deno upgrade canary RCバージョンへのアップグレード RCバージョンへのアップグレードもサポートされています:\n# v1.46.0-rc.0へアップグレード $ deno upgrade v1.46.0-rc.0 deno coverage パンくずリストのサポート deno coverage --htmlでHTMLレポートを生成する際に、パンくずリストが出力されるよう改善されています。\ndeno add dist tagsのサポート npmパッケージをインストールする際のdist tagsの指定がサポートされています:\n$ deno add npm:react@latest ルートのエントリーポイントが未定義のパッケージがサポート @std/testingなどのルートのエントリポイントが未定義のパッケージ(deno.jsonにexports[\".\"]: \"./mod.ts\"のような定義がないパッケージ)をdeno addでインストールしようとすると、エラーが発生する問題が修正されています。\nnpm:の指定漏れに関するエラーメッセージの改善 以下のようなエラーメッセージが出力されます:\n# Deno v1.46 $ deno add react error: jsr:react was not found, but a matching npm package exists. Did you mean `deno add npm:react`? deno publish ライセンスチェック deno publishでライセンスが未定義のパッケージを公開しようとした際に、エラーが発生するように挙動が変更されています。\nこれを回避するためには、deno.jsonまたはjsr.jsonでlicenseフィールドを定義するか、パッケージを公開する際にLICENSEファイルを含める必要があります。\ndeno check \u0026 deno cache glob形式のサポート deno checkとdeno cacheコマンドの引数をglob形式で指定できるように改善されています:\n$ deno check 'tests/**/*.ts' deno.lock deno.jsonのlockフィールドでオブジェクト形式の設定がサポート deno.jsonのlockフィールドでオブジェクトの指定がサポートされました:\n{  \"lock\": {  \"frozen\": true  } } 現状ではfrozenフィールドがサポートされており、trueを指定すると--frozenオプションと同様の効果を発揮します。\ndeno.lock v4 deno.lockの新しいバージョンであるv4が実装されています。\n現状のdeno.lockの形式であるv3よりも軽量化され、git diffなどによって差分が確認しやすくなるよう改善されているようです。\n現時点ではまだ実験的機能という扱いであり、v4を利用するにはDENO_FUTURE=1を指定する必要があります。(Deno v2.0からデフォルトで有効化される想定のようです)\nJSRパッケージへのパッチ 実験的機能として、JSRパッケージにパッチを当てる機能が実装されています。\n feat(unstable): ability to use a local copy of jsr packages (#25068)  この機能を利用する際は、以下のようにdeno.jsonでpatchフィールドを定義します:\n{  \"imports\": {  \"@std/ulid\": \"jsr:@std/ulid@^1.0.0\"  },  \"patch\": [  \"./patches/std_ulid\"  ] } ./patches/std_ulid/deno.jsonには、上記のdeno.jsonのimportsで定義されたバージョン要求にマッチするようにパッケージのメタ情報を定義しておく必要があります:\n{  \"name\": \"@std/ulid\",  \"version\": \"1.0.0\",  \"exports\": {  \".\": \"./mod.js\"  } } このように設定された場合、@std/ulidを読み込む際はjsr:@std/ulid@^1.0.0ではなく、./patches/std_ulid/mod.jsが読み込まれます:\n// `jsr:@std/ulid@^1.0.0`ではなく、`./patches/std_ulid/mod.js`が読み込まれます import * as ulid from \"@std/ulid\"; この機能はまだ実験的機能のため、今後、使い方などが変更される可能性があります。\nHMR --unstable-hmrが--watch-hmrにリネームされ、HMR機能が安定化されました。\n--env-file --env-fileオプションが追加されています。\n振る舞いは--envと全く同じですが、他のランタイムとの一貫性の改善のためにこのオプションが導入されたようです。\nUIの改善 ヘルプの改善 ヘルプの表示が改善されており、関連するオプションごとにグループ化することで、より使い方を確認しやすいように改善されています\nこの改善に伴い、--unstable-*系統のフラグがデフォルトではヘルプに表示されないように挙動が変更されています\nもし--unstable-*について確認したい場合は、--help=unstableを指定する必要があります\n$ deno run --help=unstable ダウンロード時などの進捗表示 npmパッケージのダウンロード時などに進捗状況が表示されるよう改善されています。\ndeno json_reference ヘルプに関する表示の改善に併せて、deno json_referenceという新規コマンドが追加されています。ヘルプの内容をJSON形式で出力してくれるようです。\nNode.js互換性の改善 Playwrightやshelljsなどのパッケージに関するサポートが改善されているようです。\nまた、先程紹介したdeno addでnpmパッケージをインストールする際のdist tagsの指定もサポートされています。\n.npmrc .npmrcでのusernameと_passwordの設定がサポートされました。\n非推奨化パッケージの警告 非推奨化されたnpmパッケージのインストール時に警告が表示されるように改善されています。\n組み込みパッケージの改善 node:vm node:vmの再実装が行われており、Node.jsとの互換性が改善されています。\nまた、compileFunction()やScript#createCachedData, Script.sourceMapURLなどが実装されています。\nnode:crypto 互換性の改善のためにnode:cryptoが再実装されています。これに合わせて、様々なアルゴリズムのサポートが追加されています (feat(ext/node): rewrite crypto keys (#24463))\nまた、新しく以下のAPIが実装されています:\n Cipher#setAutoPadding X509Certificate#publicKey diffieHellman()  node:child_process spawn()などのstdioオプションに4つ以上の要素が設定できるように改善されています。この改善により、MacとLinux限定でPlaywrightが動作するようです。\nまた、child_process.execFileなどでパッケージ内に含まれるスクリプトを実行するようなnpmパッケージがあった場合、意図せぬ動作をする問題が解消されています。(shelljsなどのパッケージのサポートを想定した変更のようです)\nnode:fs read()とwrite()でUint8Array以外のTypedArrayを渡せるように改善されています。\n破壊的変更 廃止されたTemporal APIが削除 Temporal APIに関して、廃止された以下のAPIが削除されています (#24836)\n Temporal.Instant.fromEpochSeconds() Temporal.Instant.fromEpochMicroseconds() Temporal.Instant.epochSeconds Temporal.Instant.epochMicroseconds Temporal.PlainDate#getCalendar Temporal.PlainDateTime#getCalendar Temporal.PlainDateTime#withPlainDate Temporal.PlainDateTime#toPlainYearMonth Temporal.PlainDateTime#toPlainMonthDay Temporal.PlainMonthDay#getCalendar Temporal.PlainTime#toPlainDateTime Temporal.PlainTime#toZonedDateTime Temporal.TimeZoneProtocol#getNextTransition Temporal.TimeZoneProtocol#getPreviousTransition Temporal.TimeZone#equals Temporal.TimeZone#getNextTransition Temporal.TimeZone#getPreviousTransition Temporal.PlainYearMonth#getCalendar Temporal.ZonedDateTime#getTimeZone Temporal.ZonedDateTime#getCalendar Temporal.ZonedDateTime#withPlainDate Temporal.ZonedDateTime#toPlainYearMonth Temporal.ZonedDateTime#toPlainMonthDay Temporal.Now.zonedDateTime Temporal.Now.plainDateTime Temporal.Now.plainDate  WebAPU GPUAdapter#requestAdapterInfoが削除され、代わりにGPUAdapter.infoが追加されています (#24783)\nImport Assertions Import Assertionsの使用時に警告が表示されるようになりました。\nImport Assertionsは削除予定のため、Import Attributesへの移行が推奨されます。\nDeno API Deno.watchFs Deno.watchFsでrenameイベントがサポートされました。\nWeb API fetch() fetchのbodyでAsyncIterableの指定がサポートされています:\nimport { createReadStream } from \"node:fs\";  const stream = createReadStream(\"./data.txt\"); const res = await fetch(\"http://localhost:8000/upload\", {  method: \"POST\",  body: stream }); URLPattern ignoreCaseオプションとhasRegExpGroupsプロパティーがサポートされています。(#24741)\nV8 Denoの内部で使用されているV8がv12.9へアップデートされています。\n参考  Deno 1.46: The Last 1.x Release https://github.com/denoland/deno/releases/tag/v1.46.0  ","wordCount":"538","inLanguage":"en","datePublished":"2024-08-25T00:00:00Z","dateModified":"2024-08-25T00:00:00Z","mainEntityOfPage":{"@type":"WebPage","@id":"https://uki00a.github.io/deno-weekly/articles/deno/v1.46.html"},"publisher":{"@type":"Organization","name":"週刊Deno","logo":{"@type":"ImageObject","url":"https://raw.githubusercontent.com/uki00a/blog/master/src/assets/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://uki00a.github.io/deno-weekly/ accesskey=h title="週刊Deno (Alt + H)">週刊Deno</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://uki00a.github.io/deno-weekly/tags.html title=タグ><span><i class="fa fa-heart"></i>タグ</span></a></li><li><a href=https://uki00a.github.io/deno-weekly/categories.html title=カテゴリー><span><i class="fa fa-heart"></i>カテゴリー</span></a></li><li><a href=https://uki00a.github.io/deno-weekly/gallery.html title=ギャラリー><span><i class="fa fa-road"></i>ギャラリー<span class=alert></span></span></a></li><li><a href=https://uki00a.github.io/deno-weekly/index.xml title="RSS feed"><span><i class="fa fa-road"></i>RSS feed<span class=alert></span></span></a></li><li><a href=https://uki00a.github.io/deno-weekly/about.html title=About><span><i class="fa fa-road"></i>About<span class=alert></span></span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class=post-title>Deno v1.46</h1><div class=post-description>Deno v1.46がリリース。Deno v2.0のリリースについて, deno cleanコマンドが追加, deno removeコマンドが追加, deno &lt;entrypoint>, deno run &lt;task>, パーミッションフラグの短縮形式の導入, deno serve --parallel, deno fmtでYAML/CSS/HTML/Vueなどの形式がサポート, deno compileがコード署名に対応, deno lintにno-node-globalsルールが追加, deno upgradeがRCバージョンに対応, deno addがdist tagsに対応, deno publishでライセンスが未定義の場合にエラーが発生するように, deno checkとdeno cacheがglob形式に対応, deno.lock v4, JSRパッケージへのパッチ, HMRの安定化, --env-fileが追加, ヘルプの改善, Node.js互換性の改善 (LinuxとMac限定でPlaywrightが動くように), 廃止されたTemporal APIの削除, Deno.watchFsでrenameイベントがサポート, fetchのbodyでAsyncIterableがサポート, など</div><div class=post-meta><span title="2024-08-25 00:00:00 +0000 UTC">August 25, 2024</span></div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><ul><li><a href=#deno-v20%e3%81%ab%e3%81%a4%e3%81%84%e3%81%a6 aria-label="Deno v2.0について">Deno v2.0について</a></li><li><a href=#cli aria-label=CLI>CLI</a><ul><li><a href=#deno-clean aria-label="deno clean"><code>deno clean</code></a></li><li><a href=#deno-remove aria-label="deno remove"><code>deno remove</code></a></li><li><a href=#deno-entrypoint aria-label="deno &amp;lt;entrypoint&amp;gt;"><code>deno &lt;entrypoint></code></a></li><li><a href=#deno-run-task aria-label="deno run &amp;lt;task&amp;gt;"><code>deno run &lt;task></code></a></li><li><a href=#%e3%83%91%e3%83%bc%e3%83%9f%e3%83%83%e3%82%b7%e3%83%a7%e3%83%b3%e3%83%95%e3%83%a9%e3%82%b0%e3%81%ae%e7%9f%ad%e7%b8%ae%e5%bd%a2%e5%bc%8f aria-label=パーミッションフラグの短縮形式>パーミッションフラグの短縮形式</a></li><li><a href=#deno-serve aria-label="deno serve"><code>deno serve</code></a><ul><li><a href=#--parallel%e3%82%aa%e3%83%97%e3%82%b7%e3%83%a7%e3%83%b3 aria-label=--parallelオプション><code>--parallel</code>オプション</a></li><li><a href=#denoservedefaultexport aria-label=Deno.ServeDefaultExport><code>Deno.ServeDefaultExport</code></a></li><li><a href=#deno-init---serve aria-label="deno init --serve"><code>deno init --serve</code></a></li></ul></li><li><a href=#deno-fmt aria-label="deno fmt"><code>deno fmt</code></a><ul><li><a href=#yamlcsslesssassscsshtmlsveltevueastro%e3%81%ae%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=YAML/CSS/LESS/Sass/SCSS/HTML/Svelte/Vue/Astroのサポート>YAML/CSS/LESS/Sass/SCSS/HTML/Svelte/Vue/Astroのサポート</a></li></ul></li><li><a href=#deno-compile aria-label="deno compile"><code>deno compile</code></a><ul><li><a href=#%e3%82%b3%e3%83%bc%e3%83%89%e7%bd%b2%e5%90%8d aria-label=コード署名>コード署名</a></li><li><a href=#--icon aria-label=--icon><code>--icon</code></a></li></ul></li><li><a href=#deno-test aria-label="deno test"><code>deno test</code></a><ul><li><a href=#--permit-no-files aria-label=--permit-no-files><code>--permit-no-files</code></a></li><li><a href=#--hide-stacktraces aria-label=--hide-stacktraces><code>--hide-stacktraces</code></a></li><li><a href=#--watchpaths aria-label="--watch=&amp;lt;PATHS&amp;gt;"><code>--watch=&lt;PATHS></code></a></li></ul></li><li><a href=#deno-lint aria-label="deno lint"><code>deno lint</code></a><ul><li><a href=#no-node-globals%e3%83%ab%e3%83%bc%e3%83%ab aria-label=no-node-globalsルール><code>no-node-globals</code>ルール</a></li><li><a href=#--ext aria-label=--ext><code>--ext</code></a></li></ul></li><li><a href=#deno-upgrade aria-label="deno upgrade"><code>deno upgrade</code></a><ul><li><a href=#deno-upgrade-version aria-label="deno upgrade [VERSION]"><code>deno upgrade [VERSION]</code></a></li><li><a href=#rc%e3%83%90%e3%83%bc%e3%82%b8%e3%83%a7%e3%83%b3%e3%81%b8%e3%81%ae%e3%82%a2%e3%83%83%e3%83%97%e3%82%b0%e3%83%ac%e3%83%bc%e3%83%89 aria-label=RCバージョンへのアップグレード>RCバージョンへのアップグレード</a></li></ul></li><li><a href=#deno-coverage aria-label="deno coverage"><code>deno coverage</code></a><ul><li><a href=#%e3%83%91%e3%83%b3%e3%81%8f%e3%81%9a%e3%83%aa%e3%82%b9%e3%83%88%e3%81%ae%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=パンくずリストのサポート>パンくずリストのサポート</a></li></ul></li><li><a href=#deno-add aria-label="deno add"><code>deno add</code></a><ul><li><a href=#dist-tags%e3%81%ae%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label="dist tagsのサポート">dist tagsのサポート</a></li><li><a href=#%e3%83%ab%e3%83%bc%e3%83%88%e3%81%ae%e3%82%a8%e3%83%b3%e3%83%88%e3%83%aa%e3%83%bc%e3%83%9d%e3%82%a4%e3%83%b3%e3%83%88%e3%81%8c%e6%9c%aa%e5%ae%9a%e7%be%a9%e3%81%ae%e3%83%91%e3%83%83%e3%82%b1%e3%83%bc%e3%82%b8%e3%81%8c%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=ルートのエントリーポイントが未定義のパッケージがサポート>ルートのエントリーポイントが未定義のパッケージがサポート</a></li><li><a href=#npm%e3%81%ae%e6%8c%87%e5%ae%9a%e6%bc%8f%e3%82%8c%e3%81%ab%e9%96%a2%e3%81%99%e3%82%8b%e3%82%a8%e3%83%a9%e3%83%bc%e3%83%a1%e3%83%83%e3%82%bb%e3%83%bc%e3%82%b8%e3%81%ae%e6%94%b9%e5%96%84 aria-label=npm:の指定漏れに関するエラーメッセージの改善><code>npm:</code>の指定漏れに関するエラーメッセージの改善</a></li></ul></li><li><a href=#deno-publish aria-label="deno publish"><code>deno publish</code></a><ul><li><a href=#%e3%83%a9%e3%82%a4%e3%82%bb%e3%83%b3%e3%82%b9%e3%83%81%e3%82%a7%e3%83%83%e3%82%af aria-label=ライセンスチェック>ライセンスチェック</a></li></ul></li><li><a href=#deno-check--deno-cache aria-label="deno check &amp;amp; deno cache"><code>deno check</code> & <code>deno cache</code></a><ul><li><a href=#glob%e5%bd%a2%e5%bc%8f%e3%81%ae%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=glob形式のサポート>glob形式のサポート</a></li></ul></li><li><a href=#denolock aria-label=deno.lock><code>deno.lock</code></a><ul><li><a href=#denojson%e3%81%aelock%e3%83%95%e3%82%a3%e3%83%bc%e3%83%ab%e3%83%89%e3%81%a7%e3%82%aa%e3%83%96%e3%82%b8%e3%82%a7%e3%82%af%e3%83%88%e5%bd%a2%e5%bc%8f%e3%81%ae%e8%a8%ad%e5%ae%9a%e3%81%8c%e3%82%b5%e3%83%9d%e3%83%bc%e3%83%88 aria-label=deno.jsonのlockフィールドでオブジェクト形式の設定がサポート><code>deno.json</code>の<code>lock</code>フィールドでオブジェクト形式の設定がサポート</a></li><li><a href=#denolock-v4 aria-label="deno.lock v4"><code>deno.lock</code> v4</a></li></ul></li><li><a href=#jsr%e3%83%91%e3%83%83%e3%82%b1%e3%83%bc%e3%82%b8%e3%81%b8%e3%81%ae%e3%83%91%e3%83%83%e3%83%81 aria-label=JSRパッケージへのパッチ>JSRパッケージへのパッチ</a></li><li><a href=#hmr aria-label=HMR>HMR</a></li><li><a href=#--env-file aria-label=--env-file><code>--env-file</code></a></li><li><a href=#ui%e3%81%ae%e6%94%b9%e5%96%84 aria-label=UIの改善>UIの改善</a><ul><li><a href=#%e3%83%98%e3%83%ab%e3%83%97%e3%81%ae%e6%94%b9%e5%96%84 aria-label=ヘルプの改善>ヘルプの改善</a></li><li><a href=#%e3%83%80%e3%82%a6%e3%83%b3%e3%83%ad%e3%83%bc%e3%83%89%e6%99%82%e3%81%aa%e3%81%a9%e3%81%ae%e9%80%b2%e6%8d%97%e8%a1%a8%e7%a4%ba aria-label=ダウンロード時などの進捗表示>ダウンロード時などの進捗表示</a></li></ul></li><li><a href=#deno-json_reference aria-label="deno json_reference"><code>deno json_reference</code></a></li></ul></li><li><a href=#nodejs%e4%ba%92%e6%8f%9b%e6%80%a7%e3%81%ae%e6%94%b9%e5%96%84 aria-label=Node.js互換性の改善>Node.js互換性の改善</a><ul><li><a href=#npmrc aria-label=.npmrc><code>.npmrc</code></a></li><li><a href=#%e9%9d%9e%e6%8e%a8%e5%a5%a8%e5%8c%96%e3%83%91%e3%83%83%e3%82%b1%e3%83%bc%e3%82%b8%e3%81%ae%e8%ad%a6%e5%91%8a aria-label=非推奨化パッケージの警告>非推奨化パッケージの警告</a></li><li><a href=#%e7%b5%84%e3%81%bf%e8%be%bc%e3%81%bf%e3%83%91%e3%83%83%e3%82%b1%e3%83%bc%e3%82%b8%e3%81%ae%e6%94%b9%e5%96%84 aria-label=組み込みパッケージの改善>組み込みパッケージの改善</a><ul><li><a href=#nodevm aria-label=node:vm><code>node:vm</code></a></li><li><a href=#nodecrypto aria-label=node:crypto><code>node:crypto</code></a></li><li><a href=#nodechild_process aria-label=node:child_process><code>node:child_process</code></a></li><li><a href=#nodefs aria-label=node:fs><code>node:fs</code></a></li></ul></li></ul></li><li><a href=#%e7%a0%b4%e5%a3%8a%e7%9a%84%e5%a4%89%e6%9b%b4 aria-label=破壊的変更>破壊的変更</a><ul><li><a href=#%e5%bb%83%e6%ad%a2%e3%81%95%e3%82%8c%e3%81%9ftemporal-api%e3%81%8c%e5%89%8a%e9%99%a4 aria-label="廃止されたTemporal APIが削除">廃止されたTemporal APIが削除</a></li><li><a href=#webapu aria-label=WebAPU>WebAPU</a></li><li><a href=#import-assertions aria-label="Import Assertions">Import Assertions</a></li></ul></li><li><a href=#deno-api aria-label="Deno API">Deno API</a><ul><li><a href=#denowatchfs aria-label=Deno.watchFs><code>Deno.watchFs</code></a></li></ul></li><li><a href=#web-api aria-label="Web API">Web API</a><ul><li><a href=#fetch aria-label=fetch()><code>fetch()</code></a></li><li><a href=#urlpattern aria-label=URLPattern><code>URLPattern</code></a></li></ul></li><li><a href=#v8 aria-label=V8>V8</a></li><li><a href=#%e5%8f%82%e8%80%83 aria-label=参考>参考</a></li></ul></div></details></div><div class=post-content><p>Deno v1.46がリリースされました。</p><p>この記事では主な変更点などについて解説します。</p><h2 id=deno-v20について>Deno v2.0について<a hidden class=anchor aria-hidden=true href=#deno-v20について>#</a></h2><p>今回のv1.46がDeno v1.xにおける最後のリリースのようです。</p><p>Deno v2.0については、正式リリース前にまずはRCバージョンから順次リリースされていく想定のようです (後述の<code>deno upgrade</code>でもRCバージョンへのアップグレードがサポートされています)</p><p>今回のv1.46では、おそらくv2.0に向けて、CLIのオプションやUIに関する様々な改善が行われています。</p><h2 id=cli>CLI<a hidden class=anchor aria-hidden=true href=#cli>#</a></h2><h3 id=deno-clean><code>deno clean</code><a hidden class=anchor aria-hidden=true href=#deno-clean>#</a></h3><p><code>deno clean</code>という新しいコマンドが追加されました。</p><p>このコマンドを実行すると、Denoのグローバルキャッシュディレクトリ(<code>DENO_DIR</code>)を削除してくれます。</p><h3 id=deno-remove><code>deno remove</code><a hidden class=anchor aria-hidden=true href=#deno-remove>#</a></h3><p><code>deno remove</code>という新しいコマンドが追加されました。</p><p>引数で指定されたパッケージの定義が<code>deno.json</code>と<code>deno.lock</code>から削除されます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># `deno.json`の`imports`と`deno.lock`から`@std/assert`を削除します</span>
</span></span><span style=display:flex><span>$ deno remove @std/assert
</span></span></code></pre></div><h3 id=deno-entrypoint><code>deno &lt;entrypoint></code><a hidden class=anchor aria-hidden=true href=#deno-entrypoint>#</a></h3><p><code>deno run</code>コマンドにおける<code>run</code>の指定の省略がサポートされました。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># `deno run --allow-read main.ts`と同様に動作します</span>
</span></span><span style=display:flex><span>$ deno --allow-read main.ts
</span></span></code></pre></div><h3 id=deno-run-task><code>deno run &lt;task></code><a hidden class=anchor aria-hidden=true href=#deno-run-task>#</a></h3><p><code>deno run</code>コマンドで<code>deno.json</code>で定義されたタスクの実行がサポートされました。</p><p>例えば、以下のように実行すると、<code>deno.json</code>の<code>tasks.dev</code>で定義されたスクリプトが実行されます (<code>deno run</code>の引数としてJavaScriptまたはTypeScriptファイルを指定した場合は、今まで通りそのスクリプトが実行されます)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno run dev
</span></span></code></pre></div><p>この変更に合わせて、エントリポイントを指定せずに<code>deno run</code>コマンドを実行した場合、<code>deno.json</code>の<code>tasks</code>で定義されたスクリプトの一覧を表示する機能が追加されています (引数なしで<code>deno task</code>コマンドを実行した場合と同じ振る舞いをします)</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno run
</span></span><span style=display:flex><span>Available tasks:
</span></span><span style=display:flex><span>- dev
</span></span><span style=display:flex><span>    deno serve --watch -R main.ts
</span></span></code></pre></div><h3 id=パーミッションフラグの短縮形式>パーミッションフラグの短縮形式<a hidden class=anchor aria-hidden=true href=#パーミッションフラグの短縮形式>#</a></h3><p>各種<code>--allow-*</code>オプションの短縮形式がサポートされました:</p><table><thead><tr><th style=text-align:center>パーミッションフラグ</th><th style=text-align:center>短縮形</th></tr></thead><tbody><tr><td style=text-align:center><code>--allow-read</code></td><td style=text-align:center><code>-R</code></td></tr><tr><td style=text-align:center><code>--allow-write</code></td><td style=text-align:center><code>-W</code></td></tr><tr><td style=text-align:center><code>--allow-net</code></td><td style=text-align:center><code>-N</code></td></tr><tr><td style=text-align:center><code>--allow-env</code></td><td style=text-align:center><code>-E</code></td></tr><tr><td style=text-align:center><code>--allow-sys</code></td><td style=text-align:center><code>-S</code></td></tr></tbody></table><p>例えば、以下は<code>deno run --allow-read --allow-env main.ts</code>と同等です:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno -ER main.ts
</span></span></code></pre></div><p><code>--allow-run</code>や<code>--allow-ffi</code>など、短縮形式が導入されていないフラグもあり、<code>--allow-run</code>については<code>-X</code>という形式で導入が提案されているようです。</p><ul><li><a href=https://github.com/denoland/deno/issues/25201>Short flag for <code>--allow-run</code> (<code>-X</code>?) (#25201)</a></li></ul><h3 id=deno-serve><code>deno serve</code><a hidden class=anchor aria-hidden=true href=#deno-serve>#</a></h3><h4 id=--parallelオプション><code>--parallel</code>オプション<a hidden class=anchor aria-hidden=true href=#--parallelオプション>#</a></h4><p><code>deno serve</code>で<code>--parallel</code>オプションがサポートされています。</p><p>このオプションが指定された場合、<code>deno serve</code>はコア数または<code>DENO_JOBS</code>で指定された値に基づいて、リクエストを複数のワーカーへ分散してくれます。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ DENO_JOBS<span style=color:#f92672>=</span><span style=color:#ae81ff>2</span> deno serve --parallel main.ts
</span></span><span style=display:flex><span>deno serve: Listening on http://0.0.0.0:8000/ with <span style=color:#ae81ff>2</span> threads
</span></span></code></pre></div><hr><ul><li><a href="https://www.youtube.com/watch?v=T_2Ls07A83o">Parallelizing Deno Serve</a></li></ul><h4 id=denoservedefaultexport><code>Deno.ServeDefaultExport</code><a hidden class=anchor aria-hidden=true href=#denoservedefaultexport>#</a></h4><p><code>Deno.ServeDefaultExport</code>という型が追加されています。</p><p><code>deno serve</code>のエントリポイントとして指定するモジュールで<code>default export</code>するオブジェクトの型として利用することが想定されています。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-typescript data-lang=typescript><span style=display:flex><span><span style=color:#66d9ef>export</span> <span style=color:#66d9ef>default</span> {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>fetch</span>(<span style=color:#a6e22e>req</span>) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>Response</span>(<span style=color:#e6db74>&#34;OK&#34;</span>);
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>} <span style=color:#a6e22e>satisfies</span> <span style=color:#a6e22e>Deno</span>.<span style=color:#a6e22e>ServeDefaultExport</span>;
</span></span></code></pre></div><h4 id=deno-init---serve><code>deno init --serve</code><a hidden class=anchor aria-hidden=true href=#deno-init---serve>#</a></h4><p><code>deno serve</code>と<a href=https://uki00a.github.io/deno-weekly/articles/2024/08/11.html><code>@std/http/route</code></a>を使ったプロジェクトのテンプレートを作成してくれます:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno init --serve
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># `deno serve --watch`によって`main.ts`が実行されます</span>
</span></span><span style=display:flex><span>$ deno run dev
</span></span></code></pre></div><h3 id=deno-fmt><code>deno fmt</code><a hidden class=anchor aria-hidden=true href=#deno-fmt>#</a></h3><h4 id=yamlcsslesssassscsshtmlsveltevueastroのサポート>YAML/CSS/LESS/Sass/SCSS/HTML/Svelte/Vue/Astroのサポート<a hidden class=anchor aria-hidden=true href=#yamlcsslesssassscsshtmlsveltevueastroのサポート>#</a></h4><p><code>deno fmt</code>コマンドで以下の形式のファイルがサポートされました:</p><ul><li>YAML</li><li>CSS</li><li>LESS</li><li>Sass</li><li>SCSS</li><li>HTML</li><li>Component (Svelte/Vue/Astro/Angular)</li></ul><p>現時点ではまだ実験的機能という扱いのため、これらに対してフォーマットを行う場合は<code>--unstable-*</code>を指定して有効化する必要があります:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># YAMLファイルをフォーマット</span>
</span></span><span style=display:flex><span>$ deno fmt --unstable-yaml test.yml
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># HTMLファイルをフォーマット</span>
</span></span><span style=display:flex><span>$ deno fmt --unstable-html test.html
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># CSSファイルをフォ−マット</span>
</span></span><span style=display:flex><span>$ deno fmt --unstable-css test.css
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># Vueファイルをフォーマット</span>
</span></span><span style=display:flex><span>$ deno fmt --unstable-component Test.vue
</span></span></code></pre></div><p>または、<code>deno.json</code>の<code>unstable</code>フィールドによって有効化することも可能です:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;unstable&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt-yaml&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt-html&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt-css&#34;</span>,
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;fmt-component&#34;</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><h3 id=deno-compile><code>deno compile</code><a hidden class=anchor aria-hidden=true href=#deno-compile>#</a></h3><h4 id=コード署名>コード署名<a hidden class=anchor aria-hidden=true href=#コード署名>#</a></h4><p><a href=https://developer.apple.com/library/archive/documentation/Security/Conceptual/CodeSigningGuide/Introduction/Introduction.html>Mac</a>と<a href=https://learn.microsoft.com/ja-jp/dotnet/framework/tools/signtool-exe>Windows</a>向けに<code>deno compile</code>で生成されたバイナリーへのコード署名がサポートされています。</p><h4 id=--icon><code>--icon</code><a hidden class=anchor aria-hidden=true href=#--icon>#</a></h4><p>Windows向けに<code>--icon</code>オプションによるアイコン(<code>.ico</code>)の設定がサポートされました。</p><h3 id=deno-test><code>deno test</code><a hidden class=anchor aria-hidden=true href=#deno-test>#</a></h3><h4 id=--permit-no-files><code>--permit-no-files</code><a hidden class=anchor aria-hidden=true href=#--permit-no-files>#</a></h4><p><code>deno test</code>コマンドでテストファイルが見つからなかった際にエラーが発生するのを抑止するための<code>--allow-none</code>オプションが<code>--permit-no-files</code>にリネームされました</p><p><code>--allow-none</code>はまだ残ってはいるものの、Deno v2.0で削除予定のようです</p><h4 id=--hide-stacktraces><code>--hide-stacktraces</code><a hidden class=anchor aria-hidden=true href=#--hide-stacktraces>#</a></h4><p><code>--hide-stacktraces</code>オプションが追加されています。このオプションを指定すると、失敗したテストケースのテスト結果においてスタックトレースが表示されなくなります。</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno test --hide-stacktraces
</span></span></code></pre></div><h4 id=--watchpaths><code>--watch=&lt;PATHS></code><a hidden class=anchor aria-hidden=true href=#--watchpaths>#</a></h4><p><code>deno test</code>で<a href=https://uki00a.github.io/deno-weekly/articles/2021/12/19.html><code>--watch</code>オプションへのパスの指定</a>がサポートされています。</p><h3 id=deno-lint><code>deno lint</code><a hidden class=anchor aria-hidden=true href=#deno-lint>#</a></h3><h4 id=no-node-globalsルール><code>no-node-globals</code>ルール<a hidden class=anchor aria-hidden=true href=#no-node-globalsルール>#</a></h4><p><code>no-node-globals</code>ルールが導入されました。</p><p><code>process</code>や<code>Buffer</code>などのNode.jsのグローバルAPIへの参照が検出されると、<code>node:process</code>や<code>node:buffer</code>などから読み込むことが促されます。</p><h4 id=--ext><code>--ext</code><a hidden class=anchor aria-hidden=true href=#--ext>#</a></h4><p><code>--ext</code>オプションが追加されています。</p><p>標準入力経由でJSXやTSXに対してLintを行いたい場合に使用することが想定されているようです:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ some-command | deno lint --ext<span style=color:#f92672>=</span>jsx -
</span></span></code></pre></div><h3 id=deno-upgrade><code>deno upgrade</code><a hidden class=anchor aria-hidden=true href=#deno-upgrade>#</a></h3><h4 id=deno-upgrade-version><code>deno upgrade [VERSION]</code><a hidden class=anchor aria-hidden=true href=#deno-upgrade-version>#</a></h4><p><code>deno upgrade</code>コマンドで<code>--version</code>オプションを使わずに引数として直接バージョンを指定できるようになりました:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># v1.46.0へのアップグレード</span>
</span></span><span style=display:flex><span>$ deno upgrade 1.46.0
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e># canaryバージョンへのアップグレード</span>
</span></span><span style=display:flex><span>$ deno upgrade canary
</span></span></code></pre></div><h4 id=rcバージョンへのアップグレード>RCバージョンへのアップグレード<a hidden class=anchor aria-hidden=true href=#rcバージョンへのアップグレード>#</a></h4><p>RCバージョンへのアップグレードもサポートされています:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=display:flex><span><span style=color:#75715e># v1.46.0-rc.0へアップグレード</span>
</span></span><span style=display:flex><span>$ deno upgrade v1.46.0-rc.0
</span></span></code></pre></div><h3 id=deno-coverage><code>deno coverage</code><a hidden class=anchor aria-hidden=true href=#deno-coverage>#</a></h3><h4 id=パンくずリストのサポート>パンくずリストのサポート<a hidden class=anchor aria-hidden=true href=#パンくずリストのサポート>#</a></h4><p><a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.39.html><code>deno coverage --html</code></a>でHTMLレポートを生成する際に、パンくずリストが出力されるよう改善されています。</p><h3 id=deno-add><code>deno add</code><a hidden class=anchor aria-hidden=true href=#deno-add>#</a></h3><h4 id=dist-tagsのサポート>dist tagsのサポート<a hidden class=anchor aria-hidden=true href=#dist-tagsのサポート>#</a></h4><p>npmパッケージをインストールする際のdist tagsの指定がサポートされています:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno add npm:react@latest
</span></span></code></pre></div><h4 id=ルートのエントリーポイントが未定義のパッケージがサポート>ルートのエントリーポイントが未定義のパッケージがサポート<a hidden class=anchor aria-hidden=true href=#ルートのエントリーポイントが未定義のパッケージがサポート>#</a></h4><p><code>@std/testing</code>などのルートのエントリポイントが未定義のパッケージ(<code>deno.jsonにexports["."]: "./mod.ts"</code>のような定義がないパッケージ)を<code>deno add</code>でインストールしようとすると、エラーが発生する問題が修正されています。</p><h4 id=npmの指定漏れに関するエラーメッセージの改善><code>npm:</code>の指定漏れに関するエラーメッセージの改善<a hidden class=anchor aria-hidden=true href=#npmの指定漏れに関するエラーメッセージの改善>#</a></h4><p>以下のようなエラーメッセージが出力されます:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span><span style=color:#75715e># Deno v1.46</span>
</span></span><span style=display:flex><span>$ deno add react
</span></span><span style=display:flex><span>error: jsr:react was not found, but a matching npm package exists. Did you mean <span style=color:#e6db74>`</span>deno add npm:react<span style=color:#e6db74>`</span>?
</span></span></code></pre></div><h3 id=deno-publish><code>deno publish</code><a hidden class=anchor aria-hidden=true href=#deno-publish>#</a></h3><h4 id=ライセンスチェック>ライセンスチェック<a hidden class=anchor aria-hidden=true href=#ライセンスチェック>#</a></h4><p><code>deno publish</code>で<a href=https://uki00a.github.io/deno-weekly/articles/2024/07/28.html>ライセンスが未定義のパッケージを公開</a>しようとした際に、エラーが発生するように挙動が変更されています。</p><p>これを回避するためには、<code>deno.json</code>または<code>jsr.json</code>で<code>license</code>フィールドを定義するか、パッケージを公開する際にLICENSEファイルを含める必要があります。</p><h3 id=deno-check--deno-cache><code>deno check</code> & <code>deno cache</code><a hidden class=anchor aria-hidden=true href=#deno-check--deno-cache>#</a></h3><h4 id=glob形式のサポート>glob形式のサポート<a hidden class=anchor aria-hidden=true href=#glob形式のサポート>#</a></h4><p><code>deno check</code>と<code>deno cache</code>コマンドの引数をglob形式で指定できるように改善されています:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno check <span style=color:#e6db74>&#39;tests/**/*.ts&#39;</span>
</span></span></code></pre></div><h3 id=denolock><code>deno.lock</code><a hidden class=anchor aria-hidden=true href=#denolock>#</a></h3><h4 id=denojsonのlockフィールドでオブジェクト形式の設定がサポート><code>deno.json</code>の<code>lock</code>フィールドでオブジェクト形式の設定がサポート<a hidden class=anchor aria-hidden=true href=#denojsonのlockフィールドでオブジェクト形式の設定がサポート>#</a></h4><p><code>deno.json</code>の<code>lock</code>フィールドでオブジェクトの指定がサポートされました:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;lock&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;frozen&#34;</span>: <span style=color:#66d9ef>true</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>現状では<code>frozen</code>フィールドがサポートされており、<code>true</code>を指定すると<a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.45.html><code>--frozen</code>オプション</a>と同様の効果を発揮します。</p><h4 id=denolock-v4><code>deno.lock</code> v4<a hidden class=anchor aria-hidden=true href=#denolock-v4>#</a></h4><p><code>deno.lock</code>の新しいバージョンであるv4が実装されています。</p><p>現状の<code>deno.lock</code>の形式である<a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.37.html>v3</a>よりも軽量化され、<code>git diff</code>などによって差分が確認しやすくなるよう改善されているようです。</p><p>現時点ではまだ実験的機能という扱いであり、v4を利用するには<a href=https://uki00a.github.io/deno-weekly/articles/2024/02/18.html><code>DENO_FUTURE=1</code></a>を指定する必要があります。(<a href=https://github.com/denoland/deno/pull/25165>Deno v2.0からデフォルトで有効化される想定のようです</a>)</p><h3 id=jsrパッケージへのパッチ>JSRパッケージへのパッチ<a hidden class=anchor aria-hidden=true href=#jsrパッケージへのパッチ>#</a></h3><p>実験的機能として、JSRパッケージにパッチを当てる機能が実装されています。</p><ul><li><a href=https://github.com/denoland/deno/pull/25068>feat(unstable): ability to use a local copy of jsr packages (#25068)</a></li></ul><p>この機能を利用する際は、以下のように<code>deno.json</code>で<code>patch</code>フィールドを定義します:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;imports&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;@std/ulid&#34;</span>: <span style=color:#e6db74>&#34;jsr:@std/ulid@^1.0.0&#34;</span>
</span></span><span style=display:flex><span>  },
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;patch&#34;</span>: [
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;./patches/std_ulid&#34;</span>
</span></span><span style=display:flex><span>  ]
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p><code>./patches/std_ulid/deno.json</code>には、上記の<code>deno.json</code>の<code>imports</code>で定義されたバージョン要求にマッチするようにパッケージのメタ情報を定義しておく必要があります:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-json data-lang=json><span style=display:flex><span>{
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;name&#34;</span>: <span style=color:#e6db74>&#34;@std/ulid&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;version&#34;</span>: <span style=color:#e6db74>&#34;1.0.0&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#f92672>&#34;exports&#34;</span>: {
</span></span><span style=display:flex><span>    <span style=color:#f92672>&#34;.&#34;</span>: <span style=color:#e6db74>&#34;./mod.js&#34;</span>
</span></span><span style=display:flex><span>  }
</span></span><span style=display:flex><span>}
</span></span></code></pre></div><p>このように設定された場合、<code>@std/ulid</code>を読み込む際は<code>jsr:@std/ulid@^1.0.0</code>ではなく、<code>./patches/std_ulid/mod.js</code>が読み込まれます:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#75715e>// `jsr:@std/ulid@^1.0.0`ではなく、`./patches/std_ulid/mod.js`が読み込まれます
</span></span></span><span style=display:flex><span><span style=color:#75715e></span><span style=color:#66d9ef>import</span> <span style=color:#f92672>*</span> <span style=color:#a6e22e>as</span> <span style=color:#a6e22e>ulid</span> <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;@std/ulid&#34;</span>;
</span></span></code></pre></div><p>この機能はまだ実験的機能のため、今後、使い方などが変更される可能性があります。</p><h3 id=hmr>HMR<a hidden class=anchor aria-hidden=true href=#hmr>#</a></h3><p><code>--unstable-hmr</code>が<code>--watch-hmr</code>にリネームされ、<a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.38.html>HMR機能</a>が安定化されました。</p><h3 id=--env-file><code>--env-file</code><a hidden class=anchor aria-hidden=true href=#--env-file>#</a></h3><p><code>--env-file</code>オプションが追加されています。</p><p>振る舞いは<a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.38.html><code>--env</code></a>と全く同じですが、他のランタイムとの一貫性の改善のためにこのオプションが導入されたようです。</p><h3 id=uiの改善>UIの改善<a hidden class=anchor aria-hidden=true href=#uiの改善>#</a></h3><h4 id=ヘルプの改善>ヘルプの改善<a hidden class=anchor aria-hidden=true href=#ヘルプの改善>#</a></h4><p>ヘルプの表示が改善されており、関連するオプションごとにグループ化することで、より使い方を確認しやすいように改善されています</p><p>この改善に伴い、<code>--unstable-*</code>系統のフラグがデフォルトではヘルプに表示されないように挙動が変更されています</p><p>もし<code>--unstable-*</code>について確認したい場合は、<code>--help=unstable</code>を指定する必要があります</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ deno run --help<span style=color:#f92672>=</span>unstable
</span></span></code></pre></div><h4 id=ダウンロード時などの進捗表示>ダウンロード時などの進捗表示<a hidden class=anchor aria-hidden=true href=#ダウンロード時などの進捗表示>#</a></h4><p>npmパッケージのダウンロード時などに進捗状況が表示されるよう改善されています。</p><h3 id=deno-json_reference><code>deno json_reference</code><a hidden class=anchor aria-hidden=true href=#deno-json_reference>#</a></h3><p>ヘルプに関する表示の改善に併せて、<code>deno json_reference</code>という新規コマンドが追加されています。ヘルプの内容をJSON形式で出力してくれるようです。</p><h2 id=nodejs互換性の改善>Node.js互換性の改善<a hidden class=anchor aria-hidden=true href=#nodejs互換性の改善>#</a></h2><p><a href=https://github.com/microsoft/playwright>Playwright</a>や<a href=https://github.com/shelljs/shelljs>shelljs</a>などのパッケージに関するサポートが改善されているようです。</p><p>また、先程紹介した<code>deno add</code>でnpmパッケージをインストールする際のdist tagsの指定もサポートされています。</p><h3 id=npmrc><code>.npmrc</code><a hidden class=anchor aria-hidden=true href=#npmrc>#</a></h3><p><a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.44.html><code>.npmrc</code></a>での<code>username</code>と<code>_password</code>の設定がサポートされました。</p><h3 id=非推奨化パッケージの警告>非推奨化パッケージの警告<a hidden class=anchor aria-hidden=true href=#非推奨化パッケージの警告>#</a></h3><p>非推奨化されたnpmパッケージのインストール時に警告が表示されるように改善されています。</p><h3 id=組み込みパッケージの改善>組み込みパッケージの改善<a hidden class=anchor aria-hidden=true href=#組み込みパッケージの改善>#</a></h3><h4 id=nodevm><code>node:vm</code><a hidden class=anchor aria-hidden=true href=#nodevm>#</a></h4><p><code>node:vm</code>の再実装が行われており、Node.jsとの互換性が改善されています。</p><p>また、<code>compileFunction()</code>や<code>Script#createCachedData</code>, <code>Script.sourceMapURL</code>などが実装されています。</p><h4 id=nodecrypto><code>node:crypto</code><a hidden class=anchor aria-hidden=true href=#nodecrypto>#</a></h4><p>互換性の改善のために<code>node:crypto</code>が再実装されています。これに合わせて、様々なアルゴリズムのサポートが追加されています (<a href=https://github.com/denoland/deno/commit/4fa8869f2487749a9f190cb3047f4f3e6d571f27>feat(ext/node): rewrite crypto keys (#24463)</a>)</p><p>また、新しく以下のAPIが実装されています:</p><ul><li><code>Cipher#setAutoPadding</code></li><li><code>X509Certificate#publicKey</code></li><li><code>diffieHellman()</code></li></ul><h4 id=nodechild_process><code>node:child_process</code><a hidden class=anchor aria-hidden=true href=#nodechild_process>#</a></h4><p><code>spawn()</code>などの<code>stdio</code>オプションに4つ以上の要素が設定できるように改善されています。この改善により、MacとLinux限定でPlaywrightが動作するようです。</p><p>また、<code>child_process.execFile</code>などでパッケージ内に含まれるスクリプトを実行するようなnpmパッケージがあった場合、意図せぬ動作をする問題が解消されています。(<code>shelljs</code>などのパッケージのサポートを想定した変更のようです)</p><h4 id=nodefs><code>node:fs</code><a hidden class=anchor aria-hidden=true href=#nodefs>#</a></h4><p><code>read()</code>と<code>write()</code>で<code>Uint8Array</code>以外の<code>TypedArray</code>を渡せるように改善されています。</p><h2 id=破壊的変更>破壊的変更<a hidden class=anchor aria-hidden=true href=#破壊的変更>#</a></h2><h3 id=廃止されたtemporal-apiが削除>廃止されたTemporal APIが削除<a hidden class=anchor aria-hidden=true href=#廃止されたtemporal-apiが削除>#</a></h3><p><a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.40.html>Temporal API</a>に関して、廃止された以下のAPIが削除されています (<a href=https://github.com/denoland/deno/pull/24836>#24836</a>)</p><ul><li><code>Temporal.Instant.fromEpochSeconds()</code></li><li><code>Temporal.Instant.fromEpochMicroseconds()</code></li><li><code>Temporal.Instant.epochSeconds</code></li><li><code>Temporal.Instant.epochMicroseconds</code></li><li><code>Temporal.PlainDate#getCalendar</code></li><li><code>Temporal.PlainDateTime#getCalendar</code></li><li><code>Temporal.PlainDateTime#withPlainDate</code></li><li><code>Temporal.PlainDateTime#toPlainYearMonth</code></li><li><code>Temporal.PlainDateTime#toPlainMonthDay</code></li><li><code>Temporal.PlainMonthDay#getCalendar</code></li><li><code>Temporal.PlainTime#toPlainDateTime</code></li><li><code>Temporal.PlainTime#toZonedDateTime</code></li><li><code>Temporal.TimeZoneProtocol#getNextTransition</code></li><li><code>Temporal.TimeZoneProtocol#getPreviousTransition</code></li><li><code>Temporal.TimeZone#equals</code></li><li><code>Temporal.TimeZone#getNextTransition</code></li><li><code>Temporal.TimeZone#getPreviousTransition</code></li><li><code>Temporal.PlainYearMonth#getCalendar</code></li><li><code>Temporal.ZonedDateTime#getTimeZone</code></li><li><code>Temporal.ZonedDateTime#getCalendar</code></li><li><code>Temporal.ZonedDateTime#withPlainDate</code></li><li><code>Temporal.ZonedDateTime#toPlainYearMonth</code></li><li><code>Temporal.ZonedDateTime#toPlainMonthDay</code></li><li><code>Temporal.Now.zonedDateTime</code></li><li><code>Temporal.Now.plainDateTime</code></li><li><code>Temporal.Now.plainDate</code></li></ul><h3 id=webapu>WebAPU<a hidden class=anchor aria-hidden=true href=#webapu>#</a></h3><p><code>GPUAdapter#requestAdapterInfo</code>が削除され、代わりに<code>GPUAdapter.info</code>が追加されています (<a href=https://github.com/denoland/deno/pull/24783>#24783</a>)</p><h3 id=import-assertions>Import Assertions<a hidden class=anchor aria-hidden=true href=#import-assertions>#</a></h3><p>Import Assertionsの使用時に警告が表示されるようになりました。</p><p>Import Assertionsは削除予定のため、<a href=https://uki00a.github.io/deno-weekly/articles/deno/v1.37.html>Import Attributes</a>への移行が推奨されます。</p><h2 id=deno-api>Deno API<a hidden class=anchor aria-hidden=true href=#deno-api>#</a></h2><h3 id=denowatchfs><code>Deno.watchFs</code><a hidden class=anchor aria-hidden=true href=#denowatchfs>#</a></h3><p><code>Deno.watchFs</code>で<code>rename</code>イベントがサポートされました。</p><h2 id=web-api>Web API<a hidden class=anchor aria-hidden=true href=#web-api>#</a></h2><h3 id=fetch><code>fetch()</code><a hidden class=anchor aria-hidden=true href=#fetch>#</a></h3><p><code>fetch</code>の<code>body</code>で<code>AsyncIterable&lt;Uint8Array></code>の指定がサポートされています:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>createReadStream</span> } <span style=color:#a6e22e>from</span> <span style=color:#e6db74>&#34;node:fs&#34;</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>stream</span> <span style=color:#f92672>=</span> <span style=color:#a6e22e>createReadStream</span>(<span style=color:#e6db74>&#34;./data.txt&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>res</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(<span style=color:#e6db74>&#34;http://localhost:8000/upload&#34;</span>, {
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;POST&#34;</span>,
</span></span><span style=display:flex><span>  <span style=color:#a6e22e>body</span><span style=color:#f92672>:</span> <span style=color:#a6e22e>stream</span>
</span></span><span style=display:flex><span>});
</span></span></code></pre></div><h3 id=urlpattern><code>URLPattern</code><a hidden class=anchor aria-hidden=true href=#urlpattern>#</a></h3><p><code>ignoreCase</code>オプションと<code>hasRegExpGroups</code>プロパティーがサポートされています。(<a href=https://github.com/denoland/deno/pull/24741>#24741</a>)</p><h2 id=v8>V8<a hidden class=anchor aria-hidden=true href=#v8>#</a></h2><p>Denoの内部で使用されているV8がv12.9へアップデートされています。</p><h2 id=参考>参考<a hidden class=anchor aria-hidden=true href=#参考>#</a></h2><ul><li><a href=https://deno.com/blog/v1.46>Deno 1.46: The Last 1.x Release</a></li><li><a href=https://github.com/denoland/deno/releases/tag/v1.46.0>https://github.com/denoland/deno/releases/tag/v1.46.0</a></li></ul></div><footer class=post-footer><ul class=post-tags><li><a href=https://uki00a.github.io/deno-weekly/tags/deno.html>deno</a></li><li><a href=https://uki00a.github.io/deno-weekly/tags/jsr.html>jsr</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2024 <a href=https://uki00a.github.io/deno-weekly/>週刊Deno</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>